/*! For license information please see main.ad85123b.js.LICENSE.txt */
!function(){var e={4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),o=n(7297),i=n(9301),a=n(9774),s=n(1804),u=n(9145),c=n(5411),l=n(6467),f=n(6789),d=n(9346);e.exports=function(e){return new Promise((function(t,n){var p,h=e.data,v=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(h)&&delete v["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(x+":"+b)}var w=s(e.baseURL,e.url);function C(){if(y){var r="getAllResponseHeaders"in y?u(y.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};o((function(e){t(e),g()}),(function(e){n(e),g()}),i),y=null}}if(y.open(e.method.toUpperCase(),a(w,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(C)},y.onabort=function(){y&&(n(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||c(w))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;S&&(v[e.xsrfHeaderName]=S)}"setRequestHeader"in y&&r.forEach(v,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete v[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),m&&"json"!==m&&(y.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new d("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),h||(h=null),y.send(h)}))}},8036:function(e,t,n){"use strict";var r=n(3589),o=n(4049),i=n(3773),a=n(777);var s=function e(t){var n=new i(t),s=o(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(1709));s.Axios=i,s.Cancel=n(9346),s.CancelToken=n(6857),s.isCancel=n(5517),s.VERSION=n(7600).version,s.all=function(e){return Promise.all(e)},s.spread=n(8089),s.isAxiosError=n(9580),e.exports=s,e.exports.default=s},9346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6857:function(e,t,n){"use strict";var r=n(9346);function o(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),o=n(9774),i=n(7470),a=n(2733),s=n(777),u=n(7835),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!o){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),i=Promise.resolve(t);f.length;)i=i.then(f.shift(),f.shift());return i}for(var d=t;r.length;){var p=r.shift(),h=r.shift();try{d=p(d)}catch(v){h(v);break}}try{i=a(d)}catch(v){return Promise.reject(v)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},7470:function(e,t,n){"use strict";var r=n(3589);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},1804:function(e,t,n){"use strict";var r=n(4044),o=n(9549);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},6467:function(e,t,n){"use strict";var r=n(6460);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},2733:function(e,t,n){"use strict";var r=n(3589),o=n(2693),i=n(5517),a=n(1709),s=n(9346);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6460:function(e){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function u(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,o=t(e);r.isUndefined(o)&&t!==u||(n[e]=o)})),n}},7297:function(e,t,n){"use strict";var r=n(6467);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),o=n(1709);e.exports=function(e,t,n){var i=this||o;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),o=n(4341),i=n(6460),a=n(6789),s={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={transitional:a,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(u(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(o){if("SyntaxError"!==o.name)throw o}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a){if("SyntaxError"===s.name)throw i(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(s)})),e.exports=c},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.26.1"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},9145:function(e,t,n){"use strict";var r=n(3589),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7835:function(e,t,n){"use strict";var r=n(7600).version,o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(o(r," has been removed"+(t?" in "+t:"")));return t&&!i[r]&&(i[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],a=t[i];if(a){var s=e[i],u=void 0===s||a(s,i,e);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:o}},3589:function(e,t,n){"use strict";var r=n(4049),o=Object.prototype.toString;function i(e){return Array.isArray(e)}function a(e){return"undefined"===typeof e}function s(e){return"[object ArrayBuffer]"===o.call(e)}function u(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===o.call(e)}function f(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===o.call(e)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===o.call(e)},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,o){e[o]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},2110:function(e,t,n){"use strict";var r=n(8309),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var o=p(n);o&&o!==h&&e(t,o,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<a.length;++m){var g=a[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=d(n,g);try{c(t,g,y)}catch(x){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case v:case u:return e;default:return t}}case o:return t}}}function C(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return C(e)||w(e)===l},t.isConcurrentMode=C,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===s||e===a||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===x||e.$$typeof===b||e.$$typeof===g)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},4463:function(e,t,n){"use strict";var r=n(2791),o=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function v(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!f.call(h,e)||!f.call(p,e)&&(d.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),R=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var M,L=Object.assign;function B(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var u="\n"+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function W(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case C:return"Portal";case k:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Se=null,Ee=null;function ke(e){if(e=bo(e)){if("function"!==typeof Ce)throw Error(i(280));var t=e.stateNode;t&&(t=Co(t),Ce(e.stateNode,e.type,t))}}function _e(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Re(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Te=!1;function De(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ie(e,t,n)}finally{Te=!1,(null!==Se||null!==Ee)&&(Ae(),Re())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=Co(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(l)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(le){Oe=!1}function Pe(e,t,n,r,o,i,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Le=null,Be=!1,ze=null,je={onError:function(e){Me=!0,Le=e}};function We(e,t,n,r,o,i,a,s,u){Me=!1,Le=null,Pe.apply(je,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return He(o),e;if(a===r)return He(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,$e=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Qe=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=ft(s):0!==(i&=a)&&(r=ft(i))}else 0!==(a=n&~o)?r=ft(a):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Ct,St,Et,kt,_t=!1,Rt=[],It=null,At=null,Tt=null,Dt=new Map,Nt=new Map,Ot=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Mt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Lt(e){var t=xo(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void kt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Bt(e)&&n.delete(t)}function jt(){_t=!1,null!==It&&Bt(It)&&(It=null),null!==At&&Bt(At)&&(At=null),null!==Tt&&Bt(Tt)&&(Tt=null),Dt.forEach(zt),Nt.forEach(zt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jt)))}function Ut(e){function t(t){return Wt(t,e)}if(0<Rt.length){Wt(Rt[0],e);for(var n=1;n<Rt.length;n++){var r=Rt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Wt(It,e),null!==At&&Wt(At,e),null!==Tt&&Wt(Tt,e),Dt.forEach(t),Nt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Vt=b.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var o=xt,i=Vt.transition;Vt.transition=null;try{xt=1,Kt(e,t,n,r)}finally{xt=o,Vt.transition=i}}function qt(e,t,n,r){var o=xt,i=Vt.transition;Vt.transition=null;try{xt=4,Kt(e,t,n,r)}finally{xt=o,Vt.transition=i}}function Kt(e,t,n,r){if(Ht){var o=Xt(e,t,n,r);if(null===o)Hr(e,t,r,$t,n),Pt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return It=Mt(It,e,t,n,r,o),!0;case"dragenter":return At=Mt(At,e,t,n,r,o),!0;case"mouseover":return Tt=Mt(Tt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Dt.set(i,Mt(Dt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Nt.set(i,Mt(Nt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ft.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&wt(i),null===(i=Xt(e,t,n,r))&&Hr(e,t,r,$t,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var $t=null;function Xt(e,t,n,r){if($t=null,null!==(e=xo(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),fn=L({},cn,{view:0,detail:0}),dn=on(fn),pn=L({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(pn),vn=on(L({},pn,{dataTransfer:0})),mn=on(L({},fn,{relatedTarget:0})),gn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(yn),bn=on(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function kn(){return En}var _n=L({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=on(_n),In=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(L({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Tn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(Dn),On=[9,13,27,32],Fn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var Mn=l&&"TextEvent"in window&&!Pn,Ln=l&&(!Fn||Pn&&8<Pn&&11>=Pn),Bn=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){_e(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function $n(e){Br(e,0)}function Xn(e){if(K(wo(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Gn(t,Kn,e,we(e)),De($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!f.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=lr(n,i);var a=lr(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==mr||mr!==$(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function kr(e){if(Sr[e])return Sr[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var _r=kr("animationend"),Rr=kr("animationiteration"),Ir=kr("animationstart"),Ar=kr("transitionend"),Tr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Tr.set(e,t),u(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Fr=Dr[Or];Nr(Fr.toLowerCase(),"on"+(Fr[0].toUpperCase()+Fr.slice(1)))}Nr(_r,"onAnimationEnd"),Nr(Rr,"onAnimationIteration"),Nr(Ir,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,u,c){if(We.apply(this,arguments),Me){if(!Me)throw Error(i(198));var l=Le;Me=!1,Le=null,Be||(Be=!0,ze=l)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&o.isPropagationStopped())break e;Lr(o,s,c),i=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==i&&o.isPropagationStopped())break e;Lr(o,s,c),i=u}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Wr]){e[Wr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wr]||(t[Wr]=!0,jr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var o=Gt;break;case 4:o=qt;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===o||8===u.nodeType&&u.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=xo(s)))return;if(5===(u=a.tag)||6===u){r=i=a;continue e}s=s.parentNode}}r=r.return}De((function(){var r=i,o=we(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case _r:case Rr:case Ir:u=gn;break;case Ar:u=Tn;break;case"scroll":u=dn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==d&&(null!=(v=Ne(h,d))&&l.push(Gr(h,v,p)))),f)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,o),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xo(c)&&!c[vo])&&(u||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?xo(c):null)&&(c!==(f=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=hn,v="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==u?s:wo(u),p=null==c?s:wo(c),(s=new l(v,h+"leave",u,n,o)).target=f,s.relatedTarget=p,v=null,xo(o)===r&&((l=new l(d,h+"enter",c,n,o)).target=p,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(d=c,h=0,p=l=u;p;p=Kr(p))h++;for(p=0,v=d;v;v=Kr(v))p++;for(;0<h-p;)l=Kr(l),h--;for(;0<p-h;)d=Kr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Kr(l),d=Kr(d)}l=null}else l=null;null!==u&&$r(a,s,u,l,!1),null!==c&&null!==f&&$r(a,f,c,l,!0)}if("select"===(u=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Yn;else if(Hn(s))if(Qn)m=ar;else{m=or;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Gn(a,m,n,o):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?wo(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,o);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(a,n,o)}var y;if(Fn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Un?jn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==x?"onCompositionEnd"===x&&Un&&(y=en()):(Jt="value"in(Qt=o)?Qt.value:Qt.textContent,Un=!0)),0<(g=qr(r,x)).length&&(x=new bn(x,e,null,n,o),a.push({event:x,listeners:g}),y?x.data=y:null!==(y=Wn(n))&&(x.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Fn&&jn(e,t)?(e=en(),Zt=Jt=Qt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Br(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ne(e,n))&&r.unshift(Gr(e,i,o)),null!=(i=Ne(e,t))&&r.push(Gr(e,i,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(u=Ne(n,i))&&a.unshift(Gr(n,u,s)):o||null!=(u=Ne(n,i))&&a.push(Gr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function uo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ut(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,vo="__reactContainer$"+fo,mo="__reactEvents$"+fo,go="__reactListeners$"+fo,yo="__reactHandles$"+fo;function xo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lo(e);null!==e;){if(n=e[po])return n;e=lo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[vo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Co(e){return e[ho]||null}var So=[],Eo=-1;function ko(e){return{current:e}}function _o(e){0>Eo||(e.current=So[Eo],So[Eo]=null,Eo--)}function Ro(e,t){Eo++,So[Eo]=e.current,e.current=t}var Io={},Ao=ko(Io),To=ko(!1),Do=Io;function No(e,t){var n=e.type.contextTypes;if(!n)return Io;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fo(){_o(To),_o(Ao)}function Po(e,t,n){if(Ao.current!==Io)throw Error(i(168));Ro(Ao,t),Ro(To,n)}function Mo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,V(e)||"Unknown",o));return L({},n,r)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Io,Do=Ao.current,Ro(Ao,e),Ro(To,To.current),!0}function Bo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Mo(e,t,Do),r.__reactInternalMemoizedMergedChildContext=e,_o(To),_o(Ao),Ro(Ao,e)):_o(To),Ro(To,n)}var zo=null,jo=!1,Wo=!1;function Uo(e){null===zo?zo=[e]:zo.push(e)}function Vo(){if(!Wo&&null!==zo){Wo=!0;var e=0,t=xt;try{var n=zo;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zo=null,jo=!1}catch(o){throw null!==zo&&(zo=zo.slice(e+1)),Ke(Ze,Vo),o}finally{xt=t,Wo=!1}}return null}var Ho=[],Go=0,qo=null,Ko=0,$o=[],Xo=0,Yo=null,Qo=1,Jo="";function Zo(e,t){Ho[Go++]=Ko,Ho[Go++]=qo,qo=e,Ko=t}function ei(e,t,n){$o[Xo++]=Qo,$o[Xo++]=Jo,$o[Xo++]=Yo,Yo=e;var r=Qo;e=Jo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Qo=1<<32-at(t)+o|n<<o|r,Jo=i+e}else Qo=1<<i|n<<o|r,Jo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===qo;)qo=Ho[--Go],Ho[Go]=null,Ko=Ho[--Go],Ho[Go]=null;for(;e===Yo;)Yo=$o[--Xo],$o[Xo]=null,Jo=$o[--Xo],$o[Xo]=null,Qo=$o[--Xo],$o[Xo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yo?{id:Qo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ii){var t=oi;if(t){var n=t;if(!ui(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&ui(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function fi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function di(e){if(e!==ri)return!1;if(!ii)return fi(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(fi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function hi(){oi=ri=null,ii=!1}function vi(e){null===ai?ai=[e]:ai.push(e)}var mi=b.ReactCurrentBatchConfig;function gi(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yi=ko(null),xi=null,bi=null,wi=null;function Ci(){wi=bi=xi=null}function Si(e){var t=yi.current;_o(yi),e._currentValue=t}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t){xi=e,wi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function _i(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===xi)throw Error(i(308));bi=e,xi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ri=null;function Ii(e){null===Ri?Ri=[e]:Ri.push(e)}function Ai(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ii(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ti(e,r)}function Ti(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Di=!1;function Ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Au)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ti(e,n)}return null===(o=r.interleaved)?(t.next=t,Ii(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ti(e,n)}function Mi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Li(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var o=e.updateQueue;Di=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var u=s,c=u.next;u.next=null,null===a?i=c:a.next=c,a=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var f=o.baseState;for(a=0,l=c=u=null,s=i;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,v=s;switch(d=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(d="function"===typeof(h=v.payload)?h.call(p,f,d):h)||void 0===d)break e;f=L({},f,d);break e;case 2:Di=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=o.effects)?o.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=p,u=f):l=l.next=p,a|=d;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(d=s).next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}if(null===l&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=l,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Lu|=a,e.lanes=a,e.memoizedState=f}}function zi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var ji=(new r.Component).refs;function Wi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Fi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pi(e,i,o))&&(rc(t,e,o,r),Mi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Fi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pi(e,i,o))&&(rc(t,e,o,r),Mi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=Fi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Pi(e,o,r))&&(rc(t,e,r,n),Mi(t,e,r))}};function Vi(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(o,i))}function Hi(e,t,n){var r=!1,o=Io,i=t.contextType;return"object"===typeof i&&null!==i?i=_i(i):(o=Oo(t)?Do:Ao.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?No(e,o):Io),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function qi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=ji,Ni(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=_i(i):(i=Oo(t)?Do:Ao.current,o.context=No(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Wi(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Ui.enqueueReplaceState(o,o.state,null),Bi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Ki(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===ji&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function $i(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Fc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&Xi(i)===t.type)?((r=o(t,n.props)).ref=Ki(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ki(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ki(e,null,t),n.return=e,n;case C:return(t=zc(t,e.mode,n)).return=e,t;case N:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Mc(t,e.mode,n,null)).return=e,t;$i(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case C:return n.key===o?l(e,t,n,r):null;case N:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||P(n))return null!==o?null:f(e,t,n,r,null);$i(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case C:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case N:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||P(r))return f(t,e=e.get(n)||null,r,o,null);$i(t,r)}return null}function v(o,i,s,u){for(var c=null,l=null,f=i,v=i=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=p(o,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(o,f),i=a(g,i,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(o,f),ii&&Zo(o,v),c;if(null===f){for(;v<s.length;v++)null!==(f=d(o,s[v],u))&&(i=a(f,i,v),null===l?c=f:l.sibling=f,l=f);return ii&&Zo(o,v),c}for(f=r(o,f);v<s.length;v++)null!==(m=h(f,o,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),i=a(m,i,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(o,e)})),ii&&Zo(o,v),c}function m(o,s,u,c){var l=P(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var x=p(o,v,y.value,c);if(null===x){null===v&&(v=g);break}e&&v&&null===x.alternate&&t(o,v),s=a(x,s,m),null===f?l=x:f.sibling=x,f=x,v=g}if(y.done)return n(o,v),ii&&Zo(o,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=d(o,y.value,c))&&(s=a(y,s,m),null===f?l=y:f.sibling=y,f=y);return ii&&Zo(o,m),l}for(v=r(o,v);!y.done;m++,y=u.next())null!==(y=h(v,o,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(o,e)})),ii&&Zo(o,m),l}return function e(r,i,a,u){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,l=i;null!==l;){if(l.key===c){if((c=a.type)===S){if(7===l.tag){n(r,l.sibling),(i=o(l,a.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&Xi(c)===l.type){n(r,l.sibling),(i=o(l,a.props)).ref=Ki(r,l,a),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===S?((i=Mc(a.props.children,r.mode,u,a.key)).return=r,r=i):((u=Pc(a.type,a.key,a.props,null,r.mode,u)).ref=Ki(r,i,a),u.return=r,r=u)}return s(r);case C:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(a,r.mode,u)).return=r,r=i}return s(r);case N:return e(r,i,(l=a._init)(a._payload),u)}if(te(a))return v(r,i,a,u);if(P(a))return m(r,i,a,u);$i(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Bc(a,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Qi=Yi(!0),Ji=Yi(!1),Zi={},ea=ko(Zi),ta=ko(Zi),na=ko(Zi);function ra(e){if(e===Zi)throw Error(i(174));return e}function oa(e,t){switch(Ro(na,t),Ro(ta,e),Ro(ea,Zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(ea),Ro(ea,t)}function ia(){_o(ea),_o(ta),_o(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ro(ta,e),Ro(ea,n))}function sa(e){ta.current===e&&(_o(ea),_o(ta))}var ua=ko(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function fa(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var da=b.ReactCurrentDispatcher,pa=b.ReactCurrentBatchConfig,ha=0,va=null,ma=null,ga=null,ya=!1,xa=!1,ba=0,wa=0;function Ca(){throw Error(i(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ea(e,t,n,r,o,a){if(ha=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ss:us,e=n(r,o),xa){a=0;do{if(xa=!1,ba=0,25<=a)throw Error(i(301));a+=1,ga=ma=null,t.updateQueue=null,da.current=cs,e=n(r,o)}while(xa)}if(da.current=as,t=null!==ma&&null!==ma.next,ha=0,ga=ma=va=null,ya=!1,t)throw Error(i(300));return e}function ka(){var e=0!==ba;return ba=0,e}function _a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?va.memoizedState=ga=e:ga=ga.next=e,ga}function Ra(){if(null===ma){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?va.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?va.memoizedState=ga=e:ga=ga.next=e}return ga}function Ia(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=Ra(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ma,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var u=s=null,c=null,l=a;do{var f=l.lane;if((ha&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=d,s=r):c=c.next=d,va.lanes|=f,Lu|=f}l=l.next}while(null!==l&&l!==a);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,va.lanes|=a,Lu|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=Ra(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Da(){}function Na(e,t){var n=va,r=Ra(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,bs=!0),r=r.queue,Ha(Pa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,za(9,Fa.bind(null,n,r,o,t),void 0,null),null===Tu)throw Error(i(349));0!==(30&ha)||Oa(n,t,o)}return o}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Fa(e,t,n,r){t.value=n,t.getSnapshot=r,Ma(t)&&La(e)}function Pa(e,t,n){return n((function(){Ma(t)&&La(e)}))}function Ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function La(e){var t=Ti(e,1);null!==t&&rc(t,e,1,-1)}function Ba(e){var t=_a();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return Ra().memoizedState}function Wa(e,t,n,r){var o=_a();va.flags|=e,o.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function Ua(e,t,n,r){var o=Ra();r=void 0===r?null:r;var i=void 0;if(null!==ma){var a=ma.memoizedState;if(i=a.destroy,null!==r&&Sa(r,a.deps))return void(o.memoizedState=za(t,n,i,r))}va.flags|=e,o.memoizedState=za(1|t,n,i,r)}function Va(e,t){return Wa(8390656,8,e,t)}function Ha(e,t){return Ua(2048,8,e,t)}function Ga(e,t){return Ua(4,2,e,t)}function qa(e,t){return Ua(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $a(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4,4,Ka.bind(null,t,e),n)}function Xa(){}function Ya(e,t){var n=Ra();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Ra();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&ha)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,Lu|=n,e.baseState=!0),t)}function Za(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{xt=n,pa.transition=r}}function es(){return Ra().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))os(t,n);else if(null!==(n=Ai(e,t,n,r))){rc(n,e,r,tc()),is(n,t,r)}}function ns(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))os(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(o.next=o,Ii(t)):(o.next=u.next,u.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ai(e,t,o,r))&&(rc(n,e,r,o=tc()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function os(e,t){xa=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:_i,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useInsertionEffect:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useSyncExternalStore:Ca,useId:Ca,unstable_isNewReconciler:!1},ss={readContext:_i,useCallback:function(e,t){return _a().memoizedState=[e,void 0===t?null:t],e},useContext:_i,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=_a();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_a();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_a().memoizedState=e},useState:Ba,useDebugValue:Xa,useDeferredValue:function(e){return _a().memoizedState=e},useTransition:function(){var e=Ba(!1),t=e[0];return e=Za.bind(null,e[1]),_a().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,o=_a();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Tu)throw Error(i(349));0!==(30&ha)||Oa(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Va(Pa.bind(null,r,a,e),[e]),r.flags|=2048,za(9,Fa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=_a(),t=Tu.identifierPrefix;if(ii){var n=Jo;t=":"+t+"R"+(n=(Qo&~(1<<32-at(Qo)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:_i,useCallback:Ya,useContext:_i,useEffect:Ha,useImperativeHandle:$a,useInsertionEffect:Ga,useLayoutEffect:qa,useMemo:Qa,useReducer:Aa,useRef:ja,useState:function(){return Aa(Ia)},useDebugValue:Xa,useDeferredValue:function(e){return Ja(Ra(),ma.memoizedState,e)},useTransition:function(){return[Aa(Ia)[0],Ra().memoizedState]},useMutableSource:Da,useSyncExternalStore:Na,useId:es,unstable_isNewReconciler:!1},cs={readContext:_i,useCallback:Ya,useContext:_i,useEffect:Ha,useImperativeHandle:$a,useInsertionEffect:Ga,useLayoutEffect:qa,useMemo:Qa,useReducer:Ta,useRef:ja,useState:function(){return Ta(Ia)},useDebugValue:Xa,useDeferredValue:function(e){var t=Ra();return null===ma?t.memoizedState=e:Ja(t,ma.memoizedState,e)},useTransition:function(){return[Ta(Ia)[0],Ra().memoizedState]},useMutableSource:Da,useSyncExternalStore:Na,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,qu=r),ds(0,t)},n}function vs(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Pi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var xs=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ji(t,null,n,r):Qi(t,e.child,n,r)}function Cs(e,t,n,r,o){n=n.render;var i=t.ref;return ki(t,o),r=Ea(e,t,n,r,i,o),n=ka(),null===e||bs?(ii&&n&&ti(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Gs(e,t,o))}function Ss(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Gs(e,t,o)}return t.flags|=1,(e=Fc(i,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Gs(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return Rs(e,t,n,r,o)}function ks(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ro(Fu,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ro(Fu,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ro(Fu,Ou),Ou|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ro(Fu,Ou),Ou|=r;return ws(e,t,o,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rs(e,t,n,r,o){var i=Oo(n)?Do:Ao.current;return i=No(t,i),ki(t,o),n=Ea(e,t,n,r,i,o),r=ka(),null===e||bs?(ii&&r&&ti(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Gs(e,t,o))}function Is(e,t,n,r,o){if(Oo(n)){var i=!0;Lo(t)}else i=!1;if(ki(t,o),null===t.stateNode)Hs(e,t),Hi(t,n,r),qi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=_i(c):c=No(t,c=Oo(n)?Do:Ao.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Gi(t,a,r,c),Di=!1;var d=t.memoizedState;a.state=d,Bi(t,r,a,o),u=t.memoizedState,s!==r||d!==u||To.current||Di?("function"===typeof l&&(Wi(t,n,l,r),u=t.memoizedState),(s=Di||Vi(t,n,s,r,d,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:gi(t.type,s),a.props=c,f=t.pendingProps,d=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=_i(u):u=No(t,u=Oo(n)?Do:Ao.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||d!==u)&&Gi(t,a,r,u),Di=!1,d=t.memoizedState,a.state=d,Bi(t,r,a,o);var h=t.memoizedState;s!==f||d!==h||To.current||Di?("function"===typeof p&&(Wi(t,n,p,r),h=t.memoizedState),(c=Di||Vi(t,n,c,r,d,h,u)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,o)}function As(e,t,n,r,o,i){_s(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Bo(t,n,!1),Gs(e,t,i);r=t.stateNode,xs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qi(t,e.child,null,i),t.child=Qi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,o&&Bo(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Po(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Po(0,t.context,!1),oa(e,t.containerInfo)}function Ds(e,t,n,r,o){return hi(),vi(o),t.flags|=256,ws(e,t,n,r),t.child}var Ns,Os,Fs,Ps,Ms={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,o=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ro(ua,1&a),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=o.children,e=o.fallback,s?(o=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Lc(u,o,0,null),e=Mc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ms,e):zs(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Lc({mode:"visible",children:r.children},o,0,null),(a=Mc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Qi(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ms,a);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=fs(a=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Tu)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Ti(e,o),rc(r,e,o,-1))}return mc(),js(e,t,s,r=fs(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&($o[Xo++]=Qo,$o[Xo++]=Jo,$o[Xo++]=Yo,Qo=e.id,Jo=e.overflow,Yo=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,u,o,r,a,n);if(s){s=o.fallback,u=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&u)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Fc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Fc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,u=null===(u=e.child.memoizedState)?Ls(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,o}return e=(s=e.child).sibling,o=Fc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function zs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&vi(r),Qi(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ws(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Us(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Vs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n,t);else if(19===e.tag)Ws(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ro(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Us(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ca(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Fc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oo(t.type)&&Fo(),Ks(t),null;case 3:return r=t.stateNode,ia(),_o(To),_o(Ao),fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(sc(ai),ai=null))),Os(e,t),Ks(t),null;case 5:sa(t);var o=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Fs(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=ra(ea.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[po]=t,r[ho]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(o=0;o<Pr.length;o++)zr(Pr[o],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":oe(r,a),zr("invalid",r)}for(var u in ye(n,a),o=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[po]=t,e[ho]=r,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(u=xe(n,r),n){case"dialog":zr("cancel",e),zr("close",e),o=r;break;case"iframe":case"object":case"embed":zr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Pr.length;o++)zr(Pr[o],e);o=r;break;case"source":zr("error",e),o=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),o=r;break;case"details":zr("toggle",e),o=r;break;case"input":Y(e,r),o=X(e,r),zr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=L({},r,{value:void 0}),zr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),zr("invalid",e)}for(a in ye(n,o),c=o)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?me(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=l&&"onScroll"===a&&zr("scroll",e):null!=l&&x(e,a,l,u))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Ks(t),null;case 13:if(_o(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),hi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[po]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==ai&&(sc(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Pu&&(Pu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return ia(),Os(e,t),null===e&&Ur(t.stateNode.containerInfo),Ks(t),null;case 10:return Si(t.type._context),Ks(t),null;case 19:if(_o(ua),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)qs(a,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ca(e))){for(t.flags|=128,qs(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ro(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vu&&(t.flags|=128,r=!0,qs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!ii)return Ks(t),null}else 2*Qe()-a.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,qs(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ro(ua,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xs(e,t){switch(ni(t),t.tag){case 1:return Oo(t.type)&&Fo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),_o(To),_o(Ao),fa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(_o(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(ua),null;case 4:return ia(),null;case 10:return Si(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ns=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Fs=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":o=X(e,o),r=X(e,r),a=[];break;case"select":o=L({},o,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if("style"===l){var u=o[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=o?o[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zr("scroll",e),a||u===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){kc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&tu(t,n,i)}o=o.next}while(o!==r)}}function ou(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[ho],delete t[mo],delete t[go],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,du=!1;function pu(e,t,n){for(n=n.child;null!==n;)hu(e,t,n),n=n.sibling}function hu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Qs||eu(n,t);case 6:var r=fu,o=du;fu=null,pu(e,t,n),du=o,null!==(fu=r)&&(du?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(du?(e=fu,n=n.stateNode,8===e.nodeType?uo(e.parentNode,n):1===e.nodeType&&uo(e,n),Ut(e)):uo(fu,n.stateNode));break;case 4:r=fu,o=du,fu=n.stateNode.containerInfo,du=!0,pu(e,t,n),fu=r,du=o;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tu(n,t,a),o=o.next}while(o!==r)}pu(e,t,n);break;case 1:if(!Qs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kc(n,t,s)}pu(e,t,n);break;case 21:pu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pu(e,t,n),Qs=r):pu(e,t,n);break;default:pu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,du=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===fu)throw Error(i(160));hu(a,s,o),fu=null,du=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(l){kc(o,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),ou(3,e)}catch(m){kc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){kc(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var o=e.stateNode;try{de(o,"")}catch(m){kc(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===a.type&&null!=a.name&&Q(o,a),xe(u,s);var l=xe(u,a);for(s=0;s<c.length;s+=2){var f=c[s],d=c[s+1];"style"===f?me(o,d):"dangerouslySetInnerHTML"===f?fe(o,d):"children"===f?de(o,d):x(o,f,d,l)}switch(u){case"input":J(o,a);break;case"textarea":ie(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(o,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[ho]=a}catch(m){kc(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){kc(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(m){kc(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Uu=Qe())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(l=Qs)||f,mu(t,e),Qs=l):mu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(d=Zs=f;null!==Zs;){switch(h=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:ru(4,p,p.return);break;case 1:eu(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){kc(r,n,m)}}break;case 5:eu(p,p.return);break;case 22:if(null!==p.memoizedState){Cu(d);continue}}null!==h?(h.return=p,Zs=h):Cu(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{o=d.stateNode,l?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){kc(e,e.return,m)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){kc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(de(o,""),r.flags&=-33),lu(e,uu(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cu(e,uu(e),a);break;default:throw Error(i(161))}}catch(s){kc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xu(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var o=Zs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Ys;if(!a){var s=o.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Ys;var c=Qs;if(Ys=a,(Qs=u)&&!c)for(Zs=o;null!==Zs;)u=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Su(o):null!==u?(u.return=a,Zs=u):Su(o);for(;null!==i;)Zs=i,bu(i,t,n),i=i.sibling;Zs=o,Ys=s,Qs=c}wu(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Zs=i):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||ou(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:gi(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(i(163))}Qs||512&t.flags&&iu(t)}catch(p){kc(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function Cu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Su(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ou(4,t)}catch(u){kc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(u){kc(t,o,u)}}var i=t.return;try{iu(t)}catch(u){kc(t,i,u)}break;case 5:var a=t.return;try{iu(t)}catch(u){kc(t,a,u)}}}catch(u){kc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Eu,ku=Math.ceil,_u=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Iu=b.ReactCurrentBatchConfig,Au=0,Tu=null,Du=null,Nu=0,Ou=0,Fu=ko(0),Pu=0,Mu=null,Lu=0,Bu=0,zu=0,ju=null,Wu=null,Uu=0,Vu=1/0,Hu=null,Gu=!1,qu=null,Ku=null,$u=!1,Xu=null,Yu=0,Qu=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Au)?Qe():-1!==Zu?Zu:Zu=Qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Au)&&0!==Nu?Nu&-Nu:null!==mi.transition?(0===ec&&(ec=vt()),ec):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Qu)throw Qu=0,Ju=null,Error(i(185));gt(e,n,r),0!==(2&Au)&&e===Tu||(e===Tu&&(0===(2&Au)&&(Bu|=n),4===Pu&&uc(e,Nu)),oc(e,r),1===n&&0===Au&&0===(1&t.mode)&&(Vu=Qe()+500,jo&&Vo()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,u=o[a];-1===u?0!==(s&n)&&0===(s&r)||(o[a]=pt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=dt(e,e===Tu?Nu:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){jo=!0,Uo(e)}(cc.bind(null,e)):Uo(cc.bind(null,e)),ao((function(){0===(6&Au)&&Vo()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zu=-1,ec=0,0!==(6&Au))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Tu?Nu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=Au;Au|=2;var a=vc();for(Tu===e&&Nu===t||(Hu=null,Vu=Qe()+500,pc(e,t));;)try{xc();break}catch(u){hc(e,u)}Ci(),_u.current=a,Au=o,null!==Du?t=0:(Tu=null,Nu=0,t=Pu)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=ac(e,o))),1===t)throw n=Mu,pc(e,0),uc(e,r),oc(e,Qe()),n;if(6===t)uc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(a=ht(e))&&(r=a,t=ac(e,a))),1===t))throw n=Mu,pc(e,0),uc(e,r),oc(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cc(e,Wu,Hu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Uu+500-Qe())){if(0!==dt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Cc.bind(null,e,Wu,Hu),t);break}Cc(e,Wu,Hu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ro(Cc.bind(null,e,Wu,Hu),r);break}Cc(e,Wu,Hu);break;default:throw Error(i(329))}}}return oc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Wu,Wu=n,null!==t&&sc(t)),e}function sc(e){null===Wu?Wu=e:Wu.push.apply(Wu,e)}function uc(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Au))throw Error(i(327));Sc();var t=dt(e,0);if(0===(1&t))return oc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Mu,pc(e,0),uc(e,t),oc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cc(e,Wu,Hu),oc(e,Qe()),null}function lc(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&(Vu=Qe()+500,jo&&Vo())}}function fc(e){null!==Xu&&0===Xu.tag&&0===(6&Au)&&Sc();var t=Au;Au|=1;var n=Iu.transition,r=xt;try{if(Iu.transition=null,xt=1,e)return e()}finally{xt=r,Iu.transition=n,0===(6&(Au=t))&&Vo()}}function dc(){Ou=Fu.current,_o(Fu)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fo();break;case 3:ia(),_o(To),_o(Ao),fa();break;case 5:sa(r);break;case 4:ia();break;case 13:case 19:_o(ua);break;case 10:Si(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tu=e,Du=e=Fc(e.current,null),Nu=Ou=t,Pu=0,Mu=null,zu=Bu=Lu=0,Wu=ju=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(r=(n=Ri[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ri=null}return e}function hc(e,t){for(;;){var n=Du;try{if(Ci(),da.current=as,ya){for(var r=va.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ya=!1}if(ha=0,ga=ma=va=null,xa=!1,ba=0,Ru.current=null,null===n||null===n.return){Pu=1,Mu=t,Du=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=Nu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=gs(s);if(null!==h){h.flags&=-257,ys(h,s,u,0,t),1&h.mode&&ms(a,l,t),c=l;var v=(t=h).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(a,l,t),mc();break e}c=Error(i(426))}else if(ii&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),vi(ls(c,u));break e}}a=c=ls(c,u),4!==Pu&&(Pu=2),null===ju?ju=[a]:ju.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Li(a,hs(0,c,t));break e;case 1:u=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ku||!Ku.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Li(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(b){t=b,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function vc(){var e=_u.current;return _u.current=as,null===e?as:e}function mc(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Tu||0===(268435455&Lu)&&0===(268435455&Bu)||uc(Tu,Nu)}function gc(e,t){var n=Au;Au|=2;var r=vc();for(Tu===e&&Nu===t||(Hu=null,pc(e,t));;)try{yc();break}catch(o){hc(e,o)}if(Ci(),Au=n,_u.current=r,null!==Du)throw Error(i(261));return Tu=null,Nu=0,Pu}function yc(){for(;null!==Du;)bc(Du)}function xc(){for(;null!==Du&&!Xe();)bc(Du)}function bc(e){var t=Eu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wc(e):Du=t,Ru.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$s(n,t,Ou)))return void(Du=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return Pu=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Pu&&(Pu=5)}function Cc(e,t,n){var r=xt,o=Iu.transition;try{Iu.transition=null,xt=1,function(e,t,n,r){do{Sc()}while(null!==Xu);if(0!==(6&Au))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Tu&&(Du=Tu=null,Nu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$u||($u=!0,Tc(tt,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Iu.transition,Iu.transition=null;var s=xt;xt=1;var u=Au;Au|=4,Ru.current=null,function(e,t){if(eo=Ht,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||0!==o&&3!==d.nodeType||(u=s+o),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++l===o&&(u=s),p===a&&++f===r&&(c=s),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:gi(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),gu(n,e),hr(to),Ht=!!eo,to=eo=null,e.current=n,xu(n,e,o),Ye(),Au=u,xt=s,Iu.transition=a}else e.current=n;if($u&&($u=!1,Xu=e,Yu=o),a=e.pendingLanes,0===a&&(Ku=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Gu)throw Gu=!1,e=qu,qu=null,e;0!==(1&Yu)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Ju?Qu++:(Qu=0,Ju=e):Qu=0,Vo()}(e,t,n,r)}finally{Iu.transition=o,xt=r}return null}function Sc(){if(null!==Xu){var e=bt(Yu),t=Iu.transition,n=xt;try{if(Iu.transition=null,xt=16>e?16:e,null===Xu)var r=!1;else{if(e=Xu,Xu=null,Yu=0,0!==(6&Au))throw Error(i(331));var o=Au;for(Au|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var u=a.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,a)}var d=f.child;if(null!==d)d.return=f,Zs=d;else for(;null!==Zs;){var p=(f=Zs).sibling,h=f.return;if(au(f),f===l){Zs=null;break}if(null!==p){p.return=h,Zs=p;break}Zs=h}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var x=e.current;for(Zs=x;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=x;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:ou(9,u)}}catch(C){kc(u,u.return,C)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Au=o,Vo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(C){}r=!0}return r}finally{xt=n,Iu.transition=t}}return!1}function Ec(e,t,n){e=Pi(e,t=hs(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),oc(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Pi(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),oc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Tu===e&&(Nu&n)===n&&(4===Pu||3===Pu&&(130023424&Nu)===Nu&&500>Qe()-Uu?pc(e,0):zu|=n),oc(e,t)}function Rc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ti(e,t))&&(gt(e,t,n),oc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Rc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Rc(e,n)}function Tc(e,t){return Ke(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Mc(n.children,o,a,t);case E:s=8,o|=8;break;case k:return(e=Nc(12,n,t,2|o)).elementType=k,e.lanes=a,e;case A:return(e=Nc(13,n,t,o)).elementType=A,e.lanes=a,e;case T:return(e=Nc(19,n,t,o)).elementType=T,e.lanes=a,e;case O:return Lc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case R:s=9;break e;case I:s=11;break e;case D:s=14;break e;case N:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,o,i,a,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Nc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ni(i),e}function Uc(e){if(!e)return Io;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oo(n))return Mo(e,n,t)}return t}function Vc(e,t,n,r,o,i,a,s,u){return(e=Wc(n,r,!0,e,0,i,0,s,u)).context=Uc(null),n=e.current,(i=Fi(r=tc(),o=nc(n))).callback=void 0!==t&&null!==t?t:null,Pi(n,i,o),e.current.lanes=o,gt(e,o,r),oc(e,r),e}function Hc(e,t,n,r){var o=t.current,i=tc(),a=nc(o);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pi(o,t,a))&&(rc(e,o,a,i),Mi(e,o,a)),a}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),hi();break;case 5:aa(t);break;case 1:Oo(t.type)&&Lo(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ro(yi,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ro(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ro(ua,1&ua.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ro(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ro(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var o=No(t,Ao.current);ki(t,n),o=Ea(null,t,r,e,o,n);var a=ka();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(a=!0,Lo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ni(t),o.updater=Ui,t.stateNode=o,o._reactInternals=t,qi(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=gi(r,e),o){case 0:t=Rs(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=Cs(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,gi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Rs(e,t,r,o=t.elementType===r?o:gi(r,o),n);case 1:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:gi(r,o),n);case 3:e:{if(Ts(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Oi(e,t),Bi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ds(e,t,r,n,o=ls(Error(i(423)),t));break e}if(r!==o){t=Ds(e,t,r,n,o=ls(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=Ji(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===o){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&li(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),_s(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&li(t),null;case 13:return Bs(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:gi(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Ro(yi,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!To.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ei(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ei(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ki(t,n),r=r(o=_i(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=gi(r=t.type,t.pendingProps),Ss(e,t,r,o=gi(r.type,o),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:gi(r,o),Hs(e,t),t.tag=1,Oo(r)?(e=!0,Lo(t)):e=!1,ki(t,n),Hi(t,r,o),qi(t,r,o,n),As(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return ks(e,t,n)}throw Error(i(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Gc(a);s.call(e)}}Hc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Gc(a);i.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[vo]=a.current,Ur(8===e.nodeType?e.parentNode:e),fc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Gc(u);s.call(e)}}var u=Wc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[vo]=u.current,Ur(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,u,n,r)})),u}(n,t,e,o,r);return Gc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[vo]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),oc(t,Qe()),0===(6&Au)&&(Vu=Qe()+500,Vo()))}break;case 13:fc((function(){var t=Ti(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},Ct=function(e){if(13===e.tag){var t=Ti(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Ti(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Et=function(){return xt},kt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Ce=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Co(r);if(!o)throw Error(i(90));K(r),J(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[bo,wo,Co,_e,Re,lc]},nl={findFiberByHostInstance:xo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{ot=ol.inject(rl),it=ol}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(i(299));var n=!1,r="",o=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,r,o),e[vo]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,o,0,a,s),e[vo]=t.current,Ur(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vo]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,o=60107,i=60108,a=60114,s=60109,u=60110,c=60112,l=60113,f=60120,d=60115,p=60116,h=60121,v=60122,m=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var x=Symbol.for;n=x("react.element"),r=x("react.portal"),o=x("react.fragment"),i=x("react.strict_mode"),a=x("react.profiler"),s=x("react.provider"),u=x("react.context"),c=x("react.forward_ref"),l=x("react.suspense"),f=x("react.suspense_list"),d=x("react.memo"),p=x("react.lazy"),h=x("react.block"),v=x("react.server.block"),m=x("react.fundamental"),g=x("react.debug_trace_mode"),y=x("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case l:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case p:case d:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===a||e===g||e===i||e===l||e===f||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===d||e.$$typeof===s||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===h||e[0]===v)},t.typeOf=b},7441:function(e,t,n){"use strict";e.exports=n(1372)},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),o=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),o=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||o||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,o=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/o;o=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&o<n.minScreenshotHeight&&(r=(o=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||o,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,s=this.canvas;return a&&s&&(s.width=(null===e||void 0===e?void 0:e.width)||s.width,s.height=(null===e||void 0===e?void 0:e.height)||s.height,n.mirrored&&(a.translate(s.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=n.imageSmoothing,a.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(a.scale(-1,1),a.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,o){var i={video:"undefined"===typeof o||o};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var a=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||a!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var o=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,a=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(a=u),r(o(t),o(a))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,o=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,c=void 0===u?{}:u,l=n.children,f=a(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),d=s?i(i({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!o,playsInline:!0,ref:function(t){e.video=t},style:d},f)),l&&l(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(2791))},6374:function(e,t,n){"use strict";var r=n(2791),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=x.prototype=new y;b.constructor=x,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,o)&&!E.hasOwnProperty(o)&&(i[o]=t[o]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===i[o]&&(i[o]=u[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:S.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===i?"."+I(u,0):i,w(a)?(o="",null!=e&&(o=e.replace(R,"$&/")+"/"),A(a,t,o,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(R,"$&/")+"/")+e)),t.push(a)),1;if(u=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+I(s=e[c],c);u+=A(s,t,o,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,o,l=i+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function T(e,t,n){if(null==e)return e;var r=[],o=0;return A(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},O={transition:null},F={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=o,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=v({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)C.call(t,c)&&!E.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<o&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<o&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,d=null,p=3,h=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)o(l);else{if(!(t.startTime<=e))break;o(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(C);else{var t=r(l);null!==t&&F(w,t.startTime-e)}}function C(e,n){v=!1,m&&(m=!1,y(_),_=-1),h=!0;var i=p;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&o(c),b(n)}else o(c);d=r(c)}if(null!==d)var u=!0;else{var f=r(l);null!==f&&F(w,f.startTime-n),u=!1}return u}finally{d=null,p=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,_=-1,R=5,I=-1;function A(){return!(t.unstable_now()-I<R)}function T(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"===typeof x)S=function(){x(T)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,N=D.port2;D.port1.onmessage=T,S=function(){N.postMessage(null)}}else S=function(){g(T,0)};function O(e){k=e,E||(E=!0,S())}function F(e,n){_=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,O(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(m?(y(_),_=-1):m=!0,F(w,i-a))):(e.sortIndex=s,n(c,e),v||h||(v=!0,O(C))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(!s(c))return!1;var l=e[c],f=t[c];if(!1===(o=n?n.call(r,l,f,c):void 0)||void 0===o&&l!==f)return!1}return!0}},4902:function(){},522:function(){},753:function(){}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(i,a),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".28cb0dcd.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="my-app:";n.l=function(r,o,i,a){if(e[r])e[r].push(o);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var o,i,a=r[0],s=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(u)u(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkmy_app=self.webpackChunkmy_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250),o=n(7441),i=n(9613),a=n.n(i);var s=function(e){function t(e,r,u,c,d){for(var p,h,v,m,b,C=0,S=0,E=0,k=0,_=0,N=0,F=v=p=0,M=0,L=0,B=0,z=0,j=u.length,W=j-1,U="",V="",H="",G="";M<j;){if(h=u.charCodeAt(M),M===W&&0!==S+k+E+C&&(0!==S&&(h=47===S?10:47),k=E=C=0,j++,W++),0===S+k+E+C){if(M===W&&(0<L&&(U=U.replace(f,"")),0<U.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:U+=u.charAt(M)}h=59}switch(h){case 123:for(p=(U=U.trim()).charCodeAt(0),v=1,z=++M;M<j;){switch(h=u.charCodeAt(M)){case 123:v++;break;case 125:v--;break;case 47:switch(h=u.charCodeAt(M+1)){case 42:case 47:e:{for(F=M+1;F<W;++F)switch(u.charCodeAt(F)){case 47:if(42===h&&42===u.charCodeAt(F-1)&&M+2!==F){M=F+1;break e}break;case 10:if(47===h){M=F+1;break e}}M=F}}break;case 91:h++;case 40:h++;case 34:case 39:for(;M++<W&&u.charCodeAt(M)!==h;);}if(0===v)break;M++}if(v=u.substring(z,M),0===p&&(p=(U=U.replace(l,"").trim()).charCodeAt(0)),64===p){switch(0<L&&(U=U.replace(f,"")),h=U.charCodeAt(1)){case 100:case 109:case 115:case 45:L=r;break;default:L=D}if(z=(v=t(r,L,v,h,d+1)).length,0<O&&(b=s(3,v,L=n(D,U,B),r,I,R,z,h,d,c),U=L.join(""),void 0!==b&&0===(z=(v=b.trim()).length)&&(h=0,v="")),0<z)switch(h){case 115:U=U.replace(w,a);case 100:case 109:case 45:v=U+"{"+v+"}";break;case 107:v=(U=U.replace(g,"$1 $2"))+"{"+v+"}",v=1===T||2===T&&i("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=U+v,112===c&&(V+=v,v="")}else v=""}else v=t(r,n(r,U,B),v,c,d+1);H+=v,v=B=L=F=p=0,U="",h=u.charCodeAt(++M);break;case 125:case 59:if(1<(z=(U=(0<L?U.replace(f,""):U).trim()).length))switch(0===F&&(p=U.charCodeAt(0),45===p||96<p&&123>p)&&(z=(U=U.replace(" ",":")).length),0<O&&void 0!==(b=s(1,U,r,e,I,R,V.length,c,d,c))&&0===(z=(U=b.trim()).length)&&(U="\0\0"),p=U.charCodeAt(0),h=U.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){G+=U+u.charAt(M);break}default:58!==U.charCodeAt(z-1)&&(V+=o(U,p,h,U.charCodeAt(2)))}B=L=F=p=0,U="",h=u.charCodeAt(++M)}}switch(h){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<U.length&&(L=1,U+="\0"),0<O*P&&s(0,U,r,e,I,R,V.length,c,d,c),R=1,I++;break;case 59:case 125:if(0===S+k+E+C){R++;break}default:switch(R++,m=u.charAt(M),h){case 9:case 32:if(0===k+C+S)switch(_){case 44:case 58:case 9:case 32:m="";break;default:32!==h&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===k+S+C&&(L=B=1,m="\f"+m);break;case 108:if(0===k+S+C+A&&0<F)switch(M-F){case 2:112===_&&58===u.charCodeAt(M-3)&&(A=_);case 8:111===N&&(A=N)}break;case 58:0===k+S+C&&(F=M);break;case 44:0===S+E+k+C&&(L=1,m+="\r");break;case 34:case 39:0===S&&(k=k===h?0:0===k?h:k);break;case 91:0===k+S+E&&C++;break;case 93:0===k+S+E&&C--;break;case 41:0===k+S+C&&E--;break;case 40:if(0===k+S+C){if(0===p)if(2*_+3*N===533);else p=1;E++}break;case 64:0===S+E+k+C+F+v&&(v=1);break;case 42:case 47:if(!(0<k+C+E))switch(S){case 0:switch(2*h+3*u.charCodeAt(M+1)){case 235:S=47;break;case 220:z=M,S=42}break;case 42:47===h&&42===_&&z+2!==M&&(33===u.charCodeAt(z+2)&&(V+=u.substring(z,M+1)),m="",S=0)}}0===S&&(U+=m)}N=_,_=h,M++}if(0<(z=V.length)){if(L=r,0<O&&(void 0!==(b=s(2,V,L,e,I,R,z,c,d,c))&&0===(V=b).length))return G+V+H;if(V=L.join(",")+"{"+V+"}",0!==T*A){switch(2!==T||i(V,2)||(A=0),A){case 111:V=V.replace(x,":-moz-$1")+V;break;case 112:V=V.replace(y,"::-webkit-input-$1")+V.replace(y,"::-moz-$1")+V.replace(y,":-ms-input-$1")+V}A=0}}return G+V+H}function n(e,t,n){var o=t.trim().split(v);t=o;var i=o.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<i;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<i;++s)for(var c=0;c<a;++c)t[u++]=r(e[c]+" ",o[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function o(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var u=a.substring(e,a.length-1).trim();return u=a.substring(0,e).trim()+u+";",1===T||2===T&&i(u,1)?"-webkit-"+u+u:u}if(0===T||2===T&&!i(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(_,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(u=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+u+a;case 1005:return p.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(u=a.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=a.replace(b,"tb");break;case 232:u=a.replace(b,"tb-rl");break;case 220:u=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+u+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(u=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:a=a.replace(u,"-webkit-"+u)+";"+a;break;case 207:case 102:a=a.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(u,"-webkit-"+u)+";"+a.replace(u,"-ms-"+u+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return u=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+u+"-ms-flex-"+u+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===k.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?o(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(u,"-webkit-"+u)+a.replace(u,"-moz-"+u.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+a}return a}function i(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),F(2!==t?r:r.replace(E,"$1"),n,t)}function a(e,t){var n=o(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(C," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,o,i,a,s,u,l){for(var f,d=0,p=t;d<O;++d)switch(f=N[d].call(c,e,p,n,r,o,i,a,s,u,l)){case void 0:case!1:case!0:case null:break;default:p=f}if(p!==t)return p}function u(e){return void 0!==(e=e.prefix)&&(F=null,e?"function"!==typeof e?T=1:(T=2,F=e):T=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<O){var o=s(-1,n,r,r,I,R,0,0,0,0);void 0!==o&&"string"===typeof o&&(n=o)}var i=t(D,r,n,0,0);return 0<O&&(void 0!==(o=s(-2,i,r,r,I,R,i.length,0,0,0))&&(i=o)),"",A=0,R=I=1,i}var l=/^\0+/g,f=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,x=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,C=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,_=/([^-])(image-set\()/,R=1,I=1,A=0,T=1,D=[],N=[],O=0,F=null,P=0;return c.use=function e(t){switch(t){case void 0:case null:O=N.length=0;break;default:if("function"===typeof t)N[O++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else P=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},u={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var c=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},l=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,f=c((function(e){return l.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),d=n(2110),p=n.n(d);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e,t){for(var n=[e[0]],r=0,o=t.length;r<o;r+=1)n.push(t[r],e[r+1]);return n},m=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,o.typeOf)(e)},g=Object.freeze([]),y=Object.freeze({});function x(e){return"function"==typeof e}function b(e){return e.displayName||e.name||"Component"}function w(e){return e&&"string"==typeof e.styledComponentId}var C="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",S="undefined"!=typeof window&&"HTMLElement"in window,E=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var _=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,o=r;e>=o;)(o<<=1)<0&&k(16,""+e);this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var i=r;i<o;i++)this.groupSizes[i]=0}for(var a=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var o=n;o<r;o++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),o=r+n,i=r;i<o;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),R=new Map,I=new Map,A=1,T=function(e){if(R.has(e))return R.get(e);for(;I.has(A);)A++;var t=A++;return R.set(e,t),I.set(t,e),t},D=function(e){return I.get(e)},N=function(e,t){t>=A&&(A=t+1),R.set(e,t),I.set(t,e)},O="style["+C+'][data-styled-version="5.3.9"]',F=new RegExp("^"+C+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),P=function(e,t,n){for(var r,o=n.split(","),i=0,a=o.length;i<a;i++)(r=o[i])&&e.registerName(t,r)},M=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],o=0,i=n.length;o<i;o++){var a=n[o].trim();if(a){var s=a.match(F);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(N(c,u),P(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(a)}}},L=function(){return n.nc},B=function(e){var t=document.head,n=e||t,r=document.createElement("style"),o=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(C))return r}}(n),i=void 0!==o?o.nextSibling:null;r.setAttribute(C,"active"),r.setAttribute("data-styled-version","5.3.9");var a=L();return a&&r.setAttribute("nonce",a),n.insertBefore(r,i),r},z=function(){function e(e){var t=this.element=B(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var o=t[n];if(o.ownerNode===e)return o}k(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),j=function(){function e(e){var t=this.element=B(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),W=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),U=S,V={isServer:!S,useCSSOMInjection:!E},H=function(){function e(e,t,n){void 0===e&&(e=y),void 0===t&&(t={}),this.options=h({},V,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&S&&U&&(U=!1,function(e){for(var t=document.querySelectorAll(O),n=0,r=t.length;n<r;n++){var o=t[n];o&&"active"!==o.getAttribute(C)&&(M(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}e.registerId=function(e){return T(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(h({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,o=t.target,e=n?new W(o):r?new z(o):new j(o),new _(e)));var e,t,n,r,o},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(T(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(T(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(T(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",o=0;o<n;o++){var i=D(o);if(void 0!==i){var a=e.names.get(i),s=t.getGroup(o);if(a&&s&&a.size){var u=C+".g"+o+'[id="'+i+'"]',c="";void 0!==a&&a.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),G=/(a)(d)/gi,q=function(e){return String.fromCharCode(e+(e>25?39:97))};function K(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=q(t%52)+n;return(q(t%52)+n).replace(G,"$1-$2")}var $=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},X=function(e){return $(5381,e)};function Y(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(x(n)&&!w(n))return!1}return!0}var Q=X("5.3.9"),J=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Y(e),this.componentId=t,this.baseHash=$(Q,t),this.baseStyle=n,H.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))o.push(this.staticRulesId);else{var i=me(this.rules,e,t,n).join(""),a=K($(this.baseHash,i)>>>0);if(!t.hasNameForId(r,a)){var s=n(i,"."+a,void 0,r);t.insertRules(r,a,s)}o.push(a),this.staticRulesId=a}else{for(var u=this.rules.length,c=$(this.baseHash,n.hash),l="",f=0;f<u;f++){var d=this.rules[f];if("string"==typeof d)l+=d;else if(d){var p=me(d,e,t,n),h=Array.isArray(p)?p.join(""):p;c=$(c,h+f),l+=h}}if(l){var v=K(c>>>0);if(!t.hasNameForId(r,v)){var m=n(l,"."+v,void 0,r);t.insertRules(r,v,m)}o.push(v)}}return o.join(" ")},e}(),Z=/^\s*\/\/.*$/gm,ee=[":","[",".","#"];function te(e){var t,n,r,o,i=void 0===e?y:e,a=i.options,u=void 0===a?y:a,c=i.plugins,l=void 0===c?g:c,f=new s(u),d=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,o,i,a,s,u,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(o[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),h=function(e,r,i){return 0===r&&-1!==ee.indexOf(i[n.length])||i.match(o)?e:"."+t};function v(e,i,a,s){void 0===s&&(s="&");var u=e.replace(Z,""),c=i&&a?a+" "+i+" { "+u+" }":u;return t=s,n=i,r=new RegExp("\\"+n+"\\b","g"),o=new RegExp("(\\"+n+"\\b){2,}"),f(a||!i?"":i,c)}return f.use([].concat(l,[function(e,t,o){2===e&&o.length&&o[0].lastIndexOf(n)>0&&(o[0]=o[0].replace(r,h))},p,function(e){if(-2===e){var t=d;return d=[],t}}])),v.hash=l.length?l.reduce((function(e,t){return t.name||k(15),$(e,t.name)}),5381).toString():"",v}var ne=e.createContext(),re=(ne.Consumer,e.createContext()),oe=(re.Consumer,new H),ie=te();function ae(){return(0,e.useContext)(ne)||oe}function se(){return(0,e.useContext)(re)||ie}function ue(t){var n=(0,e.useState)(t.stylisPlugins),r=n[0],o=n[1],i=ae(),s=(0,e.useMemo)((function(){var e=i;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),u=(0,e.useMemo)((function(){return te({options:{prefix:!t.disableVendorPrefixes},plugins:r})}),[t.disableVendorPrefixes,r]);return(0,e.useEffect)((function(){a()(r,t.stylisPlugins)||o(t.stylisPlugins)}),[t.stylisPlugins]),e.createElement(ne.Provider,{value:s},e.createElement(re.Provider,{value:u},t.children))}var ce=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ie);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return k(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ie),this.name+e.hash},e}(),le=/([A-Z])/,fe=/([A-Z])/g,de=/^ms-/,pe=function(e){return"-"+e.toLowerCase()};function he(e){return le.test(e)?e.replace(fe,pe).replace(de,"-ms-"):e}var ve=function(e){return null==e||!1===e||""===e};function me(e,t,n,r){if(Array.isArray(e)){for(var o,i=[],a=0,s=e.length;a<s;a+=1)""!==(o=me(e[a],t,n,r))&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));return i}return ve(e)?"":w(e)?"."+e.styledComponentId:x(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:me(e(t),t,n,r):e instanceof ce?n?(e.inject(n,r),e.getName(r)):e:m(e)?function e(t,n){var r,o,i=[];for(var a in t)t.hasOwnProperty(a)&&!ve(t[a])&&(Array.isArray(t[a])&&t[a].isCss||x(t[a])?i.push(he(a)+":",t[a],";"):m(t[a])?i.push.apply(i,e(t[a],a)):i.push(he(a)+": "+(r=a,(null==(o=t[a])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||r in u?String(o).trim():o+"px")+";")));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString();var c}var ge=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x(e)||m(e)?ge(me(v(g,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:ge(me(v(e,n)))}new Set;var xe=function(e,t,n){return void 0===n&&(n=y),e.theme!==n.theme&&e.theme||t||n.theme},be=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,we=/(^-|-$)/g;function Ce(e){return e.replace(be,"-").replace(we,"")}var Se=function(e){return K(X(e)>>>0)};function Ee(e){return"string"==typeof e&&!0}var ke=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},_e=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Re(e,t,n){var r=e[n];ke(t)&&ke(r)?Ie(r,t):e[n]=t}function Ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0,i=n;o<i.length;o++){var a=i[o];if(ke(a))for(var s in a)_e(s)&&Re(e,a[s],s)}return e}var Ae=e.createContext();Ae.Consumer;function Te(t){var n=(0,e.useContext)(Ae),r=(0,e.useMemo)((function(){return function(e,t){return e?x(e)?e(t):Array.isArray(e)||"object"!=typeof e?k(8):t?h({},t,{},e):e:k(14)}(t.theme,n)}),[t.theme,n]);return t.children?e.createElement(Ae.Provider,{value:r},t.children):null}var De={};function Ne(t,n,r){var o=w(t),i=!Ee(t),a=n.attrs,s=void 0===a?g:a,u=n.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ce(e);De[n]=(De[n]||0)+1;var r=n+"-"+Se("5.3.9"+n+De[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):u,l=n.displayName,d=void 0===l?function(e){return Ee(e)?"styled."+e:"Styled("+b(e)+")"}(t):l,v=n.displayName&&n.componentId?Ce(n.displayName)+"-"+n.componentId:n.componentId||c,m=o&&t.attrs?Array.prototype.concat(t.attrs,s).filter(Boolean):s,C=n.shouldForwardProp;o&&t.shouldForwardProp&&(C=n.shouldForwardProp?function(e,r,o){return t.shouldForwardProp(e,r,o)&&n.shouldForwardProp(e,r,o)}:t.shouldForwardProp);var S,E=new J(r,v,o?t.componentStyle:void 0),k=E.isStatic&&0===s.length,_=function(t,n){return function(t,n,r,o){var i=t.attrs,a=t.componentStyle,s=t.defaultProps,u=t.foldedComponentIds,c=t.shouldForwardProp,l=t.styledComponentId,d=t.target,p=function(e,t,n){void 0===e&&(e=y);var r=h({},t,{theme:e}),o={};return n.forEach((function(e){var t,n,i,a=e;for(t in x(a)&&(a=a(r)),a)r[t]=o[t]="className"===t?(n=o[t],i=a[t],n&&i?n+" "+i:n||i):a[t]})),[r,o]}(xe(n,(0,e.useContext)(Ae),s)||y,n,i),v=p[0],m=p[1],g=function(e,t,n,r){var o=ae(),i=se();return t?e.generateAndInjectStyles(y,o,i):e.generateAndInjectStyles(n,o,i)}(a,o,v),b=r,w=m.$as||n.$as||m.as||n.as||d,C=Ee(w),S=m!==n?h({},n,{},m):n,E={};for(var k in S)"$"!==k[0]&&"as"!==k&&("forwardedAs"===k?E.as=S[k]:(c?c(k,f,w):!C||f(k))&&(E[k]=S[k]));return n.style&&m.style!==n.style&&(E.style=h({},n.style,{},m.style)),E.className=Array.prototype.concat(u,l,g!==l?g:null,n.className,m.className).filter(Boolean).join(" "),E.ref=b,(0,e.createElement)(w,E)}(S,t,n,k)};return _.displayName=d,(S=e.forwardRef(_)).attrs=m,S.componentStyle=E,S.displayName=d,S.shouldForwardProp=C,S.foldedComponentIds=o?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):g,S.styledComponentId=v,S.target=o?t.target:t,S.withComponent=function(e){var t=n.componentId,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,["componentId"]),i=t&&t+"-"+(Ee(e)?e:Ce(b(e)));return Ne(e,h({},o,{attrs:m,componentId:i}),r)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=o?Ie({},t.defaultProps,e):e}}),Object.defineProperty(S,"toString",{value:function(){return"."+S.styledComponentId}}),i&&p()(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var Oe=function(e){return function e(t,n,r){if(void 0===r&&(r=y),!(0,o.isValidElementType)(n))return k(1,String(n));var i=function(){return t(n,r,ye.apply(void 0,arguments))};return i.withConfig=function(o){return e(t,n,h({},r,{},o))},i.attrs=function(o){return e(t,n,h({},r,{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},i}(Ne,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Oe[e]=Oe(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Y(e),H.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var o=r(me(this.rules,t,n,r).join(""),""),i=this.componentId+e;n.insertRules(i,i,o)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&H.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=L();return"<style "+[n&&'nonce="'+n+'"',C+'="true"','data-styled-version="5.3.9"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?k(2):t._emitSheetCSS()},this.getStyleElement=function(){var n;if(t.sealed)return k(2);var r=((n={})[C]="",n["data-styled-version"]="5.3.9",n.dangerouslySetInnerHTML={__html:t.instance.toString()},n),o=L();return o&&(r.nonce=o),[e.createElement("style",h({},r,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new H({isServer:!0}),this.sealed=!1}var n=t.prototype;n.collectStyles=function(t){return this.sealed?k(2):e.createElement(ue,{sheet:this.instance},t)},n.interleaveWithNodeStream=function(e){return k(3)}}();var Fe,Pe=Oe,Me=function(e){return e.ABSOLUTE_BLACK="#030518",e.PRIMARY_PURE="#004687",e.PRIMARY_HIGHLIGHT="#025CB7",e.PRIMARY_MEDIUM="#4F8FE9",e.PRIMARY_LIGHT="#5DAEFF",e.PRIMARY_LIGHTEST="#D0DFF0",e.LOW_PURE="#333333",e.LOW_DARK="#202020",e.LOW_DARKEST="#000000",e.LOW_MEDIUM="#515151",e.LOW_LIGHT="#767676",e.HIGH_PURE="#F8F9FA",e.HIGH_LIGHT="#F2F2F2",e.HIGH_LIGHTEST="#FFFFFF",e.HIGH_MEDIUM="#E5E5E5",e.HIGH_DARK="#A6A6A6",e.TOAST_NEUTRAL="#5DAEFF",e.TOAST_SUCCESS="#048243",e.TOAST_WARNING="#C21618",e.ERROR_WARNING="#FFE5E5",e.HOMECOMING_GRADIENT="linear-gradient(102deg, #4F8FE9 0%, #396BC9 45%, #5E50AE 100%)",e.CONFIRMATION_GRADIENT="linear-gradient(180deg, #5DAEFF 0%, #2F72CF 100%)",e.CANCELATION_GRADIENT="linear-gradient(180deg, #E54529 0%, #C21618 100%)",e.HIGH_GRADIENT="linear-gradient(1deg, #D0DFF0 0%, #F8F9FA 100%)",e.LOW_GRADIENT="linear-gradient(180deg, #232323 0%, #0F3451 100%)",e}({}),Le=function(e){return e.DARK_MODAL_SHADOW="0px 0px 5px #000000",e.DARK_BOOK_SHADOW="0px 5px 6px #333333CC",e.DARK_MENU_SHADOW="0px 3px 6px #2F72CF",e.DARK_GUIDE_SHADOW="0px 3px 6px #2F72CF",e.LIGHT_MODAL_SHADOW="0px 0px 6px #3333334D",e.LIGHT_BOOK_SHADOW="0px 5px 6px #33333333",e.LIGHT_BOX_SHADOW="0px 0px 5px #00000080",e}({}),Be=function(e){return e.LG="30px",e.MD="30px 20px",e.SM="20px",e.XS="10px",e}({}),ze={title:"light",colors:{background:"#0a0c21",textPrimary:"#bdbdbd",hoverColor:"#F231A5",textSecondary:Me.HIGH_PURE,header:Me.PRIMARY_LIGHTEST,textHeader:Me.PRIMARY_HIGHLIGHT,iconHeader:"#2F72CF",navbar:Me.PRIMARY_PURE,navbarHoverItem:Me.PRIMARY_HIGHLIGHT,dropdownBackground:Me.HIGH_MEDIUM,dropdownHover:Me.PRIMARY_LIGHTEST,solidButton:"#004992",outlineActiveButton:"#004992",outlineInactiveButton:Me.LOW_LIGHT,backgroundInput:Me.HIGH_LIGHT,backgroundInputError:Me.ERROR_WARNING,textErrorInput:Me.TOAST_WARNING,placeholderInput:Me.HIGH_DARK,navbarShadow:"none",backgroundButton:"#004992",backgroundBox:Me.PRIMARY_HIGHLIGHT,backgroundHeaderModal:Me.PRIMARY_LIGHT,boxShadow:"#c0bfbf",boxGroup:"#E5E5E5",boxGroupBorder:"#E5E5E5",boxText:"#004992",whiteDarkBlueLight:"#025CB7"},shadows:{modalShadow:Le.LIGHT_MODAL_SHADOW}},je=n(184),We=function(e){var t=e.children;return(0,je.jsx)(Te,{theme:ze,children:t})};function Ue(e){if(Array.isArray(e))return e}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t){if(e){if("string"===typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}function Ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qe(e,t){return Ue(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,o=l}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||He(e,t)||Ge()}function Ke(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $e(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||Ke(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Qe(e){var t=function(e,t){if("object"!==Ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ye(t)?t:String(t)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qe(r.key),r)}}function Ze(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}function rt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Fu){return!1}}function ot(e,t){if(t&&("object"===Ye(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function it(e){var t=rt();return function(){var n,r=nt(e);if(t){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ot(this,n)}}function at(e,t,n){return at=rt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&et(o,n.prototype),o},at.apply(null,arguments)}function st(e){var t="function"===typeof Map?new Map:void 0;return st=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return at(e,arguments,nt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),et(n,e)},st(e)}function ut(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=He(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ct.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Fe||(Fe={}));var lt,ft="popstate";function dt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function pt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Fu){}}}function ht(e,t){return{usr:e.state,key:e.key,idx:t}}function vt(e,t,n,r){return void 0===n&&(n=null),ct({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?gt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function mt(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,o=void 0===r?"":r,i=e.hash,a=void 0===i?"":i;return o&&"?"!==o&&(n+="?"===o.charAt(0)?o:"?"+o),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function gt(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yt(e,t,n,r){void 0===r&&(r={});var o=r,i=o.window,a=void 0===i?document.defaultView:i,s=o.v5Compat,u=void 0!==s&&s,c=a.history,l=Fe.Pop,f=null,d=p();function p(){return(c.state||{idx:null}).idx}function h(){l=Fe.Pop;var e=p(),t=null==e?null:e-d;d=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:mt(e);return dt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,c.replaceState(ct({},c.state,{idx:d}),""));var m={get action(){return l},get location(){return e(a,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(ft,h),f=e,function(){a.removeEventListener(ft,h),f=null}},createHref:function(e){return t(a,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=Fe.Push;var r=vt(m.location,e,t);n&&n(r,e);var o=ht(r,d=p()+1),i=m.createHref(r);try{c.pushState(o,"",i)}catch(s){a.location.assign(i)}u&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=Fe.Replace;var r=vt(m.location,e,t);n&&n(r,e);var o=ht(r,d=p()),i=m.createHref(r);c.replaceState(o,"",i),u&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(lt||(lt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function xt(e,t,n){void 0===n&&(n="/");var r=Ot(("string"===typeof t?gt(t):t).pathname||"/",n);if(null==r)return null;var o=bt(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(o);for(var i=null,a=0;null==i&&a<o.length;++a)i=Tt(o[a],Nt(r));return i}function bt(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var o=function(e,o,i){var a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(dt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=Lt([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(dt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),bt(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:At(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,i=ut(wt(e.path));try{for(i.s();!(r=i.n()).done;){var a=r.value;o(e,t,a)}}catch(s){i.e(s)}finally{i.f()}}else o(e,t)})),t}function wt(e){var t=e.split("/");if(0===t.length)return[];var n,r=Ue(n=t)||Ke(n)||He(n)||Ge(),o=r[0],i=r.slice(1),a=o.endsWith("?"),s=o.replace(/\?$/,"");if(0===i.length)return a?[s,""]:[s];var u=wt(i.join("/")),c=[];return c.push.apply(c,$e(u.map((function(e){return""===e?s:[s,e].join("/")})))),a&&c.push.apply(c,$e(u)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var Ct=/^:\w+$/,St=3,Et=2,kt=1,_t=10,Rt=-2,It=function(e){return"*"===e};function At(e,t){var n=e.split("/"),r=n.length;return n.some(It)&&(r+=Rt),t&&(r+=Et),n.filter((function(e){return!It(e)})).reduce((function(e,t){return e+(Ct.test(t)?St:""===t?kt:_t)}),r)}function Tt(e,t){for(var n=e.routesMeta,r={},o="/",i=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,c="/"===o?t:t.slice(o.length)||"/",l=Dt({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;i.push({params:r,pathname:Lt([o,l.pathname]),pathnameBase:Bt(Lt([o,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(o=Lt([o,l.pathnameBase]))}return i}function Dt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);pt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");var i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),r=qe(n,2),o=r[0],i=r[1],a=t.match(o);if(!a)return null;var s=a[0],u=s.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:i.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return pt(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function Nt(e){try{return decodeURI(e)}catch(t){return pt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Ot(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ft(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Pt(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Mt(e,t,n,r){var o;void 0===r&&(r=!1),"string"===typeof e?o=gt(e):(dt(!(o=ct({},e)).pathname||!o.pathname.includes("?"),Ft("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Ft("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Ft("#","search","hash",o)));var i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;o.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?gt(e):e,r=n.pathname,o=n.search,i=void 0===o?"":o,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:zt(i),hash:jt(s)}}(o,i),f=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!d||(l.pathname+="/"),l}var Lt=function(e){return e.join("/").replace(/\/\/+/g,"/")},Bt=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},zt=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},jt=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Wt=function(e){tt(n,e);var t=it(n);function n(){return Xe(this,n),t.apply(this,arguments)}return Ze(n)}(st(Error));function Ut(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Vt=["post","put","patch","delete"],Ht=(new Set(Vt),["get"].concat(Vt));new Set(Ht),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var Gt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qt=e.useState,Kt=e.useEffect,$t=e.useLayoutEffect,Xt=e.useDebugValue;function Yt(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Gt(n,r)}catch(o){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var Qt=e.createContext(null);var Jt=e.createContext(null);var Zt=e.createContext(null);var en=e.createContext(null);var tn=e.createContext(null);var nn=e.createContext({outlet:null,matches:[]});var rn=e.createContext(null);function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},on.apply(this,arguments)}function an(){return null!=e.useContext(tn)}function sn(){return an()||dt(!1),e.useContext(tn).location}function un(){an()||dt(!1);var t=e.useContext(en),n=t.basename,r=t.navigator,o=e.useContext(nn).matches,i=sn().pathname,a=JSON.stringify(Pt(o).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);e.useEffect((function(){s.current=!0}));var u=e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var o=Mt(e,JSON.parse(a),i,"path"===t.relative);"/"!==n&&(o.pathname="/"===o.pathname?n:Lt([n,o.pathname])),(t.replace?r.replace:r.push)(o,t.state,t)}else r.go(e)}),[n,r,a,i]);return u}var cn=e.createContext(null);function ln(){var t=function(){var t,n=e.useContext(rn),r=mn(dn.UseRouteError),o=gn(dn.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[o]}(),n=Ut(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:o};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:i},r):null,null)}var fn,dn,pn=function(t){tt(r,t);var n=it(r);function r(e){var t;return Xe(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return Ze(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(nn.Provider,{value:this.props.routeContext},e.createElement(rn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function hn(t){var n=t.routeContext,r=t.match,o=t.children,i=e.useContext(Qt);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(nn.Provider,{value:n},o)}function vn(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var o=t,i=null==r?void 0:r.errors;if(null!=i){var a=o.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));a>=0||dt(!1),o=o.slice(0,Math.min(o.length,a+1))}return o.reduceRight((function(t,a,s){var u=a.route.id?null==i?void 0:i[a.route.id]:null,c=null;r&&(c=a.route.ErrorBoundary?e.createElement(a.route.ErrorBoundary,null):a.route.errorElement?a.route.errorElement:e.createElement(ln,null));var l=n.concat(o.slice(0,s+1)),f=function(){var n=t;return u?n=c:a.route.Component?n=e.createElement(a.route.Component,null):a.route.element&&(n=a.route.element),e.createElement(hn,{match:a,routeContext:{outlet:t,matches:l},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?e.createElement(pn,{location:r.location,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function mn(t){var n=e.useContext(Jt);return n||dt(!1),n}function gn(t){var n=function(t){var n=e.useContext(nn);return n||dt(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||dt(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(fn||(fn={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(dn||(dn={}));var yn;function xn(t){return function(t){var n=e.useContext(nn).outlet;return n?e.createElement(cn.Provider,{value:t},n):n}(t.context)}function bn(e){dt(!1)}function wn(t){var n=t.basename,r=void 0===n?"/":n,o=t.children,i=void 0===o?null:o,a=t.location,s=t.navigationType,u=void 0===s?Fe.Pop:s,c=t.navigator,l=t.static,f=void 0!==l&&l;an()&&dt(!1);var d=r.replace(/^\/*/,"/"),p=e.useMemo((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof a&&(a=gt(a));var h=a,v=h.pathname,m=void 0===v?"/":v,g=h.search,y=void 0===g?"":g,x=h.hash,b=void 0===x?"":x,w=h.state,C=void 0===w?null:w,S=h.key,E=void 0===S?"default":S,k=e.useMemo((function(){var e=Ot(m,d);return null==e?null:{location:{pathname:e,search:y,hash:b,state:C,key:E},navigationType:u}}),[d,m,y,b,C,E,u]);return null==k?null:e.createElement(en.Provider,{value:p},e.createElement(tn.Provider,{children:i,value:k}))}function Cn(t){var n=t.children,r=t.location,o=e.useContext(Qt);return function(t,n){an()||dt(!1);var r,o=e.useContext(en).navigator,i=e.useContext(Jt),a=e.useContext(nn).matches,s=a[a.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,sn());if(n){var f,d="string"===typeof n?gt(n):n;"/"===c||(null==(f=d.pathname)?void 0:f.startsWith(c))||dt(!1),r=d}else r=l;var p=r.pathname||"/",h=xt(t,{pathname:"/"===c?p:p.slice(c.length)||"/"}),v=vn(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Lt([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Lt([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,i||void 0);return n&&v?e.createElement(tn.Provider,{value:{location:on({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:Fe.Pop}},v):v}(o&&!n?o.router.routes:En(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(yn||(yn={}));var Sn=new Promise((function(){}));e.Component;function En(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,o){if(e.isValidElement(t)){var i=[].concat($e(n),[o]);if(t.type!==e.Fragment){t.type!==bn&&dt(!1),t.props.index&&t.props.children&&dt(!1);var a={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=En(t.props.children,i)),r.push(a)}else r.push.apply(r,En(t.props.children,i))}})),r}function kn(t){var n,r=t.basename,o=t.children,i=t.window,a=e.useRef();null==a.current&&(a.current=(void 0===(n={window:i,v5Compat:!0})&&(n={}),yt((function(e,t){var n=e.location;return vt("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:mt(t)}),null,n)));var s=a.current,u=qe(e.useState({action:s.action,location:s.location}),2),c=u[0],l=u[1];return e.useLayoutEffect((function(){return s.listen(l)}),[s]),e.createElement(wn,{basename:r,children:o,location:c.location,navigationType:c.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _n,Rn;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(_n||(_n={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Rn||(Rn={}));var In,An,Tn,Dn,Nn,On,Fn,Pn,Mn,Ln,Bn,zn,jn,Wn,Un,Vn,Hn,Gn,qn,Kn,$n,Xn;function Yn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Qn=Pe.div(In||(In=Yn(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  width: 100vw;\n  padding: 0px 0px 30px 0px;\n"]))),Jn=(Pe.div(An||(An=Yn(["\n  display: flex;\n  align-items: flex-end;\n  gap: 5px;\n  cursor: pointer;\n  :hover{\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),Pe.div(Tn||(Tn=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 16px;\n  margin: 0px 20px;\n  border-bottom: #bbbbbb 1px solid;\n"]))),Pe.div(Dn||(Dn=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 26px;\n  margin: 89px 20px 0px 30px;\n  border-top: #bbbbbb 1px solid;\n"])))),Zn=Pe.div(Nn||(Nn=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  margin-top: 100px;\n  @media (max-width: 540px) {\n    flex-direction: column;\n    align-items: center;\n    gap: 10px\n  }\n"]))),er=Pe.div(On||(On=Yn(["\n  display: flex;\n  flex-direction: column;\n  padding: 0px 30px;\n"]))),tr=Pe.div(Fn||(Fn=Yn(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  width: 312px;\n  height: 312px; \n  transition: 0.5s;\n  border-radius: 8px;\n  background-color: ",";\n  color: ",";\n  cursor: pointer;\n  svg{\n    color: ",";;\n    font-size: 80px;\n  }\n  :hover{\n    width: 318px;\n    height: 318px;\n    transition: 0.5s;\n    background-color: ",";\n  }\n  @media (max-width: 1040px) {\n    width: 212px;\n    height: 212px;\n    :hover{\n      width: 218px;\n      height: 218px;\n    } \n    svg{\n      font-size: 60px;\n    }\n  } \n  @media (max-width: 740px) {\n    width: 162px;\n    height: 162px;\n    :hover{\n      width: 168px;\n      height: 168px;\n    }  \n    svg{\n      font-size: 40px;\n    }\n  } \n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.hoverColor})),nr=Pe.div(Pn||(Pn=Yn(["\n  width: 100%;\n  padding-bottom: 20px;\n  //height: 500px;\n  background-image: url('https://media.giphy.com/media/3WuagBkXjI2SHfgDsU/giphy.gif');\n  background-size: contain;\n"]))),rr=Pe.div(Mn||(Mn=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 140px 180px 0px 180px;\n  @media (max-width: 1000px) {\n    margin: 140px 40px 0px 40px;\n  }\n  @media (max-width: 600px) {\n    margin: 140px 20px 0px 20px;\n  }\n"]))),or=Pe.div(Ln||(Ln=Yn(["\n  display: flex;\n  flex-direction: column;\n  gap: 0px;\n  margin: 100px 160px 0px 160px;\n   @media (max-width: 1000px) {\n    margin: 140px 40px 0px 40px;\n  }\n  @media (max-width: 600px) {\n    margin: 140px 20px 0px 20px;\n  }\n"]))),ir=Pe.div(Bn||(Bn=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-top: 42px;\n  @media (max-width: 1150px) {\n    display: grid;\n    grid-template-columns: auto auto;\n    justify-content: space-around;\n    gap: 20px;\n  }\n"]))),ar=Pe.div(zn||(zn=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 80px;\n  margin: 110px 100px 0px 100px;\n   @media (max-width: 1000px) {\n    margin: 140px 40px 0px 40px;\n  }\n  @media (max-width: 600px) {\n    margin: 140px 20px 0px 20px;\n  }\n"]))),sr=(Pe.div(jn||(jn=Yn(["\n  width: 90%;\n  height: 100%;\n"]))),Pe.div(Wn||(Wn=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 14px;\n"]))),Pe.h1(Un||(Un=Yn(["\n  font-size: 34px;\n  cursor: default;\n  @media (max-width: 1040px) {\n    font-size: 24px;\n  } \n  @media (max-width: 740px) {\n    font-size: 18px;\n  }\n"])))),ur=Pe.div(Vn||(Vn=Yn(["\n  font-size: 20px;\n  cursor: default;\n  @media (max-width: 740px) {\n    font-size: 16px;\n  } \n  &:hover {\n    color: #F231A5\n  }\n"])));Pe.div(Hn||(Hn=Yn(["\n  cursor: default;\n  font-size: 16px;\n  animation-direction: right;\n  transition: all 0.5s ease-out;\n  transform: translatex(-1000px);\n // opacity: 0;\n // transform: translateY(20px);\n  &.show {\n  opacity: 1;\n  transform: translatex(150px);\n  }\n  \n  &:hover {\n   \n    color: #F231A5\n  }\n"]))),Pe.form(Gn||(Gn=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px;\n  gap: 20px;\n"]))),Pe.label(qn||(qn=Yn(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 8px;\n  width: 300px;\n  gap:5px;\n"]))),Pe.input(Kn||(Kn=Yn(["\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 16px;\n"]))),Pe.button($n||($n=Yn(["\n  padding: 8px 16px;\n  background-color: ",";;\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 148px;\n  &:hover {\n    background-color: #F231A5\n  }\n\n  &:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary})),Pe.p(Xn||(Xn=Yn(["\n  color: #ff0000;\n"])));function cr(){return Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cr.apply(this,arguments)}var lr=new Map,fr=new WeakMap,dr=0,pr=void 0;function hr(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?function(e){return e?(fr.has(e)||(dr+=1,fr.set(e,dr.toString())),fr.get(e)):"0"}(e.root):e[t])})).toString()}function vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pr;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var o=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),function(){}}var i=function(e){var t=hr(e),n=lr.get(t);if(!n){var r,o=new Map,i=new IntersectionObserver((function(t){t.forEach((function(t){var n,i=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=i),null==(n=o.get(t.target))||n.forEach((function(e){e(i,t)}))}))}),e);r=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:o},lr.set(t,n)}return n}(n),a=i.id,s=i.observer,u=i.elements,c=u.get(e)||[];return u.has(e)||u.set(e,c),c.push(t),s.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(u.delete(e),s.unobserve(e)),0===u.size&&(s.disconnect(),lr.delete(a))}}var mr=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function gr(e){return"function"!==typeof e.children}var yr,xr;e.Component;function br(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.threshold,o=n.delay,i=n.trackVisibility,a=n.rootMargin,s=n.root,u=n.triggerOnce,c=n.skip,l=n.initialInView,f=n.fallbackInView,d=n.onChange,p=qe(e.useState(null),2),h=p[0],v=p[1],m=e.useRef(),g=qe(e.useState({inView:!!l,entry:void 0}),2),y=g[0],x=g[1];m.current=d,e.useEffect((function(){var e;if(!c&&h)return e=vr(h,(function(t,n){x({inView:t,entry:n}),m.current&&m.current(t,n),n.isIntersecting&&u&&e&&(e(),e=void 0)}),{root:s,rootMargin:a,threshold:r,trackVisibility:i,delay:o},f),function(){e&&e()}}),[Array.isArray(r)?r.toString():r,h,s,a,u,c,i,f,o]);var b=null==(t=y.entry)?void 0:t.target,w=e.useRef();h||!b||u||c||w.current===b||(w.current=b,x({inView:!!l,entry:void 0}));var C=[v,y.inView,y.entry];return C.ref=C[0],C.inView=C[1],C.entry=C[2],C}var wr,Cr,Sr,Er=Pe.div(yr||(yr=Yn(["\n    svg{\n        font-size: 80px\n    }\n    .transform {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        gap: 50px;\n        transition: all 0.8s ease-out;\n        transform: translatex(-300px);\n        opacity: 0;\n    }\n    .transform.show {\n        opacity: 1;\n        transform: translatex(0px);\n    }\n    @media (max-width: 740px) {\n        .transform {\n            display: flex;\n            flex-direction: column-reverse;\n        }\n            svg{\n            font-size: 60px\n        }\n    }\n"]))),kr=Pe.div(xr||(xr=Yn(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 20px;\n    cursor: default;\n    @media (max-width: 740px) {\n        font-size: 16px;\n    }\n"]))),_r=function(e){e.icon;var t=e.text,n=e.threshold,r=br({threshold:void 0===n?.01:n}),o=r.ref,i=r.inView;return(0,je.jsx)(Er,{children:(0,je.jsx)("div",{ref:o,className:"transform ".concat(i?"show":""),children:(0,je.jsx)(kr,{children:t})})})},Rr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ir=e.createContext&&e.createContext(Rr),Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ar.apply(this,arguments)},Tr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function Dr(t){return t&&t.map((function(t,n){return e.createElement(t.tag,Ar({key:n},t.attr),Dr(t.child))}))}function Nr(t){return function(n){return e.createElement(Or,Ar({attr:Ar({},t.attr)},n),Dr(t.child))}}function Or(t){var n=function(n){var r,o=t.attr,i=t.size,a=t.title,s=Tr(t,["attr","size","title"]),u=i||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",Ar({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,s,{className:r,style:Ar(Ar({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&e.createElement("title",null,a),t.children)};return void 0!==Ir?e.createElement(Ir.Consumer,null,(function(e){return n(e)})):n(Rr)}function Fr(e){return Nr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88a9.947 9.947 0 0112.28 0C16.43 19.18 14.03 20 12 20z"}}]})(e)}function Pr(e){return Nr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{fill:"none"},child:[{tag:"path",attr:{d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M0 0h24v24H0z"}}]},{tag:"path",attr:{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zM8 13c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4zM12.51 4.05C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95zM16.53 13.83C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17z"}}]})(e)}function Mr(e){return Nr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 22a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v3h-2V4H6v16h12v-2h2v3a1 1 0 0 1-1 1H5zm13-6v-3h-7v-2h7V8l5 4-5 4z"}}]}]})(e)}function Lr(e){return Nr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M2 22a8 8 0 1 1 16 0H2zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm10 4h4v2h-4v-2zm-3-5h7v2h-7v-2zm2-5h5v2h-5V7z"}}]}]})(e)}var Br,zr,jr,Wr,Ur,Vr,Hr,Gr,qr,Kr,$r,Xr,Yr=Pe.div(wr||(wr=Yn(["\n    img{\n        max-width: 180px;\n        border-radius: 10%;\n        margin-bottom: 20px;\n        @media (max-width: 1150px) {\n            width: 90%;\n            height: 100%;\n        }\n       \n    }\n    .transform {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 4px;\n        transition: all ","s ease-out;\n        transform: translateY(30px);\n        opacity: 0;\n    }\n    .transform.show {\n        opacity: 1;\n        transform: translateY(0px);\n    }\n"])),(function(e){return e.time})),Qr=Pe.div(Cr||(Cr=Yn(["\n    font-size: 20px;\n    font-weight: bold;\n    cursor: default;\n    @media (max-width: 740px) {\n        font-size: 14px;\n    }\n"]))),Jr=(Pe.div(Sr||(Sr=Yn(["\n    font-size: 16px;\n    cursor: default;\n"]))),function(e){var t=e.img,n=e.name,r=(e.work,e.timeAnimate),o=e.threshold,i=br({threshold:void 0===o?.5:o}),a=i.ref,s=i.inView;return(0,je.jsx)(Yr,{time:r,children:(0,je.jsxs)("div",{ref:a,className:"transform ".concat(s?"show":""),children:[(0,je.jsx)("img",{src:t}),(0,je.jsx)(Qr,{children:n})]})})}),Zr=(Pe.div(Br||(Br=Yn(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  width: 100vw;\n  padding: 0px 0px 30px 0px;\n"]))),Pe.div(zr||(zr=Yn(["\n  display: flex;\n  align-items: flex-end;\n  gap: 5px;\n  cursor: pointer;\n  :hover{\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.hoverColor}))),eo=Pe.div(jr||(jr=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 16px;\n  margin: 0px 20px;\n  border-bottom: #bbbbbb 1px solid;\n"]))),to=function(){var e=un();return(0,je.jsx)(eo,{children:(0,je.jsxs)(Zr,{onClick:function(){return e("/")},children:["Sair",(0,je.jsx)(Mr,{})]})})},no=n.p+"static/media/joao-ryan.6fe74fc2b142ce24b097.png",ro=n.p+"static/media/matheus.1bf83cc328cb40f1fd52.png",oo=n.p+"static/media/joao.0c47d2277dede44dc805.png",io=n.p+"static/media/gustavo.cbd9b37900a5b6333b1a.png";function ao(){var e=un();return(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)(Qn,{children:[(0,je.jsxs)(nr,{children:[(0,je.jsx)(to,{}),(0,je.jsxs)(Zn,{children:[(0,je.jsx)(tr,{onClick:function(){return e("/profile")},children:(0,je.jsxs)(er,{children:[(0,je.jsx)(Fr,{}),(0,je.jsx)(sr,{children:"Perfil"})]})}),(0,je.jsx)(tr,{onClick:function(){return e("/user/:id/visitant/creat")},children:(0,je.jsxs)(er,{children:[(0,je.jsx)(Pr,{}),(0,je.jsx)(sr,{children:"Adicionar visitante"})]})}),(0,je.jsx)(tr,{onClick:function(){return e("/visitant")},children:(0,je.jsxs)(er,{children:[(0,je.jsx)(Lr,{}),(0,je.jsx)(sr,{children:"Visitantes"})]})})]})]}),(0,je.jsxs)(rr,{children:[(0,je.jsx)(sr,{children:"Conhe\xe7a a SafeFace"}),(0,je.jsx)(ur,{children:"Um sistema de reconhecimento facial pode oferecer uma maneira conveniente de desbloquear portas ou acessar \xe1reas restritas sem a necessidade de chaves ou senhas. Isso pode ser particularmente \xfatil em eventos ou reuni\xf5es, onde muitas pessoas precisam acessar \xe1reas restritas.pode ser particularmente \xfatil em eventos ou reuni\xf5es, onde muitas pessoas precisam acessar \xe1reas restritas"}),(0,je.jsxs)(ar,{children:[(0,je.jsx)(_r,{icon:"FaSearch",text:"Um sistema de reconhecimento facial pode oferecer uma maneira conveniente de desbloquear portas ou acessar \xe1reas restritas sem\n            a necessidadede chaves ou senhas Isso pode ser particularmente \xfatil em eventos ou reuni\xf5es, onde muitas pessoas precisam acessar \xe1reas restritas."}),(0,je.jsx)(_r,{icon:"FaSearch",text:"Um sistema de reconhecimento facial pode oferecer uma maneira conveniente de desbloquear portas ou acessar \xe1reas restritas sem\n            a necessidadede chaves ou senhas Isso pode ser particularmente \xfatil em eventos ou reuni\xf5es, onde muitas pessoas precisam acessar \xe1reas restritas."}),(0,je.jsx)(_r,{icon:"FaSearch",text:"Um sistema de reconhecimento facial pode oferecer uma maneira conveniente de desbloquear portas ou acessar \xe1reas restritas sem\n            a necessidadede chaves ou senhas Isso pode ser particularmente \xfatil em eventos ou reuni\xf5es, onde muitas pessoas precisam acessar \xe1reas restritas."}),(0,je.jsx)(_r,{icon:"FaSearch",text:"Um sistema de reconhecimento facial pode oferecer uma maneira conveniente de desbloquear portas ou acessar \xe1reas restritas sem\n            a necessidadede chaves ou senhas Isso pode ser particularmente \xfatil em eventos ou reuni\xf5es, onde muitas pessoas precisam acessar \xe1reas restritas."})]})]}),(0,je.jsxs)(or,{children:[(0,je.jsx)(sr,{children:"Nosso time"}),(0,je.jsx)(ur,{children:"Somos um grupo din\xe2mico de indiv\xedduos apaixonados pelo que fazemos e dedicados a oferecer os melhores resultados para nossos clientes."}),(0,je.jsxs)(ir,{children:[(0,je.jsx)(Jr,{img:no,name:"Jo\xe3o Ryan",work:"develop",timeAnimate:1}),(0,je.jsx)(Jr,{img:ro,name:"Matheus",work:"develop",timeAnimate:1.5}),(0,je.jsx)(Jr,{img:oo,name:"Jo\xe3o Victor",work:"develop",timeAnimate:2}),(0,je.jsx)(Jr,{img:io,name:"Gustavo",work:"develop",timeAnimate:2.5})]})]})]}),(0,je.jsx)(Jn,{})]})}var so="660px",uo=Pe.div(Wr||(Wr=Yn(["\n\ttext-transform: none;\n\twidth: 100%;\n"]))),co=(Pe.div(Ur||(Ur=Yn(["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 65px;\n\twidth: 100%;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.header})),Pe.div(Vr||(Vr=Yn(["\n\tdisplay: flex;\n\theight: 100vh;\n\twidth: 100vw;\n  overflow-y: auto;\n  overflow-x: hidden;\n  font-family: Verdana, Geneva, Tahoma, sans-serif ;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.textPrimary}))),lo=(Pe.div(Hr||(Hr=Yn(["\n\tborder: none;\n\twidth: auto;\n\theight: 100vh;\n\t// position: absolute;\n\ttop: 0px;\n\tz-index: 1;\n\tbackground: #0a0c21;\n\tbox-shadow: ",";\n\tborder-radius: 0px 35px 35px 0px;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n\tflex-direction: column;\n"])),(function(e){return e.theme.colors.navbarShadow})),Pe.main(Gr||(Gr=Yn(["\n  width: ",";\n  height: 100%;\n  position: absolute;\n  top: 0px;\n  z-index: 1;\n  background: ",";\n  box-shadow: 5px 0px 10px #00000080;\n  border-radius: 0px 35px 35px 0px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-direction: column;\n  overflow: overlay;\n"])),so,Me.PRIMARY_PURE),Pe.aside(qr||(qr=Yn(["\n  width: calc(100vw - "," + 40px);\n  min-height: 750px;\n  height: 100%;\n  position: absolute;\n  top:0px;\n  left: calc("," - 40px);\n  z-index: 0;\n"])),so,so),Pe.div(Kr||(Kr=Yn(["\n  position: absolute;\n  top: 20px;\n  left: calc(100vw - 175px);\n  height: 40px;\n  width: 175px;\n  background: #f2f2f2;\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0px 1px 5px #00000080;\n  border-radius: 20px 0px 0px 20px;\n  opacity: 1;\n"]))),Pe.img($r||($r=Yn(["\n  height: 30px;\n  padding: 5px;\n  border-radius: 30px;\n  border: 2px solid #f15b29;\n  background-color:#383838;\n  margin: 0px 30px;\n"]))),Pe.canvas(Xr||(Xr=Yn(["\n    position: absolute;\n    display: none;\n    z-index: 100;\n"]))),function(){un();return(0,je.jsx)(je.Fragment,{children:(0,je.jsx)(co,{children:(0,je.jsx)(uo,{children:(0,je.jsx)(xn,{})})})})});function fo(e,t,n){return(t=Qe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vo(){vo=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),s=new k(o||[]);return r(a,"_invoke",{value:w(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var f={};function d(){}function p(){}function h(){}var v={};u(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==t&&n.call(g,i)&&(v=g);var y=h.prototype=d.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,s){var u=l(e[r],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Ye(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:void 0,done:!0}}return p.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},x(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(y),u(y,s,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function mo(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function go(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){mo(i,r,o,a,s,"next",e)}function s(e){mo(i,r,o,a,s,"throw",e)}a(void 0)}))}}function yo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var xo=["name"],bo=["_f"],wo=["_f"],Co=function(e){return"checkbox"===e.type},So=function(e){return e instanceof Date},Eo=function(e){return null==e},ko=function(e){return"object"===typeof e},_o=function(e){return!Eo(e)&&!Array.isArray(e)&&ko(e)&&!So(e)},Ro=function(e){return _o(e)&&e.target?Co(e.target)?e.target.checked:e.target.value:e},Io=function(e,t){return e.has(function(e){return e.substring(0,e.search(/\.\d+(\.|$)/))||e}(t))},Ao=function(e){var t=e.constructor&&e.constructor.prototype;return _o(t)&&t.hasOwnProperty("isPrototypeOf")},To="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Do(e){var t,n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(To&&(e instanceof Blob||e instanceof FileList)||!n&&!_o(e))return e;if(t=n?[]:{},Array.isArray(e)||Ao(e))for(var r in e)t[r]=Do(e[r]);else t=e}return t}var No=function(e){return Array.isArray(e)?e.filter(Boolean):[]},Oo=function(e){return void 0===e},Fo=function(e,t,n){if(!t||!_o(e))return n;var r=No(t.split(/[,[\].]+?/)).reduce((function(e,t){return Eo(e)?e:e[t]}),e);return Oo(r)||r===e?Oo(e[t])?n:e[t]:r},Po={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Lo="max",Bo="min",zo="maxLength",jo="minLength",Wo="pattern",Uo="required",Vo="validate",Ho=(e.createContext(null),function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={defaultValues:t._defaultValues},i=function(i){Object.defineProperty(o,i,{get:function(){var o=i;return t._proxyFormState[o]!==Mo.all&&(t._proxyFormState[o]=!r||Mo.all),n&&(n[o]=!0),e[o]}})};for(var a in e)i(a);return o}),Go=function(e){return _o(e)&&!Object.keys(e).length},qo=function(e,t,n,r){n(e);e.name;var o=yo(e,xo);return Go(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find((function(e){return t[e]===(!r||Mo.all)}))},Ko=function(e){return Array.isArray(e)?e:[e]};function $o(t){var n=e.useRef(t);n.current=t,e.useEffect((function(){var e=!t.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return function(){e&&e.unsubscribe()}}),[t.disabled])}var Xo=function(e){return"string"===typeof e},Yo=function(e,t,n,r,o){return Xo(e)?(r&&t.watch.add(e),Fo(n,e,o)):Array.isArray(e)?e.map((function(e){return r&&t.watch.add(e),Fo(n,e)})):(r&&(t.watchAll=!0),n)};var Qo=function(e){return/^\w*$/.test(e)},Jo=function(e){return No(e.replace(/["|']|\]/g,"").split(/\.|\[/))};function Zo(e,t,n){for(var r=-1,o=Qo(t)?[t]:Jo(t),i=o.length,a=i-1;++r<i;){var s=o[r],u=n;if(r!==a){var c=e[s];u=_o(c)||Array.isArray(c)?c:isNaN(+o[r+1])?{}:[]}e[s]=u,e=e[s]}return e}var ei=function(e,t,n,r,o){return t?ho(ho({},n[e]),{},{types:ho(ho({},n[e]&&n[e].types?n[e].types:{}),{},fo({},r,o||!0))}):{}},ti=function e(t,n,r){var o,i=ut(r||Object.keys(t));try{for(i.s();!(o=i.n()).done;){var a=o.value,s=Fo(t,a);if(s){var u=s._f,c=yo(s,bo);if(u&&n(u.name)){if(u.ref.focus){u.ref.focus();break}if(u.refs&&u.refs[0].focus){u.refs[0].focus();break}}else _o(c)&&e(c,n)}}}catch(l){i.e(l)}finally{i.f()}},ni=function(e){return{isOnSubmit:!e||e===Mo.onSubmit,isOnBlur:e===Mo.onBlur,isOnChange:e===Mo.onChange,isOnAll:e===Mo.all,isOnTouch:e===Mo.onTouched}},ri=function(e,t,n){return!n&&(t.watchAll||t.watch.has(e)||$e(t.watch).some((function(t){return e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))})))},oi=function(e,t,n){var r=No(Fo(e,n));return Zo(r,"root",t[n]),Zo(e,n,r),e},ii=function(e){return"boolean"===typeof e},ai=function(e){return"file"===e.type},si=function(e){return"function"===typeof e},ui=function(e){if(!To)return!1;var t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ci=function(e){return Xo(e)},li=function(e){return"radio"===e.type},fi=function(e){return e instanceof RegExp},di={value:!1,isValid:!1},pi={value:!0,isValid:!0},hi=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.checked&&!e.disabled})).map((function(e){return e.value}));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Oo(e[0].attributes.value)?Oo(e[0].value)||""===e[0].value?pi:{value:e[0].value,isValid:!0}:pi:di}return di},vi={isValid:!1,value:null},mi=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e}),vi):vi};function gi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(ci(e)||Array.isArray(e)&&e.every(ci)||ii(e)&&!e)return{type:n,message:ci(e)?e:"",ref:t}}var yi=function(e){return _o(e)&&!fi(e)?e:{value:e,message:""}},xi=function(){var e=go(vo().mark((function e(t,n,r,o,i){var a,s,u,c,l,f,d,p,h,v,m,g,y,x,b,w,C,S,E,k,_,R,I,A,T,D,N,O,F,P,M,L,B,z,j,W,U,V,H,G,q,K,$,X,Y,Q,J,Z;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t._f,s=a.ref,u=a.refs,c=a.required,l=a.maxLength,f=a.minLength,d=a.min,p=a.max,h=a.pattern,v=a.validate,m=a.name,g=a.valueAsNumber,y=a.mount,x=a.disabled,b=Fo(n,m),y&&!x){e.next=4;break}return e.abrupt("return",{});case 4:if(w=u?u[0]:s,C=function(e){o&&w.reportValidity&&(w.setCustomValidity(ii(e)?"":e||""),w.reportValidity())},S={},E=li(s),k=Co(s),_=E||k,R=(g||ai(s))&&Oo(s.value)&&Oo(b)||ui(s)&&""===s.value||""===b||Array.isArray(b)&&!b.length,I=ei.bind(null,m,r,S),A=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zo,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jo,i=e?t:n;S[m]=ho({type:e?r:o,message:i,ref:s},I(e?r:o,i))},!(i?!Array.isArray(b)||!b.length:c&&(!_&&(R||Eo(b))||ii(b)&&!b||k&&!hi(u).isValid||E&&!mi(u).isValid))){e.next=20;break}if(T=ci(c)?{value:!!c,message:c}:yi(c),D=T.value,N=T.message,!D){e.next=20;break}if(S[m]=ho({type:Uo,message:N,ref:w},I(Uo,N)),r){e.next=20;break}return C(N),e.abrupt("return",S);case 20:if(R||Eo(d)&&Eo(p)){e.next=29;break}if(P=yi(p),M=yi(d),Eo(b)||isNaN(b)?(B=s.valueAsDate||new Date(b),z=function(e){return new Date((new Date).toDateString()+" "+e)},j="time"==s.type,W="week"==s.type,Xo(P.value)&&b&&(O=j?z(b)>z(P.value):W?b>P.value:B>new Date(P.value)),Xo(M.value)&&b&&(F=j?z(b)<z(M.value):W?b<M.value:B<new Date(M.value))):(L=s.valueAsNumber||(b?+b:b),Eo(P.value)||(O=L>P.value),Eo(M.value)||(F=L<M.value)),!O&&!F){e.next=29;break}if(A(!!O,P.message,M.message,Lo,Bo),r){e.next=29;break}return C(S[m].message),e.abrupt("return",S);case 29:if(!l&&!f||R||!(Xo(b)||i&&Array.isArray(b))){e.next=39;break}if(U=yi(l),V=yi(f),H=!Eo(U.value)&&b.length>+U.value,G=!Eo(V.value)&&b.length<+V.value,!H&&!G){e.next=39;break}if(A(H,U.message,V.message),r){e.next=39;break}return C(S[m].message),e.abrupt("return",S);case 39:if(!h||R||!Xo(b)){e.next=46;break}if(q=yi(h),K=q.value,$=q.message,!fi(K)||b.match(K)){e.next=46;break}if(S[m]=ho({type:Wo,message:$,ref:s},I(Wo,$)),r){e.next=46;break}return C($),e.abrupt("return",S);case 46:if(!v){e.next=80;break}if(!si(v)){e.next=59;break}return e.next=50,v(b,n);case 50:if(X=e.sent,!(Y=gi(X,w))){e.next=57;break}if(S[m]=ho(ho({},Y),I(Vo,Y.message)),r){e.next=57;break}return C(Y.message),e.abrupt("return",S);case 57:e.next=80;break;case 59:if(!_o(v)){e.next=80;break}Q={},e.t0=vo().keys(v);case 62:if((e.t1=e.t0()).done){e.next=76;break}if(J=e.t1.value,Go(Q)||r){e.next=66;break}return e.abrupt("break",76);case 66:return e.t2=gi,e.next=69,v[J](b,n);case 69:e.t3=e.sent,e.t4=w,e.t5=J,(Z=(0,e.t2)(e.t3,e.t4,e.t5))&&(Q=ho(ho({},Z),I(J,Z.message)),C(Z.message),r&&(S[m]=Q)),e.next=62;break;case 76:if(Go(Q)){e.next=80;break}if(S[m]=ho({ref:w},Q),r){e.next=80;break}return e.abrupt("return",S);case 80:return C(!0),e.abrupt("return",S);case 82:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}();function bi(e,t){var n=Array.isArray(t)?t:Qo(t)?[t]:Jo(t),r=1===n.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=Oo(e)?r++:e[t[r++]];return e}(e,n),o=n.length-1,i=n[o];return r&&delete r[i],0!==o&&(_o(r)&&Go(r)||Array.isArray(r)&&function(e){for(var t in e)if(!Oo(e[t]))return!1;return!0}(r))&&bi(e,n.slice(0,-1)),e}function wi(){var e=[];return{get observers(){return e},next:function(t){var n,r=ut(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.next&&o.next(t)}}catch(i){r.e(i)}finally{r.f()}},subscribe:function(t){return e.push(t),{unsubscribe:function(){e=e.filter((function(e){return e!==t}))}}},unsubscribe:function(){e=[]}}}var Ci=function(e){return Eo(e)||!ko(e)};function Si(e,t){if(Ci(e)||Ci(t))return e===t;if(So(e)&&So(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0,i=n;o<i.length;o++){var a=i[o],s=e[a];if(!r.includes(a))return!1;if("ref"!==a){var u=t[a];if(So(s)&&So(u)||_o(s)&&_o(u)||Array.isArray(s)&&Array.isArray(u)?!Si(s,u):s!==u)return!1}}return!0}var Ei=function(e){return"select-multiple"===e.type},ki=function(e){return li(e)||Co(e)},_i=function(e){return ui(e)&&e.isConnected},Ri=function(e){for(var t in e)if(si(e[t]))return!0;return!1};function Ii(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e);if(_o(e)||n)for(var r in e)Array.isArray(e[r])||_o(e[r])&&!Ri(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ii(e[r],t[r])):Eo(e[r])||(t[r]=!0);return t}function Ai(e,t,n){var r=Array.isArray(e);if(_o(e)||r)for(var o in e)Array.isArray(e[o])||_o(e[o])&&!Ri(e[o])?Oo(t)||Ci(n[o])?n[o]=Array.isArray(e[o])?Ii(e[o],[]):ho({},Ii(e[o])):Ai(e[o],Eo(t)?{}:t[o],n[o]):n[o]=!Si(e[o],t[o]);return n}var Ti=function(e,t){return Ai(e,t,Ii(t))},Di=function(e,t){var n=t.valueAsNumber,r=t.valueAsDate,o=t.setValueAs;return Oo(e)?e:n?""===e?NaN:e?+e:e:r&&Xo(e)?new Date(e):o?o(e):e};function Ni(e){var t=e.ref;if(!(e.refs?e.refs.every((function(e){return e.disabled})):t.disabled))return ai(t)?t.files:li(t)?mi(e.refs).value:Ei(t)?$e(t.selectedOptions).map((function(e){return e.value})):Co(t)?hi(e.refs).value:Di(Oo(t.value)?e.ref.value:t.value,e)}var Oi=function(e,t,n,r){var o,i={},a=ut(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=Fo(t,s);u&&Zo(i,s,u._f)}}catch(c){a.e(c)}finally{a.f()}return{criteriaMode:n,names:$e(e),fields:i,shouldUseNativeValidation:r}},Fi=function(e){return Oo(e)?e:fi(e)?e.source:_o(e)?fi(e.value)?e.value.source:e.value:e},Pi=function(e){return e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate)};function Mi(e,t,n){var r=Fo(e,n);if(r||Qo(n))return{error:r,name:n};for(var o=n.split(".");o.length;){var i=o.join("."),a=Fo(t,i),s=Fo(e,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(s&&s.type)return{name:i,error:s};o.pop()}return{name:n}}var Li,Bi,zi,ji,Wi,Ui,Vi,Hi,Gi,qi,Ki,$i,Xi=function(e,t,n,r,o){return!o.isOnAll&&(!n&&o.isOnTouch?!(t||e):(n?r.isOnBlur:o.isOnBlur)?!e:!(n?r.isOnChange:o.isOnChange)||e)},Yi=function(e,t){return!No(Fo(e,t)).length&&bi(e,t)},Qi={mode:Mo.onSubmit,reValidateMode:Mo.onChange,shouldFocusError:!0};function Ji(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=ho(ho({},Qi),t),o={submitCount:0,isDirty:!1,isLoading:si(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},a=(_o(r.defaultValues)||_o(r.values))&&Do(r.defaultValues||r.values)||{},s=r.shouldUnregister?{}:Do(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0,f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:wi(),array:wi(),state:wi()},p=t.resetOptions&&t.resetOptions.keepDirtyValues,h=ni(r.mode),v=ni(r.reValidateMode),m=r.criteriaMode===Mo.all,g=function(){var e=go(vo().mark((function e(t){var n;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.isValid&&!t){e.next=14;break}if(!r.resolver){e.next=9;break}return e.t1=Go,e.next=5,C();case 5:e.t2=e.sent.errors,e.t0=(0,e.t1)(e.t2),e.next=12;break;case 9:return e.next=11,E(i,!0);case 11:e.t0=e.sent;case 12:(n=e.t0)!==o.isValid&&d.state.next({isValid:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return f.isValidating&&d.state.next({isValidating:e})},x=function(e,t,n,r){var o=Fo(i,e);if(o){var c=Fo(s,e,Oo(n)?Fo(a,e):n);Oo(c)||r&&r.defaultChecked||t?Zo(s,e,t?c:Ni(o._f)):R(e,c),u.mount&&g()}},b=function(e,t,n,r,i){var s=!1,u=!1,c={name:e};if(!n||r){f.isDirty&&(u=o.isDirty,o.isDirty=c.isDirty=k(),s=u!==c.isDirty);var l=Si(Fo(a,e),t);u=Fo(o.dirtyFields,e),l?bi(o.dirtyFields,e):Zo(o.dirtyFields,e,!0),c.dirtyFields=o.dirtyFields,s=s||f.dirtyFields&&u!==!l}if(n){var p=Fo(o.touchedFields,e);p||(Zo(o.touchedFields,e,n),c.touchedFields=o.touchedFields,s=s||f.touchedFields&&p!==n)}return s&&i&&d.state.next(c),s?c:{}},w=function(n,r,i,a){var s,u=Fo(o.errors,n),c=f.isValid&&ii(r)&&o.isValid!==r;if(t.delayError&&i?(s=function(){return function(e,t){Zo(o.errors,e,t),d.state.next({errors:o.errors})}(n,i)},(e=function(e){clearTimeout(l),l=setTimeout(s,e)})(t.delayError)):(clearTimeout(l),e=null,i?Zo(o.errors,n,i):bi(o.errors,n)),(i?!Si(u,i):u)||!Go(a)||c){var p=ho(ho(ho({},a),c&&ii(r)?{isValid:r}:{}),{},{errors:o.errors,name:n});o=ho(ho({},o),p),d.state.next(p)}y(!1)},C=function(){var e=go(vo().mark((function e(t){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.resolver(s,r.context,Oi(t||c.mount,i,r.criteriaMode,r.shouldUseNativeValidation)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=go(vo().mark((function e(t){var n,r,i,a,s,u;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:if(n=e.sent,r=n.errors,t){i=ut(t);try{for(i.s();!(a=i.n()).done;)s=a.value,(u=Fo(r,s))?Zo(o.errors,s,u):bi(o.errors,s)}catch(c){i.e(c)}finally{i.f()}}else o.errors=r;return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=go(vo().mark((function e(t,n){var i,a,u,l,f,d,p,h=arguments;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=h.length>2&&void 0!==h[2]?h[2]:{valid:!0},e.t0=vo().keys(t);case 2:if((e.t1=e.t0()).done){e.next=23;break}if(a=e.t1.value,!(u=t[a])){e.next=21;break}if(l=u._f,f=yo(u,wo),!l){e.next=17;break}return d=c.array.has(l.name),e.next=11,xi(u,s,m,r.shouldUseNativeValidation&&!n,d);case 11:if(!(p=e.sent)[l.name]){e.next=16;break}if(i.valid=!1,!n){e.next=16;break}return e.abrupt("break",23);case 16:!n&&(Fo(p,l.name)?d?oi(o.errors,p,l.name):Zo(o.errors,l.name,p[l.name]):bi(o.errors,l.name));case 17:if(e.t2=f,!e.t2){e.next=21;break}return e.next=21,E(f,n,i);case 21:e.next=2;break;case 23:return e.abrupt("return",i.valid);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(e,t){return e&&t&&Zo(s,e,t),!Si(N(),a)},_=function(e,t,n){return Yo(e,c,ho({},u.mount?s:Oo(t)?a:Xo(e)?fo({},e,t):t),n,t)},R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Fo(i,e),o=t;if(r){var a=r._f;a&&(!a.disabled&&Zo(s,e,Di(t,a)),o=ui(a.ref)&&Eo(t)?"":t,Ei(a.ref)?$e(a.ref.options).forEach((function(e){return e.selected=o.includes(e.value)})):a.refs?Co(a.ref)?a.refs.length>1?a.refs.forEach((function(e){return(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find((function(t){return t===e.value})):o===e.value)})):a.refs[0]&&(a.refs[0].checked=!!o):a.refs.forEach((function(e){return e.checked=e.value===o})):ai(a.ref)?a.ref.value="":(a.ref.value=o,a.ref.type||d.values.next({name:e,values:ho({},s)})))}(n.shouldDirty||n.shouldTouch)&&b(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&D(e)},I=function e(t,n,r){for(var o in n){var a=n[o],s="".concat(t,".").concat(o),u=Fo(i,s);!c.array.has(t)&&Ci(a)&&(!u||u._f)||So(a)?R(s,a,r):e(s,a,r)}},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=Fo(i,e),p=c.array.has(e),h=Do(t);Zo(s,e,h),p?(d.array.next({name:e,values:ho({},s)}),(f.isDirty||f.dirtyFields)&&r.shouldDirty&&d.state.next({name:e,dirtyFields:Ti(a,s),isDirty:k(e,h)})):!l||l._f||Eo(h)?R(e,h,r):I(e,h,r),ri(e,c)&&d.state.next(ho({},o)),d.values.next({name:e,values:ho({},s)}),!u.mount&&n()},T=function(){var t=go(vo().mark((function t(n){var a,u,l,p,x,S,k,_,R,I,A,T,N,O,F,P,M;return vo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target,u=a.name,l=!0,p=Fo(i,u),x=function(){return a.type?Ni(p._f):Ro(n)},!p){t.next=47;break}if(_=x(),R=n.type===Po.BLUR||n.type===Po.FOCUS_OUT,I=!Pi(p._f)&&!r.resolver&&!Fo(o.errors,u)&&!p._f.deps||Xi(R,Fo(o.touchedFields,u),o.isSubmitted,v,h),A=ri(u,c,R),Zo(s,u,_),R?(p._f.onBlur&&p._f.onBlur(n),e&&e(0)):p._f.onChange&&p._f.onChange(n),T=b(u,_,R,!1),N=!Go(T)||A,!R&&d.values.next({name:u,type:n.type,values:ho({},s)}),!I){t.next=18;break}return f.isValid&&g(),t.abrupt("return",N&&d.state.next(ho({name:u},A?{}:T)));case 18:if(!R&&A&&d.state.next(ho({},o)),y(!0),!r.resolver){t.next=32;break}return t.next=23,C([u]);case 23:O=t.sent,F=O.errors,P=Mi(o.errors,i,u),M=Mi(F,i,P.name||u),S=M.error,u=M.name,k=Go(F),t.next=46;break;case 32:return t.next=34,xi(p,s,m,r.shouldUseNativeValidation);case 34:if(t.t0=u,S=t.sent[t.t0],!(l=isNaN(_)||_===Fo(s,u,_))){t.next=46;break}if(!S){t.next=42;break}k=!1,t.next=46;break;case 42:if(!f.isValid){t.next=46;break}return t.next=45,E(i,!0);case 45:k=t.sent;case 46:l&&(p._f.deps&&D(p._f.deps),w(u,k,S,T));case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var e=go(vo().mark((function e(t){var n,a,s,u,l,p=arguments;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:{},u=Ko(t),y(!0),!r.resolver){e.next=11;break}return e.next=6,S(Oo(t)?t:u);case 6:l=e.sent,a=Go(l),s=t?!u.some((function(e){return Fo(l,e)})):a,e.next=21;break;case 11:if(!t){e.next=18;break}return e.next=14,Promise.all(u.map(function(){var e=go(vo().mark((function e(t){var n;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fo(i,t),e.next=3,E(n&&n._f?fo({},t,n):n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:((s=e.sent.every(Boolean))||o.isValid)&&g(),e.next=21;break;case 18:return e.next=20,E(i);case 20:s=a=e.sent;case 21:return d.state.next(ho(ho(ho({},!Xo(t)||f.isValid&&a!==o.isValid?{}:{name:t}),r.resolver||!t?{isValid:a}:{}),{},{errors:o.errors,isValidating:!1})),n.shouldFocus&&!s&&ti(i,(function(e){return e&&Fo(o.errors,e)}),t?u:c.mount),e.abrupt("return",s);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=ho(ho({},a),u.mount?s:{});return Oo(e)?t:Xo(e)?Fo(t,e):e.map((function(e){return Fo(t,e)}))},O=function(e,t){return{invalid:!!Fo((t||o).errors,e),isDirty:!!Fo((t||o).dirtyFields,e),isTouched:!!Fo((t||o).touchedFields,e),error:Fo((t||o).errors,e)}},F=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=ut(e?Ko(e):c.mount);try{for(u.s();!(t=u.n()).done;){var l=t.value;c.mount.delete(l),c.array.delete(l),n.keepValue||(bi(i,l),bi(s,l)),!n.keepError&&bi(o.errors,l),!n.keepDirty&&bi(o.dirtyFields,l),!n.keepTouched&&bi(o.touchedFields,l),!r.shouldUnregister&&!n.keepDefaultValue&&bi(a,l)}}catch(f){u.e(f)}finally{u.f()}d.values.next({values:ho({},s)}),d.state.next(ho(ho({},o),n.keepDirty?{isDirty:k()}:{})),!n.keepIsValid&&g()},P=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Fo(i,t),l=ii(n.disabled);return Zo(i,t,ho(ho({},o||{}),{},{_f:ho(ho({},o&&o._f?o._f:{ref:{name:t}}),{},{name:t,mount:!0},n)})),c.mount.add(t),o?l&&Zo(s,t,n.disabled?void 0:Fo(s,t,Ni(o._f))):x(t,!0,n.value),ho(ho(ho({},l?{disabled:n.disabled}:{}),r.shouldUseNativeValidation?{required:!!n.required,min:Fi(n.min),max:Fi(n.max),minLength:Fi(n.minLength),maxLength:Fi(n.maxLength),pattern:Fi(n.pattern)}:{}),{},{name:t,onChange:T,onBlur:T,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(s){if(s){e(t,n),o=Fo(i,t);var l=Oo(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,f=ki(l),d=o._f.refs||[];if(f?d.find((function(e){return e===l})):l===o._f.ref)return;Zo(i,t,{_f:ho(ho({},o._f),f?{refs:[].concat($e(d.filter(_i)),[l],$e(Array.isArray(Fo(a,t))?[{}]:[])),ref:{type:l.type,name:t}}:{ref:l})}),x(t,!1,void 0,l)}else(o=Fo(i,t,{}))._f&&(o._f.mount=!1),(r.shouldUnregister||n.shouldUnregister)&&(!Io(c.array,t)||!u.action)&&c.unMount.add(t)}))})},M=function(){return r.shouldFocusError&&ti(i,(function(e){return e&&Fo(o.errors,e)}),c.mount)},L=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=e||a,h=Do(l),v=e&&!Go(e)?h:a;if(r.keepDefaultValues||(a=l),!r.keepValues){if(r.keepDirtyValues||p){var m,g=ut(c.mount);try{for(g.s();!(m=g.n()).done;){var y=m.value;Fo(o.dirtyFields,y)?Zo(v,y,Fo(s,y)):A(y,Fo(v,y))}}catch(k){g.e(k)}finally{g.f()}}else{if(To&&Oo(e)){var x,b=ut(c.mount);try{for(b.s();!(x=b.n()).done;){var w=x.value,C=Fo(i,w);if(C&&C._f){var S=Array.isArray(C._f.refs)?C._f.refs[0]:C._f.ref;if(ui(S)){var E=S.closest("form");if(E){E.reset();break}}}}}catch(k){b.e(k)}finally{b.f()}}i={}}s=t.shouldUnregister?r.keepDefaultValues?Do(a):{}:h,d.array.next({values:ho({},v)}),d.values.next({values:ho({},v)})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&n(),u.mount=!f.isValid||!!r.keepIsValid,u.watch=!!t.shouldUnregister,d.state.next({submitCount:r.keepSubmitCount?o.submitCount:0,isDirty:r.keepDirty?o.isDirty:!(!r.keepDefaultValues||Si(e,a)),isSubmitted:!!r.keepIsSubmitted&&o.isSubmitted,dirtyFields:r.keepDirtyValues?o.dirtyFields:r.keepDefaultValues&&e?Ti(a,e):{},touchedFields:r.keepTouched?o.touchedFields:{},errors:r.keepErrors?o.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},B=function(e,t){return L(si(e)?e(s):e,t)};return{control:{register:P,unregister:F,getFieldState:O,_executeSchema:C,_getWatch:_,_getDirty:k,_updateValid:g,_removeUnmounted:function(){var e,t=ut(c.unMount);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=Fo(i,n);r&&(r._f.refs?r._f.refs.every((function(e){return!_i(e)})):!_i(r._f.ref))&&F(n)}}catch(o){t.e(o)}finally{t.f()}c.unMount=new Set},_updateFieldArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(r&&n){if(u.action=!0,l&&Array.isArray(Fo(i,e))){var p=n(Fo(i,e),r.argA,r.argB);c&&Zo(i,e,p)}if(l&&Array.isArray(Fo(o.errors,e))){var h=n(Fo(o.errors,e),r.argA,r.argB);c&&Zo(o.errors,e,h),Yi(o.errors,e)}if(f.touchedFields&&l&&Array.isArray(Fo(o.touchedFields,e))){var v=n(Fo(o.touchedFields,e),r.argA,r.argB);c&&Zo(o.touchedFields,e,v)}f.dirtyFields&&(o.dirtyFields=Ti(a,s)),d.state.next({name:e,isDirty:k(e,t),dirtyFields:o.dirtyFields,errors:o.errors,isValid:o.isValid})}else Zo(s,e,t)},_getFieldArray:function(e){return No(Fo(u.mount?s:a,e,t.shouldUnregister?Fo(a,e,[]):[]))},_reset:L,_resetDefaultValues:function(){return si(r.defaultValues)&&r.defaultValues().then((function(e){B(e,r.resetOptions),d.state.next({isLoading:!1})}))},_updateFormState:function(e){o=ho(ho({},o),e)},_subjects:d,_proxyFormState:f,get _fields(){return i},get _formValues(){return s},get _state(){return u},set _state(e){u=e},get _defaultValues(){return a},get _names(){return c},set _names(e){c=e},get _formState(){return o},set _formState(e){o=e},get _options(){return r},set _options(e){r=ho(ho({},r),e)}},trigger:D,register:P,handleSubmit:function(e,t){return function(){var n=go(vo().mark((function n(a){var u,c,l,f;return vo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist()),u=Do(s),d.state.next({isSubmitting:!0}),!r.resolver){n.next=13;break}return n.next=6,C();case 6:c=n.sent,l=c.errors,f=c.values,o.errors=l,u=f,n.next=15;break;case 13:return n.next=15,E(i);case 15:if(bi(o.errors,"root"),!Go(o.errors)){n.next=22;break}return d.state.next({errors:{}}),n.next=20,e(u,a);case 20:n.next=27;break;case 22:if(!t){n.next=25;break}return n.next=25,t(ho({},o.errors),a);case 25:M(),setTimeout(M);case 27:d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Go(o.errors),submitCount:o.submitCount+1,errors:o.errors});case 28:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},watch:function(e,t){return si(e)?d.values.subscribe({next:function(n){return e(_(void 0,t),n)}}):_(e,t,!0)},setValue:A,getValues:N,reset:B,resetField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fo(i,e)&&(Oo(t.defaultValue)?A(e,Fo(a,e)):(A(e,t.defaultValue),Zo(a,e,t.defaultValue)),t.keepTouched||bi(o.touchedFields,e),t.keepDirty||(bi(o.dirtyFields,e),o.isDirty=t.defaultValue?k(e,Fo(a,e)):k()),t.keepError||(bi(o.errors,e),f.isValid&&g()),d.state.next(ho({},o)))},clearErrors:function(e){e&&Ko(e).forEach((function(e){return bi(o.errors,e)})),d.state.next({errors:e?o.errors:{}})},unregister:F,setError:function(e,t,n){var r=(Fo(i,e,{_f:{}})._f||{}).ref;Zo(o.errors,e,ho(ho({},t),{},{ref:r})),d.state.next({name:e,errors:o.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},setFocus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Fo(i,e),r=n&&n._f;if(r){var o=r.refs?r.refs[0]:r.ref;o.focus&&(o.focus(),t.shouldSelect&&o.select())}},getFieldState:O}}function Zi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.useRef(),r=qe(e.useState({isDirty:!1,isValidating:!1,isLoading:si(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:si(t.defaultValues)?void 0:t.defaultValues}),2),o=r[0],i=r[1];n.current||(n.current=ho(ho({},Ji(t,(function(){return i((function(e){return ho({},e)}))}))),{},{formState:o}));var a=n.current.control;return a._options=t,$o({subject:a._subjects.state,next:function(e){qo(e,a._proxyFormState,a._updateFormState,!0)&&i(ho({},a._formState))}}),e.useEffect((function(){t.values&&!Si(t.values,a._defaultValues)?a._reset(t.values,a._options.resetOptions):a._resetDefaultValues()}),[t.values,a]),e.useEffect((function(){a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(ho({},a._formState))),a._removeUnmounted()})),n.current.formState=Ho(o,a),n.current}var ea=Pe.div(Li||(Li=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n"]))),ta=Pe.div(Bi||(Bi=Yn(["\n  width: 48%;\n  padding: 40px;\n"]))),na=Pe.div(zi||(zi=Yn(["\n  width: 90%;\n  height: 100%;\n  @media (max-width: 900px) {\n    width: 0%;\n    height: 0%;\n  }\n"]))),ra=(Pe.div(ji||(ji=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 14px;\n"]))),Pe.h1(Wi||(Wi=Yn(["\n  font-size: 22px;\n  margin: 0px 0px 16px 20px;\n"]))));ra.displayName="Title";var oa,ia,aa,sa,ua,ca,la,fa,da,pa,ha,va,ma,ga,ya=Pe.div(Ui||(Ui=Yn(["\n  font-size: 13px;\n  cursor: pointer;\n  &:hover {\n    color: ","\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),xa=Pe.div(Vi||(Vi=Yn(["\n  font-size: 12px;\n  cursor: pointer;\n  &:hover {\n    color: ","\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),ba=Pe.form(Hi||(Hi=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px;\n  gap: 20px;\n"]))),wa=Pe.label(Gi||(Gi=Yn(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin-bottom: 8px;\n  width: 300px;\n  gap:5px;\n  transition: 0.5s;\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5\n  }\n"]))),Ca=Pe.input(qi||(qi=Yn(["\n  padding: 8px;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.textPrimary})),Sa=Pe.button(Ki||(Ki=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 178px;\n  &:hover {\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor})),Ea=Pe.p($i||($i=Yn(["\n  color: #ff0000;\n"]))),ka=Pe.div(oa||(oa=Yn(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n"]))),_a=Pe.img(ia||(ia=Yn(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    opacity: 0;\n    transition: opacity 800ms;\n\n    &.selected {\n        opacity:1;\n    }\n"]))),Ra=n.p+"static/media/software1.beb21c818c8b28a51c1d.jpeg",Ia=n.p+"static/media/software2.276318d02a62efb6df99.jpeg",Aa=n.p+"static/media/software3.6159de000da3b889486f.jpeg",Ta=[Ra,Ia,Aa],Da=Ta.length-1,Na=function(){var t=qe((0,e.useState)(0),2),n=t[0],r=t[1],o=(0,e.useRef)(),i=function(){r(n===Da?0:function(e){return e+1})};return(0,e.useEffect)((function(){o.current=i})),(0,e.useEffect)((function(){var e=setInterval((function(){o.current&&o.current()}),5e3);return function(){return clearInterval(e)}}),[]),(0,je.jsx)(ka,{id:"slider",children:Ta.map((function(e,t){return(0,je.jsx)(_a,{className:n===t?"selected":"slide",src:e,alt:"Imagem ".concat(t+1)},e)}))})},Oa=n(4569),Fa=n.n(Oa),Pa={baseURL:"http://localhost:8080",responseType:"json",headers:{accept:"application/json","content-type":"application/json"},timeout:1e5,withCredentials:!1,maxRedirects:5,validateStatus:function(e){return e>=200&&e<300},transformResponse:function(e){var t;null!==e&&e.error&&console.log(e.error);try{t=JSON.parse(e)}catch(n){t=e}return t}},Ma=function(){var e=go(vo().mark((function e(t){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa.url="login",Pa.method="post",Pa.data=t,e.abrupt("return",Fa().request(Pa));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),La=function(){var e=go(vo().mark((function e(t){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa.url="/visitant",Pa.method="post",Pa.data=t,e.abrupt("return",Fa().request(Pa));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ba=function(){var e=go(vo().mark((function e(t){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa.url="/img",Pa.method="post",Pa.data=t,e.abrupt("return",Fa().request(Pa));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),za=function(){var e=go(vo().mark((function e(t,n){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa.url="/update/user/".concat(n),Pa.method="put",Pa.params=n,Pa.data=t,e.abrupt("return",Fa().request(Pa));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ja=function(){var e=go(vo().mark((function e(t,n){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa.url="/update/user/visitant/".concat(n),Pa.method="put",Pa.params=n,Pa.data=t,e.abrupt("return",Fa().request(Pa));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Wa=function(){var e=go(vo().mark((function e(t){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pa.url="/user/".concat(t),Pa.method="delete",Pa.params=t,e.abrupt("return",Fa().request(Pa));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ua(){var e=Zi(),t=e.register,n=e.handleSubmit,r=e.formState,o=un();return(0,je.jsxs)(ea,{children:[(0,je.jsxs)(ta,{children:[(0,je.jsx)(ra,{children:"Login"}),(0,je.jsxs)(ba,{onSubmit:n((function(e){var t={email:e.email,password:e.password};Ma(t).then((function(e){console.log(e),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("resident",JSON.stringify(e.data.resident)),o("/home")})).catch((function(e){console.log(e)})),o("/home")})),children:[(0,je.jsxs)(wa,{children:["Email:",(0,je.jsx)(Ca,ho(ho({type:"email"},t("email",{required:!0})),{},{disabled:r.isSubmitting})),r.errors.email&&(0,je.jsx)(Ea,{children:"Email \xe9 obrigat\xf3rio"})]}),(0,je.jsxs)(wa,{children:["Senha:",(0,je.jsx)(Ca,ho(ho({type:"password",minLength:8},t("password",{required:!0})),{},{disabled:r.isSubmitting})),r.errors.password&&(0,je.jsx)(Ea,{children:"Senha \xe9 obrigat\xf3ria"})]}),(0,je.jsx)(ya,{onClick:function(){return o("/RecoverPasswordPage")},children:"Esqueceu a senha"}),(0,je.jsx)(Sa,{type:"submit",disabled:r.isSubmitting,children:r.isSubmitting?"Aguarde...":"Login"}),(0,je.jsx)(xa,{onClick:function(){return o("/createAccount")},children:"Cadrastrar"})]})]}),(0,je.jsx)(na,{children:(0,je.jsx)(Na,{})})]})}var Va,Ha,Ga,qa,Ka,$a,Xa,Ya,Qa,Ja,Za,es,ts,ns,rs,os=Pe.div(aa||(aa=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  padding: 5ch 0px;\n"]))),is=Pe.div(sa||(sa=Yn(["\n  width: 48%;\n  padding: 40px;\n  @media (max-width: 900px) {\n    width: 100%;\n  }\n"]))),as=Pe.div(ua||(ua=Yn(["\n  width: 90%;\n  height: 100%;\n  @media (max-width: 900px) {\n    width: 0%;\n    height: 0%;\n  }\n"]))),ss=Pe.div(ca||(ca=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 14px;\n"]))),us=Pe.h1(la||(la=Yn(["\n  font-size: 22px;\n  margin: 0px 0px 16px 20px;\n  @media (max-width: 700px) {\n    font-size: 18px;\n    margin: 0px;\n  }\n"]))),cs=Pe.div(fa||(fa=Yn(["\n  svg{\n    cursor: pointer;\n    width: 160px;\n    height: 160px;\n    &:hover {\n      color: #F231A5\n    }\n  }\n"]))),ls=(Pe.div(da||(da=Yn(["\n  font-size: 13px;\n  cursor: pointer;\n  &:hover {\n    color: #F231A5\n  }\n"]))),Pe.form(pa||(pa=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px;\n  gap: 10px;\n  @media (max-width: 700px) {\n    gap: 5px;\n  }\n"])))),fs=Pe.label(ha||(ha=Yn(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin-bottom: 8px;\n  width: 300px;\n  gap:5px;\n  border: hidden;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    font-size: 12px;\n  }\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5\n  }\n"]))),ds=Pe.input(va||(va=Yn(["\n  padding: 8px;\n  border: hidden;\n  background-color: ",";\n  border-radius: 4px;\n  font-size: 16px;\n"])),(function(e){return e.theme.colors.textPrimary})),ps=Pe.button(ma||(ma=Yn(["\n  padding: 8px 16px;\n  background-color: ",";;\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 148px;\n  &:hover {\n    background-color: #F231A5\n  }\n\n  &:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary})),hs=(Pe.p(ga||(ga=Yn(["\n  color: #ff0000;\n"]))),n(97)),vs=n.n(hs),ms=(Pe.div(Va||(Va=Yn(["\n  width: 100%;\n // min-height: 100px;\n  display: flex;\n  align-items: center;\n"]))),Pe.div(Ha||(Ha=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])))),gs=Pe.button(Ga||(Ga=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 178px;\n  &:hover {\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor})),ys=function(t){var n=t.onCapture,r=(0,e.useRef)(null),o=qe((0,e.useState)(0),2),i=o[0],a=o[1],s=qe((0,e.useState)(!1),2),u=s[0],c=s[1];function l(e){return new Promise((function(t){setTimeout(t,e)}))}var f=function(){var e=go(vo().mark((function e(){var t,o,i;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!0),!(o=null===(t=r.current)||void 0===t?void 0:t.getScreenshot())){e.next=12;break}i=1;case 4:if(!(i<=10)){e.next=12;break}return e.next=7,l(1e3);case 7:n(o),a(i);case 9:i++,e.next=4;break;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,je.jsxs)(ms,{children:[(0,je.jsx)(vs(),{audio:!1,ref:r,screenshotFormat:"image/jpeg",style:{borderRadius:"10%",width:"300px"}}),(0,je.jsxs)(gs,{onClick:function(){return f()},disabled:u,children:["Capture Photo (",i,"/10)"]})]})};function xs(){var t=Zi(),n=t.register,r=t.handleSubmit,o=t.formState,i=qe((0,e.useState)([]),2),a=i[0],s=i[1],u=un();return(0,je.jsxs)(os,{children:[(0,je.jsxs)(is,{children:[(0,je.jsx)(us,{children:"Crie sua conta"}),(0,je.jsxs)(ls,{onSubmit:r((function(e){var t={email:e.email,phone:e.phone,password:e.password,codeAdm:e.codeAdm,image:a};console.log(t)})),children:[(0,je.jsx)(cs,{children:(0,je.jsx)(ys,{onCapture:function(e){a.push(e),s(a)}})}),(0,je.jsxs)(fs,{children:["Nome:",(0,je.jsx)(ds,ho(ho({type:"name"},n("name",{required:!0})),{},{disabled:o.isSubmitting}))]}),(0,je.jsxs)(fs,{children:["Email:",(0,je.jsx)(ds,ho(ho({type:"email"},n("email",{required:!0})),{},{disabled:o.isSubmitting}))]}),(0,je.jsxs)(fs,{children:["Senha:",(0,je.jsx)(ds,ho(ho({type:"password",minLength:8},n("password",{required:!0})),{},{disabled:o.isSubmitting}))]}),(0,je.jsxs)(fs,{children:["Codigo administrador:",(0,je.jsx)(ds,ho(ho({type:"text",minLength:8},n("codeAdm",{required:!0})),{},{disabled:o.isSubmitting}))]}),(0,je.jsxs)(ss,{children:[(0,je.jsx)(ps,{onClick:function(){return u("/")},disabled:o.isSubmitting,children:o.isSubmitting?"Aguarde...":"voltar"}),(0,je.jsx)(ps,{type:"submit",disabled:o.isSubmitting,children:o.isSubmitting?"Aguarde...":"entrar"})]})]})]}),(0,je.jsx)(as,{children:(0,je.jsx)(Na,{})})]})}var bs,ws,Cs,Ss,Es,ks,_s,Rs,Is,As,Ts,Ds,Ns=Pe.div(qa||(qa=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n"]))),Os=Pe.div(Ka||(Ka=Yn(["\n  width: 48%;\n  padding: 40px;\n  @media (max-width: 900px) {\n    width: 100%;\n  }\n"]))),Fs=Pe.div($a||($a=Yn(["\n  width: 90%;\n  height: 100%;\n  @media (max-width: 900px) {\n    width: 0%;\n    height: 0%;\n  }\n"]))),Ps=Pe.div(Xa||(Xa=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 14px;\n"]))),Ms=Pe.h1(Ya||(Ya=Yn(["\n  font-size: 22px;\n  margin: 0px 0px 16px 20px;\n"]))),Ls=(Pe.div(Qa||(Qa=Yn(["\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    color: #F231A5\n  }\n"]))),Pe.div(Ja||(Ja=Yn(["\n  font-size: 12px;\n  cursor: pointer;\n  &:hover {\n    color: #F231A5\n  }\n"]))),Pe.form(Za||(Za=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px;\n  gap: 20px;\n  @media (max-width: 900px) {\n    padding: 2px;\n  }\n"])))),Bs=Pe.label(es||(es=Yn(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin-bottom: 8px;\n  width: 400px;\n  gap:5px;\n  transition: 0.5s;\n  @media (max-width: 900px) {\n    width: 80%;\n  }\n  @media (max-width: 600px) {\n    width: 90%;\n  }\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5\n  }\n"]))),zs=Pe.input(ts||(ts=Yn(["\n  padding: 8px;\n  border: hidden;\n  background-color: ",";\n  border-radius: 4px;\n  font-size: 16px;\n"])),(function(e){return e.theme.colors.textPrimary})),js=Pe.button(ns||(ns=Yn(["\n  padding: 8px 16px;\n  background-color: ",";;\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 148px;\n  &:hover {\n    background-color: #F231A5\n  }\n\n  &:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary})),Ws=Pe.p(rs||(rs=Yn(["\n  color: #ff0000;\n"])));function Us(){var e=Zi(),t=e.register,n=e.handleSubmit,r=e.formState,o=un();return(0,je.jsxs)(Ns,{children:[(0,je.jsxs)(Os,{children:[(0,je.jsx)(Ms,{children:"Recuperar senha"}),(0,je.jsxs)(Ls,{onSubmit:n((function(e){console.log(e)})),children:[(0,je.jsxs)(Bs,{children:["Email para recuperar senha:",(0,je.jsx)(zs,ho(ho({type:"email"},t("email",{required:!0})),{},{disabled:r.isSubmitting})),r.errors.email&&(0,je.jsx)(Ws,{children:"Email \xe9 obrigat\xf3rio"})]}),(0,je.jsxs)(Ps,{children:[(0,je.jsx)(js,{onClick:function(){return o("/")},disabled:r.isSubmitting,children:r.isSubmitting?"Aguarde...":"voltar"}),(0,je.jsx)(js,{type:"submit",disabled:r.isSubmitting,children:r.isSubmitting?"Aguarde...":"enviar"})]})]})]}),(0,je.jsx)(Fs,{children:(0,je.jsx)(Na,{})})]})}var Vs,Hs,Gs=Pe.div(bs||(bs=Yn(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  width: 100vw;\n  height: 100vh;\n  padding: 0px 0px 0px 0px;\n"]))),qs=Pe.div(ws||(ws=Yn(["\n  font-size: 20px;\n  padding: 20px 0px 0px 60px;\n"]))),Ks=Pe.div(Cs||(Cs=Yn(["\n  gap: 10px;\n  width: auto;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  :hover{\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),$s=Pe.div(Ss||(Ss=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  height: 100%;\n  @media (max-width: 1100px) {\n    flex-direction: column;\n  }\n"]))),Xs=Pe.div(Es||(Es=Yn(["\n  img{\n    width: 400px;\n    height: 400px;\n    border-radius: 50%;\n    @media (max-width: 1100px) {\n      width: 300px;\n      height: 300px;\n    }\n    @media (max-width: 400px) {\n      width: 150px;\n      height: 150px;\n    }\n  }\n"]))),Ys=Pe.div(ks||(ks=Yn(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  width: 482px;\n  height: 542px;\n  background-color: rgb(25, 29, 63);\n  border-radius: 4%;\n  gap: 30px;\n  padding: 20px 60px;\n  @media (max-width: 1100px) {\n    width: 80%;\n    height: 52%;\n    padding: 20px;\n    gap: 20px;\n  }\n  @media (max-width: 400px) {\n    gap: 10px;\n    padding: 10px;\n  }\n"]))),Qs=Pe.div(_s||(_s=Yn(["\n  font-size: 25px;\n  @media (max-width: 400px) {\n    font-size: 20px;\n  }\n\n"]))),Js=Pe.div(Rs||(Rs=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-content: flex-start;\n  width: 100%;\n  gap: 40px;\n  @media (max-width: 400px) {\n    gap: 10px;\n  }\n"]))),Zs=Pe.div(Is||(Is=Yn(["\n  font-size: 20px;\n  @media (max-width: 400px) {\n    font-size: 16px;\n  }\n"]))),eu=Pe.div(As||(As=Yn(["\n  font-size: 20px;\n  @media (max-width: 400px) {\n    font-size: 16px;\n  }\n"])));Pe.div(Ts||(Ts=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 40px;\n"]))),Pe.button(Ds||(Ds=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 168px;\n  @media (max-width: 700px) {\n    width: 120px;\n  }\n  &:hover {\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor}));function tu(e){return Nr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}var nu,ru,ou,iu,au,su,uu,cu,lu,fu,du,pu=Pe.div(Vs||(Vs=Yn(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n"]))),hu=Pe.div(Hs||(Hs=Yn(["\n\tanimation: spin 2s linear infinite;\n\tborder: 10px solid #f7f7f7;\n\tborder-radius: 50%;\n\tborder-top: 10px solid #104079;\n\theight: 60px;\n\twidth: 60px;\n\t@keyframes spin {\n\t\t0% {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"]))),vu=function(){return(0,je.jsx)(pu,{children:(0,je.jsx)(hu,{})})},mu=n(4164),gu=Pe.div(nu||(nu=Yn(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  \n  background: transparent;\n  backdrop-filter: blur(5px);\n  @-moz-document url-prefix() {\n    & {\n      background: rgba(0, 0, 0, 0.75);\n    }\n  }\n  z-index: 10;\n"]))),yu=function(){return mu.createPortal((0,je.jsx)(gu,{}),document.getElementById("backdrop"))},xu=Pe.div(ru||(ru=Yn(["\n  z-index: 10;\n  position: fixed;\n  top:  ",";\n  left: 10%;\n  width: 80%;\n  min-width: 260px;\n  max-height: 80vh;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);\n  border-radius: 5px;\n  color: ",";\n  background-color: rgb(25, 29, 63);\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: 768px) {\n    left: calc(50% - ("," / 2));\n    width: ",";\n  }\n"])),(function(e){return e.top}),(function(e){return e.theme.colors.textSecondary}),(function(e){return e.width}),(function(e){return e.width})),bu=Pe.div(ou||(ou=Yn(["\n  position: relative;\n  flex-basis: 50px;\n  min-height: 50px;\n  background-color: rgb(25, 29, 63);\n  //background: ",";\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  padding: 0px;\n"])),(function(e){return e.theme.colors.backgroundHeaderModal}),(function(e){return e.theme.colors.textSecondary})),wu=Pe.h2(iu||(iu=Yn(["\n\n"]))),Cu=Pe.button(au||(au=Yn(["\n  cursor: pointer;\n  background-color: ",";\n  color: ",";\n  height: 20px;\n  width: 20px;\n  font-weight: 600;\n  border-color: transparent;\n  outline: none;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 95%;\n  top: 20%;\n"])),Me.HIGH_PURE,(function(e){return e.theme.colors.header})),Su=Pe.div(su||(su=Yn(["\n  padding: ",";\n  //max-height: calc(80vh - 130px);\n  overflow-y: none;\n  color: ",";\n"])),Be.SM,(function(e){return e.theme.colors.textPrimary})),Eu=Pe.div(uu||(uu=Yn(["\n  padding: ",";\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  gap: 20px;\n"])),Be.SM),ku=Pe.form(cu||(cu=Yn(["\n  overflow-y: auto;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n"]))),_u=function(e){var t=(0,je.jsxs)(xu,{className:e.modalClass,width:e.width,top:e.top,children:[(0,je.jsxs)(bu,{className:e.headerClass,children:[(0,je.jsx)(wu,{children:e.title}),e.showButtonClose?(0,je.jsx)(Cu,{onClick:e.onCancel,children:"X"}):""]}),(0,je.jsxs)(ku,{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[(0,je.jsx)(Su,{className:e.contentClass,children:e.children}),e.footer?(0,je.jsx)(Eu,{className:e.footerClass,children:e.footer}):""]})]});return mu.createPortal(t,document.getElementById("modal"))},Ru=function(e){return(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(yu,{}),(0,je.jsx)(_u,ho({},e))]})},Iu=Pe.div(lu||(lu=Yn(["\n  width: 100%;\n  min-height: 100px;\n  display: flex;\n  align-items: center;\n"]))),Au=Pe.p(fu||(fu=Yn(["\n  text-align: center;\n  color: ",";\n  margin-bottom: 10px;\n"])),(function(e){return e.theme.colors.textPrimary})),Tu=Pe.button(du||(du=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 178px;\n  &:hover {\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor})),Du=function(t){var n=un(),r=qe((0,e.useState)(!1),2),o=r[0],i=(r[1],function(){Wa(t.id).then((function(e){console.log(e),n(-1)})).catch((function(e){console.log(e)}))}),a=(0,je.jsx)(Iu,{children:(0,je.jsx)(Au,{children:"Deseja deletar essa conta e todos os visitantes relacioados ah essa conta?"})}),s=(0,je.jsx)(vu,{}),u=(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(Tu,{onClick:function(){return t.onCancel()},children:"voltar"}),(0,je.jsx)(Tu,{onClick:function(){return i},children:"deletar"})]});return(0,je.jsx)(Ru,{title:"EXCLUIR USU\xc1RIO",width:"500px",top:"38vh",showButtonClose:!1,children:o?s:a,footer:u,onCancel:t.onCancel,onSubmit:i})};function Nu(){var t=un(),n=qe((0,e.useState)(!1),2),r=n[0],o=n[1],i={id:1,name:"joao ryan",email:"test@gmail.com",img:no,phone:"(35) 9 99372979",cpf:"111.111.111-11","endere\xe7o":"Rua em algum lugar"};return(0,je.jsxs)(je.Fragment,{children:[r&&(0,je.jsx)(Du,{id:i.id,onCancel:function(){return o(!1)}}),(0,je.jsxs)(Gs,{children:[(0,je.jsx)(to,{}),(0,je.jsx)(qs,{children:(0,je.jsxs)(Ks,{onClick:function(){return t("/home")},children:[(0,je.jsx)(tu,{}),"voltar"]})}),(0,je.jsxs)($s,{children:[(0,je.jsx)(Xs,{children:(0,je.jsx)("img",{src:i.img})}),(0,je.jsxs)(Ys,{children:[(0,je.jsx)(Qs,{children:"Minhas informa\xe7\xf5es"}),(0,je.jsxs)(Js,{children:[(0,je.jsxs)("div",{children:[(0,je.jsx)(Zs,{children:"Nome"}),(0,je.jsx)(eu,{children:i.name})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)(Zs,{children:"CPF"}),(0,je.jsx)(eu,{children:i.cpf})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)(Zs,{children:"Endere\xe7o"}),(0,je.jsx)(eu,{children:i.endere\u00e7o})]}),(0,je.jsxs)("div",{children:[(0,je.jsx)(Zs,{children:"Telefone"}),(0,je.jsx)(eu,{children:i.phone})]})]})]})]})]})]})}var Ou=function(e,t){return(Ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Fu(e,t){function n(){this.constructor=e}Ou(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Pu(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Mu(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Lu=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],o=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,o)}))}},e}();function Bu(){return zu}var zu=null,ju=new Map,Wu=new Map;function Uu(e,t){var n=qu(e,t);return ju.get(n)}function Vu(e){for(var t=ju.entries(),n=[];;){var r=t.next(),o=r.done,i=r.value;if(o)break;var a=i[0],s=i[1];a.split("_")[0]===e&&n.push(s)}return n}function Hu(e){var t=e.kernelName,n=e.backendName,r=qu(t,n);if(ju.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");ju.set(r,e)}function Gu(e){var t=e.kernelName;Wu.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Wu.set(t,e)}function qu(e,t){return t+"_"+e}function Ku(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function $u(e,t,n){return Math.max(e,Math.min(t,n))}function Xu(e){return e%2==0?e:e+1}function Yu(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Qu(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ju(e,t,n){void 0===n&&(n=""),Qu(nc(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Zu(e){Qu(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function ec(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||mc(e)&&!n)for(var r=0;r<e.length;++r)ec(e[r],t,n);else t.push(e);return t}function tc(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function nc(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rc(e){return e%1==0}function oc(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function ic(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ac(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function sc(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,o){var i=0;!function a(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?o():setTimeout(a,s)}}()}))}function uc(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function cc(e,t){var n=t.length;return Qu((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Qu(e.every((function(e){return rc(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function lc(e,t){for(var n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||o?null:cc(t,e).sort(),a=0,s=0;s<e.length;++s){if(null!=i){if(i[a]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==i[a]||i[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function fc(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function dc(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function pc(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function hc(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function vc(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function mc(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function gc(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function yc(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function xc(e){return"string"==typeof e||e instanceof String}function bc(e){return"boolean"==typeof e}function wc(e){return"number"==typeof e}function Cc(e){return Array.isArray(e)?Cc(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":wc(e)?"float32":xc(e)?"string":bc(e)?"bool":"float32"}function Sc(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ec(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function kc(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function _c(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ec(e)),n&&pc(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function Rc(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var o=new Array;if(1===n.length)for(var i=n[0],a=0;a<i;a++)o[a]=r[t+a];else{i=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(a=0;a<i;a++)o[a]=e(t+a*u,s,r)}return o}(0,e,t)}function Ic(e,t){for(var n=Ac(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Ac(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Tc(){return Bu().platform.now()}function Dc(e){e.forEach((function(t){Qu(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Nc(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Bu().platform.encode(e,t)}function Oc(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Bu().platform.decode(e,t)}function Fc(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function Pc(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}Object.freeze({shuffle:Ku,clamp:$u,nearestLargerEven:Xu,sum:Yu,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:Qu,assertShapesMatch:Ju,assertNonNull:Zu,flatten:ec,sizeFromShape:tc,isScalarShape:function(e){return 0===e.length},arraysEqual:nc,isInt:rc,tanh:oc,sizeToSquarishShape:ic,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Ku(t),t},rightPad:ac,repeatedTry:sc,inferFromImplicitShape:uc,parseAxisParam:cc,squeezeShape:lc,getTypedArrayFromDType:fc,getArrayFromDType:dc,checkConversionForErrors:pc,isValidDtype:hc,hasEncodingLoss:vc,isTypedArray:mc,bytesPerElement:gc,bytesFromStringArray:yc,isString:xc,isBoolean:bc,isNumber:wc,inferDtype:Cc,isFunction:Sc,nearestDivisor:Ec,computeStrides:kc,toTypedArray:_c,toNestedArray:Rc,makeOnesTypedArray:Ic,makeZerosTypedArray:Ac,now:Tc,assertNonNegativeIntegerDimensions:Dc,fetch:function(e,t){return Bu().platform.fetch(e,t)},encodeString:Nc,decodeString:Oc,locToIndex:Fc,indexToLoc:Pc});var Mc=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Lc)}return e.prototype.profileKernel=function(e,t,n){var r,o=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var o=e[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),i.then((function(i){var a="";null!=i.getExtraProfileInfo&&(a=i.getExtraProfileInfo()),o.logger.logKernelProfile(e,n,r,i.kernelMs,t,a)}))}))})),r},e}(),Lc=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,o,i){var a="number"==typeof r?ac(r+"ms",9):r.error,s=ac(e,25),u=t.rank,c=t.size,l=ac(t.shape.toString(),14),f="";for(var d in o){var p=o[d].shape||t.shape,h=p.length;f+=d+": "+h+"D "+(h>0?p:"")+" "}console.log("%c"+s+"\t%c"+a+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+f+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),Bc=7;function zc(e,t,n){return ac(Array.isArray(e)?parseFloat(e[0].toFixed(Bc))+" + "+parseFloat(e[1].toFixed(Bc))+"j":xc(e)?"'"+e+"'":"bool"===n?jc(e):parseFloat(e.toFixed(Bc)).toString(),t)}function jc(e){return 0===e?"false":"true"}function Wc(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Uc=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=tc(e),null!=n){var o=n.length;Qu(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||dc(t,this.size),this.strides=kc(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Qu(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var o=this.locToIndex(n);this.values[o]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,o=e;r<o.length;r++){var i=o[r];if(i<0||i>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Vc().makeTensor(this.values,this.shape,this.dtype)},e}(),Vc=null,Hc=null,Gc=null,qc=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=tc(e),this.strides=kc(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Qu(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),this.reshape([e,t,n,r,o])},e.prototype.asType=function(e){return this.throwIfDisposed(),Hc.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Pu(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Hc.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Hc.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Pu(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Rc(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return Rc(this.shape,this.dataSync())},e.prototype.data=function(){return Pu(this,void 0,void 0,(function(){var e,t;return Mu(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Vc().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return Oc(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Vc().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Oc(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Pu(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Vc().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Vc().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Hc.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Hc.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Hc.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Hc.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Hc.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Hc.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Hc.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var o=kc(t),i=function(e,t,n,r){var o=tc(t),i=r[r.length-1],a=new Array(i).fill(0),s=t.length,u="complex64"===n?Wc(e):e;if(s>1)for(var c=0;c<o/i;c++)for(var l=c*i,f=0;f<i;f++)a[f]=Math.max(a[f],zc(u[l+f],0,n).length);return a}(e,t,n,o),a=t.length,s=function e(t,n,r,o,i,a){void 0===a&&(a=!0);var s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[zc(Wc(t)[0],0,r)]:"bool"===r?[jc(t[0])]:[t[0].toString()];if(1===c){if(u>20){var l=3*s,f=Array.from(t.slice(0,l)),d=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(f=Wc(f),d=Wc(d)),["["+f.map((function(e,t){return zc(e,i[t],r)})).join(", ")+", ..., "+d.map((function(e,t){return zc(e,i[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Wc(t):Array.from(t)).map((function(e,t){return zc(e,i[t],r)})).join(", ")+"]"]}var p=n.slice(1),h=o.slice(1),v=o[0]*s,m=[];if(u>20){for(var g=0;g<3;g++){var y=(x=g*v)+v;m.push.apply(m,e(t.slice(x,y),p,r,h,i,!1))}for(m.push("..."),g=u-3;g<u;g++)y=(x=g*v)+v,m.push.apply(m,e(t.slice(x,y),p,r,h,i,g===u-1))}else for(g=0;g<u;g++){var x;y=(x=g*v)+v,m.push.apply(m,e(t.slice(x,y),p,r,h,i,g===u-1))}var b=2===c?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var w=",\n";for(g=2;g<c;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(a?"":w),m}(e,t,n,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Hc.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Hc.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Hc.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Hc.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Hc.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Hc.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Hc.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Hc.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Hc.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Hc.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Hc.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Hc.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),Gc("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,r,n)},e.prototype.batchNorm=function(e,t,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),Hc.batchNorm(this,e,t,n,r,o)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Hc.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Hc.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Hc.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Hc.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Hc.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Hc.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Hc.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Hc.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Hc.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Hc.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Hc.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Hc.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Hc.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Hc.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),Hc.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Hc.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Hc.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Hc.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Hc.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Hc.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Hc.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Hc.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Hc.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Hc.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Hc.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Hc.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Hc.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Hc.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Hc.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Hc.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Hc.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Hc.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Hc.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Hc.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Hc.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Hc.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Hc.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Hc.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Hc.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Hc.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Hc.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Hc.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Hc.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Hc.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Hc.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Hc.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Hc.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Hc.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Hc.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Hc.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Hc.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Hc.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Hc.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Hc.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Hc.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Hc.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Hc.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Hc.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Hc.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Hc.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Hc.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Hc.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Hc.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Hc.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Hc.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Hc.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Hc.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Hc.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Hc.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Hc.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Hc.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Hc.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Hc.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Hc.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Hc.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Hc.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Hc.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Hc.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Hc.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Hc.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Hc.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Hc.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Hc.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Hc.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Hc.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Hc.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Hc.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Hc.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Hc.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),Hc.conv1d(this,e,t,n,r,o,i)},e.prototype.conv2d=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Hc.conv2d(this,e,t,n,r,o,i)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),Hc.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Hc.depthwiseConv2d(this,e,t,n,r,o,i)},e.prototype.separableConv2d=function(e,t,n,r,o,i){return void 0===o&&(o=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),Hc.separableConv2d(this,e,t,n,r,o,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Hc.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Hc.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Hc.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,o){return this.throwIfDisposed(),Hc.pool(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Vc().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Hc.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Hc.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Hc.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Hc.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o,i,a,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),this.throwIfDisposed(),Hc.stridedSlice(this,e,t,n,r,o,i,a,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Hc.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Hc.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Hc.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Hc.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Hc.spectral.irfft(this)},e}();Object.defineProperty(qc,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Kc,$c,Xc,Yc,Qc,Jc,Zc=function(e){function t(t,n,r,o){var i=e.call(this,t.shape,t.dtype,t.dataId,o)||this;return i.trainable=n,i.name=r,i}return Fu(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!nc(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Vc().disposeTensor(this),this.dataId=e.dataId,Vc().incRef(this,null)},t.prototype.dispose=function(){Vc().disposeVariable(this),this.isDisposedInternal=!0},t}(qc);Object.defineProperty(Zc,Symbol.hasInstance,{value:function(e){return e instanceof qc&&null!=e.assign&&e.assign instanceof Function}}),(Jc=Kc||(Kc={})).R0="R0",Jc.R1="R1",Jc.R2="R2",Jc.R3="R3",Jc.R4="R4",Jc.R5="R5",Jc.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}($c||($c={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Xc||(Xc={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Yc||(Yc={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Qc||(Qc={}));var el={float32:Yc,int32:$c,bool:Xc,complex64:Qc};function tl(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return el[e][t]}function nl(e){return tl(e,"int32")}function rl(e,t){if(e.dtype===t.dtype)return[e,t];var n=tl(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function ol(e,t){Qu(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function il(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof qc)n.push(t);else if(o=t,Array.isArray(o)||"object"==typeof o){var o,i=t;for(var a in i){var s=i[a];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:rl,assertTypesMatch:ol,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:il});var al,sl=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),ul=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new sl}return e.prototype.ready=function(){return Pu(this,void 0,void 0,(function(){var e,t,n;return Mu(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r;return Mu(this,(function(o){switch(o.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Mc(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;Vu(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;Vu(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,i=r.then((function(n){return!(o<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),o=r.success,i=r.asyncInit;if(i||o)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,o=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun((function(){return r.startScope(o)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,o){return this.runKernelFunc(null,t,null,e,n,r,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),o=0;n.forEach((function(e){o+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-o-i;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,o,i,a){var s,u=this;void 0===i&&(i=[]),void 0===a&&(a=[]);var c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var f,d=function(e){l&&(c=e.map((function(e){return u.keep(u.clone(e))})))},p=this.state.numBytes,h=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var v,m=Uu(r,this.backendName);return f=null!=m?function(){var e=u.backend.numDataIds();v=m.kernelFunc({inputs:t,attrs:o,backend:u.backend});var n=Array.isArray(v)?v:[v];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)})),c=s.filter((function(e,t){return a[t]}));return d((i||[]).slice().concat(c)),s}:function(){var t=u.backend.numDataIds();v=u.tidy((function(){return e(u.backend,d)}));var n=Array.isArray(v)?v:[v];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return f()})):f()})),l&&this.addTapeNode(r,t,s,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(v)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=e;"string"===n&&xc(e[0])&&(o=e.map((function(e){return Nc(e)})));var i=r.write(o,t,n),a=new qc(t,n,i,this.nextTensorId());if(this.incRef(a,r),"string"===n){var s=this.state.tensorInfo.get(i),u=yc(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return a},e.prototype.makeTensorFromDataId=function(e,t,n,r){var o=new qc(t,n=n||"float32",e,this.nextTensorId());return this.incRef(o,r),o},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var o=new Zc(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*gc(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Zc||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Pu(this,void 0,void 0,(function(){var t,n;return Mu(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,o){var i=this,a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=function(e){return Wu.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],o=Ac(r.size,r.dtype);return i.makeTensor(o,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],o)}),this.state.activeTape.push(a)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=il(e),r=new Set(n.map((function(e){return e.id}))),o=0;o<this.state.activeScope.track.length;o++){var i=this.state.activeScope.track[o];i.kept||r.has(i.id)||i.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==a.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),Qu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",e)}));Qu(i instanceof qc,(function(){return"The result y returned by f() must be a tensor."}));var a=function(e,t,n){for(var r={},o={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var a=(h=e[i]).inputs;for(var s in a){for(var u=a[s],c=!1,l=0;l<t.length;l++)if(r[u.id]){h.outputs.forEach((function(e){return r[e.id]=!0})),c=!0,o[h.id]=!0;break}if(c)break}}var f={};f[n.id]=!0;var d={};for(i=e.length-1;i>=0;i--)for(a=(h=e[i]).inputs,l=0;l<h.outputs.length;l++)if(f[h.outputs[l].id]){for(var s in a)f[a[s].id]=!0,d[h.id]=!0;break}var p=[];for(i=0;i<e.length;i++){var h;if(o[(h=e[i]).id]&&d[h.id]){var v={};for(var s in h.inputs){var m=h.inputs[s];r[m.id]&&(v[s]=m)}var g=Object.assign({},h);g.inputs=v,g.outputs=h.outputs,p.push(g)}}return p}(this.state.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[i.id]=null==n?(r=Ic(tc(e=i.shape),"float32"),cl.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var o=t[r],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var a=o.gradient(i),s=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".");var r=n((function(){return a[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=o.inputs[t];if(!nc(r.shape,i.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==e[i.id])e[i.id]=r;else{var s=e[i.id];e[i.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=t.length-1;o>=0;o--)r(o)}(s,a,(function(e){return o.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===o.state.gradientDepth&&(o.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),o.state.activeTape=null),{value:i,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return Qu(Sc(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];Qu(r.every((function(e){return e instanceof qc})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc((function(t,o){return Qu((n=e.apply(void 0,r.concat([o]))).value instanceof qc,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Qu(Sc(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),i,(function(e,t){var o=n.gradFunc(e,t),i=Array.isArray(o)?o:[o];Qu(i.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Qu(i.every((function(e){return e instanceof qc})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var a={};return i.forEach((function(e,t){a[t]=function(){return e}})),a}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Pu(this,void 0,void 0,(function(){var t,n;return Mu(this,(function(r){switch(r.label){case 0:return t=Tc(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Tc()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new sl,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),cl=function(){var e=function(){if(null==al){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}al=e}return al}();if(null==e._tfengine){var t=new Lu(e);e._tfengine=new ul(t)}return function(e){zu=e}(e._tfengine.ENV),Vc=function(){return e._tfengine},e._tfengine}();function ll(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var fl=Bu();fl.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),fl.registerFlag("IS_BROWSER",(function(){return ll()})),fl.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),fl.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),fl.registerFlag("PROD",(function(){return!1})),fl.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return fl.getBool("DEBUG")})),fl.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),fl.registerFlag("IS_TEST",(function(){return!1}));var dl,pl,hl,vl={},ml={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function gl(e,t){vl[e]=t}function yl(e){e in vl||(vl[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete vl[e]}),!1),1===e?t.getContext("webgl",ml)||t.getContext("experimental-webgl",ml):t.getContext("webgl2",ml)}(e));var t=vl[e];return t.isContextLost()?(delete vl[e],yl(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),vl[e])}function xl(e,t){return[t,e]}function bl(e){var t=tc(e);return ic(Math.ceil(t/4))}function wl(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Cl(e,t){var n,r,o,i,a,s,u,c,l,f=e;return 2===Bu().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,o=f.RGBA16F,i=f.RGBA32F,a=f.RED,s=4,u=1,c=f.HALF_FLOAT,l=f.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,i=f.RGBA,a=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function Sl(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+kl(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(dl||(dl={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(pl||(pl={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(hl||(hl={}));function El(e){return!!(Bu().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function kl(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function _l(e,t,n){return Xl(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Rl(e,t,n){var r=Xl(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Sl(e,t,(function(){return e.shaderSource(r,n)})),Sl(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Il(e,t,n){var r=Xl(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Sl(e,t,(function(){return e.shaderSource(r,n)})),Sl(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Dl.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),i=o.length.toString().length+2,a=o.map((function(e,t){return ac((t+1).toString(),i)+e})),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s);var c=a.slice(0,r-1),l=a.slice(r-1,r),f=a.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+ac(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Al,Tl,Dl=/ERROR: [0-9]+:([0-9]+):/g;function Nl(e,t){return Xl(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Ol(e,t,n){if(Sl(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Fl(e,t,n){if(Sl(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Pl(e,t,n){var r=Xl(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Sl(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Sl(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Ml(e,t,n){var r=Xl(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Sl(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),Sl(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Ll(e,t){return Xl(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Bl(e,t){var n=Bu().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function zl(e,t){return Xl(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function jl(e,t,n,r,o,i,a,s){var u=e.getAttribLocation(n,r);return-1!==u&&(Sl(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,o)})),Sl(e,t,(function(){return e.vertexAttribPointer(u,i,e.FLOAT,!1,a,s)})),Sl(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function Wl(e,t,n,r){Yl(e,r),Sl(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function Ul(e,t,n,r){return Xl(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function Vl(e,t,n){return e.getUniformLocation(t,n)}function Hl(e,t,n,r,o,i){Sl(e,t,(function(){return Wl(e,t,r,i)})),Sl(e,t,(function(){return e.uniform1i(o,i)}))}function Gl(e,t,n,r){Sl(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),Sl(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function ql(e,t,n){Sl(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Sl(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Kl(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+$l(e,t))}function $l(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Xl(e,t,n,r){var o=Sl(e,t,(function(){return n()}));if(null==o)throw new Error(r);return o}function Yl(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Ql(e,t){return void 0===t&&(t=2),tc(e.slice(0,e.length-t))}function Jl(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Zl(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Ql(e)].concat(Jl(e))),t}function ef(e,t){var n;void 0===t&&(t=!1);var r=Bu().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Xu(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var o=lc(e);e=o.newShape}var i=tc(e);if(e.length<=1&&i<=r)return[1,i];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=Ql(e),s=2,u=2;return e.length&&(s=(n=Jl(e))[0],u=n[1]),ic(i=a*(s/2)*(u/2)).map((function(e){return 2*e}))}return ic(i)}function tf(e){return e%2==0}function nf(e,t){if(nc(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(tf(n)&&tf(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&tf(e[0])&&tf(t[0])}function rf(e){if(null==Al){var t=yl(e);Al=t.getParameter(t.MAX_TEXTURE_SIZE)}return Al}function of(e){if(null==Tl){var t=yl(e);Tl=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Tl)}function af(e){if(0===e)return 0;var t=yl(e);return sf(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:sf(t,"EXT_disjoint_timer_query")?1:0}function sf(e,t){return null!=e.getExtension(t)}function uf(e){try{if(null!=yl(e))return!0}catch(e){return!1}return!1}function cf(e){if(0===e)return!1;var t=yl(e);if(1===e){if(!sf(t,"OES_texture_float"))return!1}else if(!sf(t,"EXT_color_buffer_float"))return!1;return ff(t)}function lf(e){if(0===e)return!1;var t=yl(e);if(1!==e){if(sf(t,"EXT_color_buffer_float"))return ff(t);if(sf(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=Cl(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),i}(t,n)}return!1}return!!sf(t,"OES_texture_float")&&!!sf(t,"WEBGL_color_buffer_float")&&ff(t)}function ff(e){var t=Cl(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function df(e){return 2===e&&null!=yl(e).fenceSync}var pf=Object.freeze({callAndCheck:Sl,canBeRepresented:El,getWebGLErrorMessage:kl,getExtensionOrThrow:_l,createVertexShader:Rl,createFragmentShader:Il,createProgram:Nl,linkProgram:Ol,validateProgram:Fl,createStaticVertexBuffer:Pl,createStaticIndexBuffer:Ml,getNumChannels:function(){return 2===Bu().getNumber("WEBGL_VERSION")?1:4},createTexture:Ll,validateTextureSize:Bl,createFramebuffer:zl,bindVertexBufferToProgramAttribute:jl,bindTextureUnit:Wl,unbindTextureUnit:function(e,t,n){Yl(e,n),Sl(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:Ul,getProgramUniformLocation:Vl,bindTextureToProgramUniformSampler:Hl,bindCanvasToFramebuffer:function(e,t){Sl(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),Sl(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),Sl(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:Gl,unbindColorTextureFromFramebuffer:ql,validateFramebuffer:Kl,getFramebufferErrorMessage:$l,getBatchDim:Ql,getRowsCols:Jl,getShapeAs3D:Zl,getTextureShapeFromLogicalShape:ef,isReshapeFree:nf,getWebGLMaxTextureSize:rf,resetMaxTextureSize:function(){Al=null},resetMaxTexturesInShader:function(){Tl=null},getMaxTexturesInShader:of,getWebGLDisjointQueryTimerVersion:af,hasExtension:sf,isWebGLVersionEnabled:uf,isCapableOfRenderingToFloatTexture:cf,isDownloadFloatTextureEnabled:lf,isWebGLFenceEnabled:df}),hf=Bu();function vf(e){Bu().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function mf(e,t){return cl.tidy(e,t)}function gf(e){il(e).forEach((function(e){return e.dispose()}))}function yf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Bu().getBool("IS_TEST")||console.warn.apply(console,e)}function xf(e,t){var n=e;if(mc(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||mc(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Bu().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||mc(t)){Qu(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Qu(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var o=n.slice(1),i=0;i<t.length;++i)e(t[i],o,r.concat(i))}else Qu(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function bf(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function wf(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof qc)return bf(r,e.dtype,t,n),e;var o=Cc(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),bf(r,o,t,n),null==e||!mc(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=xf(e,o);mc(e)||Array.isArray(e)||(e=[e]);var s="string"!==o?_c(e,o,Bu().getBool("DEBUG")):ec(e,[],!0);return cl.makeTensor(s,a,o)}function Cf(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return wf(e,t+"["+r+"]",n)}),r)}function Sf(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ef(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[i++]):o.push(t[a++]);return o}function kf(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((function(t){return e[t]}))]}function _f(e,t){return Ef(e,t.map((function(e){return 1})),t)}function Rf(e,t,n){Qu(Sf(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function If(e,t){if(Sf(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Af(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Tf(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Df(e,t){var n=e[0].length;e.forEach((function(e,t){Qu(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Qu(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,o){for(var i=0;i<n;i++)Qu(i===t||e[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function Nf(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Of(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];cl.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),cl.endScope(o),o}catch(e){throw cl.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}hf.registerFlag("HAS_WEBGL",(function(){return hf.getNumber("WEBGL_VERSION")>0})),hf.registerFlag("WEBGL_VERSION",(function(){return uf(2)?2:uf(1)?1:0})),hf.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===hf.get("WEBGL_VERSION")})),hf.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),hf.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),hf.registerFlag("WEBGL_PACK",(function(){return hf.getBool("HAS_WEBGL")})),hf.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_PACK_CLIP",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),hf.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_PACK_REDUCE",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_CONV_IM2COL",(function(){return hf.getBool("WEBGL_PACK")})),hf.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return rf(hf.getNumber("WEBGL_VERSION"))})),hf.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return of(hf.getNumber("WEBGL_VERSION"))})),hf.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=hf.getNumber("WEBGL_VERSION");return 0===e?0:af(e)})),hf.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return hf.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),hf.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return cf(hf.getNumber("WEBGL_VERSION"))})),hf.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!hf.getBool("WEBGL_FORCE_F16_TEXTURES")&&hf.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),hf.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return lf(hf.getNumber("WEBGL_VERSION"))})),hf.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return df(hf.getNumber("WEBGL_VERSION"))})),hf.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return hf.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Gc=vf;var Ff=Of({complex_:function(e,t){var n=wf(e,"real","complex"),r=wf(t,"imag","complex");return Ju(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),cl.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),Pf=Of({real_:function(e){var t=wf(e,"input","real");return cl.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Mf=Of({imag_:function(e){var t=wf(e,"input","imag");return cl.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Lf(e,t,n){return Bf(e,t,xf(e,n),n)}function Bf(e,t,n,r){if(null==r&&(r=Cc(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!mc(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Dc(t);var o=tc(t),i=tc(n);Qu(o===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+i}));for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==tc(t.slice(a));Qu(n[a]===t[a]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return mc(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?_c(e,r,Bu().getBool("DEBUG")):ec(e,[],!0),cl.makeTensor(e,t,r)}function zf(e,t){if((mc(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&mc(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bf(e,[],[],t)}function jf(e,t){Zu(e);var n=xf(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bf(e,null,n,t)}function Wf(e,t,n){if(Zu(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=xf(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bf(e,t,r,n)}function Uf(e,t,n){if(Zu(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=xf(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Bf(e,t,r,n)}function Vf(e,t,n){if(Zu(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=xf(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Bf(e,t,r,n)}function Hf(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Hf(e,"float32"),r=Gf(e,"float32");return Ff(n,r)}var o=Ic(tc(e),t);return cl.makeTensor(o,e,t)}function Gf(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Gf(e,"float32"),r=Gf(e,"float32");return Ff(n,r)}var o=Ac(tc(e),t);return cl.makeTensor(o,e,t)}function qf(e,t,n){return cl.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Kf(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Gf([0],r);var o=Ac(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return jf(o,r)}var $f=Of({onesLike_:function(e){var t=wf(e,"x","onesLike");if("complex64"===t.dtype){var n=$f(Pf(t)),r=Xf(Mf(t));return Ff(n,r)}return cl.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Xf(e)}}}))}}),Xf=Of({zerosLike_:function(e){var t=wf(e,"x","zerosLike");return cl.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Xf(e)}}}))}}),Yf=Of({concat_:function(e,t){void 0===t&&(t=0),Qu(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Cf(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=cc(t,n[0].shape)[0];var r=Nf(n.map((function(e){return e.shape})),t);if(0===tc(r))return Lf([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var o=n.map((function(e){return e.shape}));Df(o,t);var i=n,a={axis:t};return cl.runKernelFunc((function(e){return e.concat(n,t)}),i,(function(e){var n=o.map((function(e){return e[t]}));return td(e,n,t).map((function(e){return function(){return e}}))}),"Concat",a)}}),Qf=Of({concat1d_:function(e){return Yf(e,0)}}),Jf=Of({concat2d_:function(e,t){return Yf(e,t)}}),Zf=Of({concat3d_:function(e,t){return Yf(e,t)}}),ed=Of({concat4d_:function(e,t){return Yf(e,t)}}),td=Of({split_:function(e,t,n){void 0===n&&(n=0);var r,o=wf(e,"x","split");return n=cc(n,o.shape)[0],"number"==typeof t?(Qu(o.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(o.shape[n]/t)):(Qu(o.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),cl.runKernelFunc((function(e){return e.split(o,r,n)}),{$x:o},(function(e){return{$x:function(){return Yf(e,n)}}}))}});function nd(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var rd=nd((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.alea=i}(0,e)})),od=nd((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xor128=i}(0,e)})),id=nd((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)})),ad=nd((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.x&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)})),sd=nd((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=a,e.X=s,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.X&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)})),ud=nd((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.tychei=i}(0,e)})),cd=nd((function(e){!function(t,r){var o,i=this,a=256,s="random",u=r.pow(a,6),c=r.pow(2,52),l=2*c,f=a-1;function d(e,n,f){var d=[],g=v(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(a):(e=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,m(t)]}}():e,3),d),y=new p(d),x=function(){for(var e=y.g(6),t=u,n=0;e<c;)e=(e+n)*a,t*=a,n=y.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|y.g(4)},x.quick=function(){return y.g(4)/4294967296},x.double=x,v(m(y.S),t),(n.pass||f||function(e,t,n,o){return o&&(o.S&&h(o,y),e.state=function(){return h(y,{})}),n?(r[s]=e,t):e})(x,g,"global"in n?n.global:this==r,n.state)}function p(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=f&i+e[o%n]+(t=s[o])],s[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,s=r.S;e--;)t=s[o=f&o+1],n=n*a+s[f&(s[o]=s[i=f&i+t])+(s[i]=t)];return r.i=o,r.j=i,n})(a)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){for(var n,r=e+"",o=0;o<r.length;)t[f&o]=f&(n^=19*t[f&o])+r.charCodeAt(o++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=d,v(r.random(),t),e.exports){e.exports=d;try{o=n(4902)}catch(e){}}}([],Math)}));cd.alea=rd,cd.xor128=od,cd.xorwow=id,cd.xorshift7=ad,cd.xor4096=sd,cd.tychei=ud;var ld=cd.alea,fd=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=ld(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),dd=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var o=r||Math.random();this.randu=ld(o.toString()),this.randn=new fd(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,o,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(o=this.randu())<t||Math.log(o)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),pd=function(){function e(e,t,n,r){var o=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=ld(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function hd(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Dc(e),new Uc(e,t,n)}var vd=Of({batchToSpaceND_:function(e,t,n){var r=wf(e,"x","batchToSpaceND"),o=t.reduce((function(e,t){return e*t}));return Qu(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Qu(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Qu(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o})),cl.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),md=Of({broadcastTo_:function(e,t){var n=wf(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])i[a]=1;else if(1!==n.shape[a])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():cl.runKernelFunc((function(e){return e.tile(n,i)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),gd=Of({cast_:function(e,t){var n=wf(e,"x","cast");if(!hc(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return cl.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),yd=Of({clone_:function(e){var t=wf(e,"x","clone",null);return cl.runKernelFunc((function(){return cl.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),xd=Of({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=wf(e,"x","cumsum"),i=If([t|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var s=Tf(1,o.rank)[0],u=cl.runKernelFunc((function(e){return e.cumsum(a,s,n,r)}),{permutedX:a},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(u=u.transpose(i)),u}}),bd=Of({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=wf(e,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return Qu(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Qu(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Qu(a%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape})),cl.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),wd=Of({expandDims_:function(e,t){void 0===t&&(t=0);var n=wf(e,"x","expandDims",null);Qu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Qu(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Fd(n,r)}}),Cd=Of({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=hd([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return Bd(wd(s,0),[n[0],1,1]);if(2===n.length)return Bd(wd(wd(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Bd(wd(wd(wd(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Sd=Of({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=wf(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?o.as2D(1,-1):o,u=cl.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===a?u.as1D():u}}),Ed=Of({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=wf(e,"indices","oneHot","int32"),i=o.shape.concat([t]);return o=o.flatten(),cl.runKernelFunc((function(e){return e.oneHot(o,t,n,r)}),{$indices:o},(function(e){return{$indices:function(){return Gf(o.shape,"float32")}}})).reshape(i)}}),kd=Of({pad_:function(e,t,n){void 0===n&&(n=0);var r=wf(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return cl.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",o)}}),_d=Of({pad1d_:function(e,t,n){return void 0===n&&(n=0),Qu(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),kd(e,[t],n)}}),Rd=Of({pad2d_:function(e,t,n){return void 0===n&&(n=0),Qu(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),kd(e,t,n)}}),Id=Of({pad3d_:function(e,t,n){return void 0===n&&(n=0),Qu(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),kd(e,t,n)}}),Ad=Of({pad4d_:function(e,t,n){return void 0===n&&(n=0),Qu(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),kd(e,t,n)}}),Td=Of({rand_:function(e,t,n){var r=tc(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return cl.makeTensor(o,e,n)}}),Dd=Of({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new fd(t,n,r,!1,o),a=hd(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Nd=Of({randomGamma_:function(e,t,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new dd(t,n,r,o),a=hd(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Od=Of({randomUniform_:function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=hd(e,r),a=new pd(t,n,null,o),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Fd=Of({reshape_:function(e,t){var n=wf(e,"x","reshape",null);t=uc(t,n.size),Qu(n.size===tc(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return cl.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),Pd=Of({spaceToBatchND_:function(e,t,n){var r=wf(e,"x","spaceToBatchND");return Qu(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Qu(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Qu(r.shape.reduce((function(e,r,o){return o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),cl.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Md=Of({squeeze_:function(e,t){var n=wf(e,"x","squeeze");return Fd(n,lc(n.shape,t).newShape)}}),Ld=Of({stack_:function(e,t){void 0===t&&(t=0);var n=Cf(e,"tensors","stack");if(Qu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;Qu(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Ju(o,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Qu(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var a=n.map((function(e){return e.expandDims(t)}));return Yf(a,t)}}),Bd=Of({tile_:function(e,t){var n=wf(e,"x","tile",null);Qu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],o={reps:t};return cl.runKernelFunc((function(e,r){var o=e.tile(n,t);return r([n]),o}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=Xf(r);if(1===r.rank)for(var o=0;o<t[0];++o)n=n.add(e.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<t[0];++o)for(var i=0;i<t[1];++i)n=n.add(e.slice([o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(var a=0;a<t[2];++a)n=n.add(e.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(a=0;a<t[2];++a)for(var s=0;s<t[3];++s)n=n.add(e.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",o,r)}}),zd=Of({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new fd(t,n,r,!0,o),a=hd(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),jd=Of({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=wf(e,"x","unstack");Qu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return cl.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Ld(e,t)}}}),"Unpack",r)}});function Wd(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function Ud(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function Vd(e,t,n,r){void 0===r&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function Hd(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Gd(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function qd(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=e.shape,s=n.slice();s.pop();var u=1;for(i=r;i<e.rank;++i)u*=a[i],s.push(a[i]);var c=kc(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,o,u,c]}Object.freeze({prepareAndValidate:qd});var Kd=30;function $d(e){return e<=Kd?e:Ec(e,Math.floor(Math.sqrt(e)))}function Xd(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+e[a+o]+")")}function Yd(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Xd(n,t,e)}function Qd(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,a=1,s=o;s<i;++s)a*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:tc(t.shape)/u,sliceSize:a,strides:kc(n.slice(0,o)).concat([1]),outputSize:tc(n)}}Object.freeze({validateUpdateShape:Xd,validateInput:Yd,calculateShapes:Qd});function Jd(e,t,n){Qu(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Qu(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Qu(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},o=0;o<e.rank;++o)r(o)}function Zd(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function ep(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function tp(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||null==i)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),$u(0,i,s-1)}function np(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||null==i)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),a>0?$u(0,i,s):$u(-1,i,s-1)}function rp(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function op(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Jd,maskToAxes:Zd,computeOutShape:ep,startForAxis:tp,stopForAxis:np,isSliceContinous:rp,computeFlatOffset:op});function ip(e){return cl.customGrad(e)}var ap=Of({softmax_:function(e,t){void 0===t&&(t=-1);var n=wf(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return cl.runKernelFunc((function(e,r){var o=e.softmax(n,t);return r([o]),o}),{logits:n},(function(e,n){var r=n[0],o=e.mul(r);return{logits:function(){return o.sub(o.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),sp=Of({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=wf(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return ip((function(e,n){var r=e.max(t,!0),o=e.sub(r),i=o.toFloat().sub(o.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),up=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),cp=function(){function e(){}return e.prototype.time=function(e){return lp("time")},e.prototype.read=function(e){return lp("read")},e.prototype.readSync=function(e){return lp("readSync")},e.prototype.numDataIds=function(){return lp("numDataIds")},e.prototype.disposeData=function(e){return lp("disposeData")},e.prototype.write=function(e,t,n){return lp("write")},e.prototype.move=function(e,t,n,r){return lp("move")},e.prototype.memory=function(){return lp("memory")},e.prototype.floatPrecision=function(){return lp("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return lp("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,lp("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return lp("slice")},e.prototype.stridedSlice=function(e,t,n,r){return lp("stridedSlice")},e.prototype.unstack=function(e,t){return lp("unstack")},e.prototype.reverse=function(e,t){return lp("reverse")},e.prototype.concat=function(e,t){return lp("concat")},e.prototype.neg=function(e){return lp("neg")},e.prototype.add=function(e,t){return lp("add")},e.prototype.addN=function(e){return lp("addN")},e.prototype.subtract=function(e,t){return lp("subtract")},e.prototype.multiply=function(e,t){return lp("multiply")},e.prototype.realDivide=function(e,t){return lp("realDivide")},e.prototype.floorDiv=function(e,t){return lp("floorDiv")},e.prototype.sum=function(e,t){return lp("sum")},e.prototype.prod=function(e,t){return lp("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return lp("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return lp("argMin")},e.prototype.argMax=function(e,t){return lp("argMax")},e.prototype.equal=function(e,t){return lp("equal")},e.prototype.notEqual=function(e,t){return lp("notEqual")},e.prototype.less=function(e,t){return lp("less")},e.prototype.lessEqual=function(e,t){return lp("lessEqual")},e.prototype.greater=function(e,t){return lp("greater")},e.prototype.greaterEqual=function(e,t){return lp("greaterEqual")},e.prototype.logicalNot=function(e){return lp("logicalNot")},e.prototype.logicalAnd=function(e,t){return lp("logicalAnd")},e.prototype.logicalOr=function(e,t){return lp("logicalOr")},e.prototype.where=function(e){return lp("where")},e.prototype.select=function(e,t,n){return lp("select")},e.prototype.topk=function(e,t,n){return lp("topk")},e.prototype.min=function(e,t){return lp("min")},e.prototype.minimum=function(e,t){return lp("minimum")},e.prototype.mod=function(e,t){return lp("mod")},e.prototype.max=function(e,t){return lp("max")},e.prototype.maximum=function(e,t){return lp("maximum")},e.prototype.all=function(e,t){return lp("all")},e.prototype.any=function(e,t){return lp("any")},e.prototype.squaredDifference=function(e,t){return lp("squaredDifference")},e.prototype.ceil=function(e){return lp("ceil")},e.prototype.floor=function(e){return lp("floor")},e.prototype.round=function(e){return lp("round")},e.prototype.sign=function(e){return lp("sign")},e.prototype.isNaN=function(e){return lp("isNaN")},e.prototype.isInf=function(e){return lp("isInf")},e.prototype.isFinite=function(e){return lp("isFinite")},e.prototype.pow=function(e,t){return lp("pow")},e.prototype.exp=function(e){return lp("exp")},e.prototype.expm1=function(e){return lp("expm1")},e.prototype.softmax=function(e,t){return lp("softmax")},e.prototype.log=function(e){return lp("log")},e.prototype.log1p=function(e){return lp("log1p")},e.prototype.sqrt=function(e){return lp("sqrt")},e.prototype.rsqrt=function(e){return lp("rsqrt")},e.prototype.square=function(e){return lp("square")},e.prototype.reciprocal=function(e){return lp("reciprocal")},e.prototype.relu=function(e){return lp("relu")},e.prototype.relu6=function(e){return lp("relu6")},e.prototype.prelu=function(e,t){return lp("prelu")},e.prototype.elu=function(e){return lp("elu")},e.prototype.eluDer=function(e,t){return lp("eluDer")},e.prototype.selu=function(e){return lp("selu")},e.prototype.int=function(e){return lp("int")},e.prototype.clip=function(e,t,n){return lp("clip")},e.prototype.abs=function(e){return lp("abs")},e.prototype.complexAbs=function(e){return lp("complexAbs")},e.prototype.sigmoid=function(e){return lp("sigmoid")},e.prototype.softplus=function(e){return lp("softplus")},e.prototype.sin=function(e){return lp("sin")},e.prototype.cos=function(e){return lp("cos")},e.prototype.tan=function(e){return lp("tan")},e.prototype.asin=function(e){return lp("asin")},e.prototype.acos=function(e){return lp("acos")},e.prototype.atan=function(e){return lp("atan")},e.prototype.atan2=function(e,t){return lp("atan2")},e.prototype.sinh=function(e){return lp("sinh")},e.prototype.cosh=function(e){return lp("cosh")},e.prototype.tanh=function(e){return lp("tanh")},e.prototype.asinh=function(e){return lp("asinh")},e.prototype.acosh=function(e){return lp("acosh")},e.prototype.atanh=function(e){return lp("atanh")},e.prototype.erf=function(e){return lp("erf")},e.prototype.step=function(e,t){return lp("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,lp("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return lp("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return lp("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return lp("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,lp("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return lp("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return lp("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return lp("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return lp("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return lp("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return lp("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return lp("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return lp("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return lp("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return lp("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return lp("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return lp("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return lp("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return lp("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return lp("reshape")},e.prototype.cast=function(e,t){return lp("cast")},e.prototype.tile=function(e,t){return lp("tile")},e.prototype.pad=function(e,t,n){return lp("pad")},e.prototype.transpose=function(e,t){return lp("transpose")},e.prototype.gather=function(e,t,n){return lp("gather")},e.prototype.gatherND=function(e,t){return lp("gatherND")},e.prototype.scatterND=function(e,t,n){return lp("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return lp("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return lp("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return lp("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return lp("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return lp("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return lp("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,o,i){return lp("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){return lp("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,o,i,a){return lp("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return lp("multinomial")},e.prototype.oneHot=function(e,t,n,r){return lp("oneHot")},e.prototype.cumsum=function(e,t,n,r){return lp("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return lp("nonMaxSuppression")},e.prototype.fft=function(e){return lp("fft")},e.prototype.ifft=function(e){return lp("ifft")},e.prototype.complex=function(e,t){return lp("complex")},e.prototype.real=function(e){return lp("real")},e.prototype.imag=function(e){return lp("imag")},e.prototype.cropAndResize=function(e,t,n,r,o,i){return lp("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return lp("depthToSpace")},e.prototype.split=function(e,t,n){return lp("split")},e.prototype.sparseToDense=function(e,t,n,r){return lp("sparseToDense")},e.prototype.diag=function(e){return lp("diag")},e.prototype.fill=function(e,t,n){return lp("fill")},e.prototype.onesLike=function(e){return lp("onesLike")},e.prototype.zerosLike=function(e){return lp("zerosLike")},e.prototype.linspace=function(e,t,n){return lp("linspace")},e.prototype.dispose=function(){return lp("dispose")},e}();function lp(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function fp(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r}function dp(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(null==o||1===o&&a>1)&&n.unshift(i)}return n}function pp(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];null==i&&(i=1);var a=t[t.length-o-1];if(null==a&&(a=1),1===i)n.unshift(a);else if(1===a)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function hp(e,t,n,r,o,i,a){void 0===a&&(a="channelsLast");var s,u=xp(t),c=u[0],l=u[1];if("channelsLast"===a)s=[c,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);s=[c,l,e[1],e[1]]}return mp(e,s,n,r,o,i,!1,a)}function vp(e,t,n,r,o,i,a){void 0===a&&(a="NDHWC");var s,u,c=bp(t),l=c[0],f=c[1],d=c[2];if("NDHWC"===a)u="channelsLast",s=[l,f,d,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[l,f,d,e[1],e[1]]}return gp(e,s,n,r,o,!1,u,i)}function mp(e,t,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],d=u[3];if("channelsLast"===s)c=e[0],l=e[1],f=e[2],d=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=e[0],d=e[1],l=e[2],f=e[3]}var p,h=t[0],v=t[1],m=t[3],g=xp(n),y=g[0],x=g[1],b=xp(r),w=b[0],C=b[1],S=wp(h,w),E=wp(v,C),k=function(e,t,n,r,o,i,a,s){var u,c,l;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,o){null==r&&(r=yp(e,t,n));var i=e[1],a=Cp((e[0]-t+2*r)/n+1,o);Qu(rc(a),(function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"}));var s=Cp((i-t+2*r)/n+1,o);return Qu(rc(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[a,s]}([t,n],i,r,e,s);c=f[0],l=f[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/o);var d=Math.max(0,(c-1)*r+i-t),p=Math.max(0,(l-1)*o+a-n),h=Math.floor(d/2),v=d-h,m=Math.floor(p/2);u={top:h,bottom:v,left:m,right:p-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),l=Math.ceil((n-a+1)/o)}return{padInfo:u,outHeight:c,outWidth:l}}(o,l,f,y,x,S,E,i),_=k.padInfo,R=k.outHeight,I=k.outWidth,A=a?m*d:m;return"channelsFirst"===s?p=[c,A,R,I]:"channelsLast"===s&&(p=[c,R,I,A]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:f,inChannels:d,outHeight:R,outWidth:I,outChannels:A,padInfo:_,strideHeight:y,strideWidth:x,filterHeight:h,filterWidth:v,effectiveFilterHeight:S,effectiveFilterWidth:E,dilationHeight:w,dilationWidth:C,inShape:e,outShape:p,filterShape:t}}function gp(e,t,n,r,o,i,a,s){void 0===i&&(i=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],d=u[3],p=u[4];if("channelsLast"===a)c=e[0],l=e[1],f=e[2],d=e[3],p=e[4];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=e[0],p=e[1],l=e[2],f=e[3],d=e[4]}var h,v=t[0],m=t[1],g=t[2],y=t[4],x=bp(n),b=x[0],w=x[1],C=x[2],S=bp(r),E=S[0],k=S[1],_=S[2],R=wp(v,E),I=wp(m,k),A=wp(g,_),T=function(e,t,n,r,o,i,a,s,u,c,l){var f,d,p,h;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,o,i){null==o&&(o=yp(e,t,r));var a=e[1],s=e[2],u=Cp((e[0]-t+2*o)/r+1,i);Qu(rc(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var c=Cp((a-t+2*o)/r+1,i);Qu(rc(c),(function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var l=Cp((s-t+2*o)/r+1,i);return Qu(rc(l),(function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"})),[u,c,l,1]}([t,n,r,1],s,0,o,e,l);d=v[0],p=v[1],h=v[2]}else if("same"===e){var m=((d=Math.ceil(t/o))-1)*o+s-t,g=((p=Math.ceil(n/i))-1)*i+u-n,y=((h=Math.ceil(r/a))-1)*a+c-r,x=Math.floor(m/2),b=m-x,w=Math.floor(g/2),C=g-w,S=Math.floor(y/2);f={top:w,bottom:C,left:S,right:y-S,front:x,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/o),p=Math.ceil((n-u+1)/i),h=Math.ceil((r-c+1)/a)}return{padInfo:f,outDepth:d,outHeight:p,outWidth:h}}(o,l,f,d,b,w,C,R,I,A,s),D=T.padInfo,N=T.outDepth,O=T.outHeight,F=T.outWidth,P=i?y*p:y;return"channelsFirst"===a?h=[c,P,N,O,F]:"channelsLast"===a&&(h=[c,N,O,F,P]),{batchSize:c,dataFormat:a,inDepth:l,inHeight:f,inWidth:d,inChannels:p,outDepth:N,outHeight:O,outWidth:F,outChannels:P,padInfo:D,strideDepth:b,strideHeight:w,strideWidth:C,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:R,effectiveFilterHeight:I,effectiveFilterWidth:A,dilationDepth:E,dilationHeight:k,dilationWidth:_,inShape:e,outShape:h,filterShape:t}}function yp(e,t,n,r){void 0===r&&(r=1);var o=wp(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function xp(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function bp(e){return"number"==typeof e?[e,e,e]:e}function wp(e,t){return t<=1?e:e+(e-1)*(t-1)}function Cp(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Sp(e){var t=xp(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function Ep(e,t){return Sp(e)||Sp(t)}function kp(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function _p(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Gf(e.shape),o=e.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!vc(e.dtype,t))return cl.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var a=n.real(e);return i=a.cast(t),a.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var s=zf(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Rp(e,t){return cl.makeTensorFromDataId(e.dataId,t,e.dtype)}function Ip(e,t,n){var r=(t-e)/(n-1),o=Ac(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return jf(o,"float32")}Object.freeze({castTensor:_p,reshapeTensor:Rp,linspaceImpl:Ip,upcastType:tl,axesAreInnerMostDims:Sf,combineLocations:Ef,computeOutAndReduceShapes:kf,expandShapeToKeepDim:_f,assertAxesAreInnerMostDims:Rf,getAxesPermutation:If,getUndoAxesPermutation:Af,getInnerMostAxes:Tf,getBroadcastDims:fp,getReductionAxes:dp,assertAndGetBroadcastShape:pp,assertParamsConsistent:Df,computeOutShape:Nf,computePool2DInfo:hp,computePool3DInfo:vp,computeConv2DInfo:mp,computeConv3DInfo:gp,computeDefaultPad:yp,tupleValuesAreOne:Sp,eitherStridesOrDilationsAreOne:Ep,convertConv2DDataFormat:kp,PARALLELIZE_THRESHOLD:Kd,computeOptimalWindowSize:$d});function Ap(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Tp(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Dp(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Np(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Op(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,o=e.length,i=0,a=!1;r<o;){var s=n(t,e[i=r+(o-r>>>1)]);s>0?r=i+1:(o=i,a=!s)}return a?r:-r-1}(e,t,n||Fp)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function Fp(e,t){return e>t?1:e<t?-1:0}function Pp(e,t,n,r,o){return Lp(e,t,n,r,o,0).selectedIndices}function Mp(e,t,n,r,o,i){var a=Lp(e,t,n,r,o,i,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function Lp(e,t,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>o})).sort(jp),c=i>0?-.5/i:0,l=[],f=[];l.length<n&&u.length>0;){var d=u.pop(),p=d.score,h=d.boxIndex,v=d.suppressBeginIndex;if(p<o)break;for(var m=!1,g=l.length-1;g>=v;--g){var y=Bp(e,h,l[g]);if(y>=r){m=!0;break}if(d.score=d.score*zp(r,c,y),d.score<=o)break}d.suppressBeginIndex=l.length,m||(d.score===p?(l.push(h),f.push(d.score)):d.score>o&&Op(u,d,jp))}var x=l.length;return s&&(l.fill(0,x),f.fill(0,x)),{selectedIndices:jf(l,"int32"),selectedScores:jf(f,"float32"),numValidOutputs:zf(x,"int32")}}function Bp(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),d=Math.max(o[1],o[3]),p=(s-i)*(u-a),h=(f-c)*(d-l);if(p<=0||h<=0)return 0;var v=Math.max(i,c),m=Math.max(a,l),g=Math.min(s,f),y=Math.min(u,d),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(p+h-x)}function zp(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function jp(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Wp(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map((function(t){o[n]=t;var i=e.slice(r,o);return r[n]+=t,i}))}function Up(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=hd(n,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=i[s]%e.shape[s];var u=e.locToIndex(a);o.values[r]=e.values[u]}return o.toTensor()}function Vp(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],s=a[0],u=a[1],c=fc(n,s*r),l=fc("int32",s*r),f=0;f<s;f++){for(var d=f*u,p=e.subarray(d,d+u),h=[],v=0;v<p.length;v++)h.push({value:p[v],index:v});h.sort((function(e,t){return t.value-e.value}));var m=f*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r);for(v=0;v<r;v++)g[v]=h[v].value,y[v]=h[v].index}var x=t.slice();return x[x.length-1]=r,[Lf(c,x,n),Lf(l,x,"int32")]}function Hp(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=hd(e,"int32"),i=hd([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),s=r*e.length;i.values.set(a,s)}return i.toTensor()}var Gp=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},qp=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Kp=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function $p(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Xp(e,t){return 1===t?[e]:$p(e,t)}function Yp(){var e,t,n,r,o,i,a,s,u,c;return 2===Bu().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Qp(e,t,n){void 0===n&&(n="index");var r=kc(t);return r.map((function(t,o){return"int "+e[o]+" = "+n+" / "+t+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+t:"index -= "+e[o]+" * "+t)+";"})).join("")}function Jp(e){var t=kc(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Zp="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function eh(e,t,n,r){var o=[];e.forEach((function(e){var t=tc(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(o.push("uniform sampler2D "+e.name+";"),o.push("uniform int offset"+e.name+";"))}));var i,a,s=o.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?nh(e):th(e);var o=e.shapeInfo.logicalShape,i=t.logicalShape;return o.length<=i.length&&(r+=n?function(e,t){var n,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=fp(e.shapeInfo.logicalShape,t.logicalShape),c=ch(s),l=s-a,f=["x","y","z","w","u","v"];n=0===a?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+f[e+l]+" = 0;"})).join("\n");var d;d=s<2&&a>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+l]})).join(", ");var p="return outputValue;",h=1===tc(e.shapeInfo.logicalShape),v=1===tc(t.logicalShape);if(1!==a||h||v){if(h&&!v)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=a-2,g=a-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?p="return vec4(outputValue.x);":u.indexOf(m)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+d+");\n      "+p+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&nc(a,i))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c,l=ch(u),f=fp(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords."+p[e+d]+" = 0;"})).join("\n");var h;return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+p[t+d]})).join(", "),"\n    float "+o+"() {\n      "+l+" coords = getOutputCoords();\n      "+c+"\n      return get"+r+"("+h+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),c=t.texShape,l=Yp(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(l),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+rh+"\n    "+oh+"\n    "+ih+"\n  "}(l);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(nc(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),i=o,a="",s="b, r, c",u=2;u<e.length-1;u++)a="\n      int b"+u+" = index / "+(i*=e[e.length-u-1])+";\n      index -= b"+u+" * "+i+";\n    "+a,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,o,i,a}(t.logicalShape,c),a=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(l)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return nc(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Qp(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Qp(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Qp(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Qp(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),a=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(d+=ah),[d,f,a,s,i,u,n].join("\n")}function th(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===o&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a[0]+", "+a[1]+", "+sh(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+uh(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=sh(t);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+i+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&nc(t,o)){var i=o[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var a=lc(t),s=a.newShape,u=a.keptDims,c=s;if(c.length<t.length)return"\n      "+th(lh(e,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+fh(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+uh(e)+"\n      }\n    ";var l=o[0],f=o[1],d=sh(n);return 1===f?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===l?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+l+", "+f+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],i=t[2],a=lc(t),s=a.newShape,u=a.keptDims,c=s;if(c.length<t.length)return"\n        "+th(lh(e,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+fh(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+i+", 1)));\n        "+uh(e)+"\n      }\n    ";var l=e.shapeInfo.texShape,f=l[0],d=l[1],p=e.shapeInfo.flatOffset;return d===o&&null==p?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+d+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":d===i&&null==p?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+d+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+i+" + depth + "+sh(n)+";\n        vec2 uv = uvFromFlat("+f+", "+d+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],i=t[2]*o,a=t[1]*i,s=lc(t),u=s.newShape,c=s.keptDims;if(u.length<t.length)return"\n      "+th(lh(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+fh(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+a+", "+i+", "+o+", 1)));\n        "+uh(e)+"\n      }\n    ";var l=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],p=f[1];return p===a&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+i+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+d+", "+p+", index + "+sh(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,a=t[2]*i,s=t[1]*a,u=lc(t),c=u.newShape,l=u.keptDims;if(c.length<t.length)return"\n      "+th(lh(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+fh(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+a+", "+i+", "+o+")) +\n          depth3;\n        "+uh(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];return h===s&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+a+", "+i+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===o&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+a+" + depth * "+i+" +\n          depth2 * "+o+" + depth3 + "+sh(n)+";\n      vec2 uv = uvFromFlat("+p+", "+h+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=lc(t),i=o.newShape,a=o.keptDims;if(i.length<t.length)return"\n      "+th(lh(e,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+fh(["row","col","depth","depth2","depth3","depth4"],a)+");\n      }\n    ";var s=t[5],u=t[4]*s,c=t[3]*u,l=t[2]*c,f=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+f+", "+l+", "+c+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+uh(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],v=p[1];return v===f&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===s&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+f+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+sh(n)+";\n      vec2 uv = uvFromFlat("+h+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function nh(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Yp().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Yp();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=o[0],a=o[1],s=Yp();if(null!=o&&nc(t,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+i+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===t[0])return"\n        "+nh(lh(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+fh(["b","row","col"],[1,2])+");\n        }\n      ";var a=i[0],s=i[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+a+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+Yp().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=a[0],u=a[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * "+l+" + (row / 2) * "+c+" + (col / 2)",p=2;p<n-1;p++)f="int b"+p+", "+f,d="b"+p+" * "+(l*=t[n-p-1])+" + "+d;return"\n    vec4 "+o+"("+f+") {\n      int index = "+d+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Yp().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var rh="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",oh="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ih="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ah="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function sh(e){return"offset"+e}function uh(e){var t=e.name,n=tc(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function ch(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function lh(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function fh(e,t){return t.map((function(t){return e[t]})).join(", ")}var dh=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Qu(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,c=u.length,l=ch(c),f=Xp("coords",c);if(1===i){var d=ch(s=c+1);a="\n        "+d+" sourceLocR = "+d+"("+f.join()+", 0);\n        ++"+f[c-1]+";\n        "+d+" sourceLocG = "+d+"("+f.join()+", 0);\n        ++"+f[c-2]+";\n        "+d+" sourceLocA = "+d+"("+f.join()+", 0);\n        --"+f[c-1]+";\n        "+d+" sourceLocB = "+d+"("+f.join()+", 0);\n        --"+f[c-2]+";"}else s=c,a="\n        "+l+" sourceLocR = coords;\n        ++"+f[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+f[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+f[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+f[c-2]+";";var p=["x","y","z","w","u","v"].slice(0,s),h="."+p[s-1],v=p.map((function(e){return"int "+e})),m=Xp("sourceLocR",s-1).concat("inIdx.r"),g=Xp("sourceLocG",s-1).concat("inIdx.g"),y=Xp("sourceLocB",s-1).concat("inIdx.b"),x=Xp("sourceLocA",s-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+x.join()+")));",C="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+x.join()+") : 0.)",S=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+p.join()+"),\n                                          vec2("+p.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+p.join()+"),\n                               vec2("+p.slice(-2).join()+"));\n      }\n      "+S+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+f[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+f[c-2]+" < "+(u[c-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+h+", sourceLocG"+h+",\n          sourceLocB"+h+", sourceLocA"+h+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},ph=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.top,l=u-1-e.padInfo.left,f=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+f+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},hh=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=l-1-e.padInfo.front,h=f-1-e.padInfo.top,v=d-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+p+", "+h+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vh=function(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],pp(e,t),pp(e,n);var a="0.0";null!=r&&(pp(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=o&&(pp(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},mh=function(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],pp(e,t),pp(e,n);var a="vec4(0.0)";null!=r&&(pp(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(pp(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},gh=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=pp(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},yh="return a + b;",xh="return a - b;",bh="return a * b;",wh="return (a < 0.) ? b * a : a;",Ch=function(e,t,n){this.variableNames=["A","B"],this.outputShape=pp(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Sh="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Eh=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=pp(t,n);var o=this.outputShape.length,i="";if(r)if(0===o||1===tc(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+ch(o)+" coords = getOutputCoords();\n        ",1===o)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var a=Xp("coords",o);i+="\n            bool nextRowOutOfBounds =\n              ("+a[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+a[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},kh=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),_h=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Rh=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Ih=function(e){this.outputShape=[],this.outputShape=Nf(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=t.length,a=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Ah=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Nf(e,t);var n=this.outputShape,r=n.length,o=ch(r),i=Xp("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var c=a[t],l=a.slice(-2),f=a.join(),d="if ("+c+" < "+s[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+l.join()+"));\n        }";for(u=1;u<s.length;u++){var p=s[u-1];d+="\n        if ("+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+Th(a,c,p)+"),\n            vec2("+Th(l,c,p)+"));\n        }"}var h=s.length,v=s[s.length-1];d+="\n        return getChannel(\n          getT"+h+"("+Th(a,c,v)+"),\n          vec2("+Th(l,c,v)+"));",this.userCode="\n      float getValue("+a.map((function(e){return"int "+e}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};function Th(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var Dh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Nh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=i?1:2,c=i?2:3,l=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Oh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+o+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Fh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ph=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Mh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Lh=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4,h="channelsLast"===e.dataFormat,v=h?1:2,m=h?2:3,g=h?3:1,y="",x="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",x="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+s+");\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+h+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===p)+") {\n\n              if ("+h+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===p)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+h+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===p)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+h+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+x+"\n        setOutput(result);\n      }\n    "},Bh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,f=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),h=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===h)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+p+") *\n                  getW(wF, wR, wC, "+p+", d2);\n              } else if ("+(2===h)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===h)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1),\n                  getX(batch, xF, xR, xC, "+p+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2),\n                  getW(wF, wR, wC, "+p+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},zh=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=e.outChannels/e.inChannels,v="",m="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},jh=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=p,v="int xR; int xC; int xCOffset;",m=0;m<d;m++)for(var g=0;g<p;g++)v+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<d;m++)for(var y=0;y<h;y++){if(v+="\n          xR = xRCorner + "+m*l+";\n          xC = xCCorner + "+(g=2*y)*f+";\n        ",1===c){if(g<p&&(v+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<p)){var x=s%2==0?Xu(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(v+="\n                  xCOffset = xC + "+s%2+" + "+x+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+x+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<p&&(v+="\n              if(xR >= 0 && xR < "+o+") {\n            ",s%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<p&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<p&&(v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),v+="}");g<p&&(v+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<p&&(v+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<d;m++)for(g=0;g<p;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var b="",w="";n&&(b=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+w+"\n        setOutput(result);\n      }\n    "},Wh=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],a=e[1],s=e[2],u=e[3],c=t[0],l=n[0],f=n[1];this.outputShape=[c,l,f,u];var d="bilinear"===r?1:0,p=[a-1+".0",s-1+".0"],h=p[0],v=p[1],m=l>1?[""+(a-1)/(l-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],g=m[0],y=m[1],x=m[2],b=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=b[0],C=b[1],S=b[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+x+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+S+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Uh=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+ch(r)+" coords = getOutputCoords();\n        int end = "+Vh(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Vh(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Vh(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Hh=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=dl.DENSE;var t=bl(e),n=Yp();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Qp(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Gh=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=dl.DENSE;var t=bl(e),n=Yp();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Qp(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},qh=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Kh=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},$h=function(e){this.variableNames=["A"],this.outTexUsage=pl.DOWNLOAD;var t=Yp();this.outputShape=e,this.userCode="\n      "+Zp+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Xh=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=pl.DOWNLOAD;var t=Yp();this.outputShape=e,this.userCode="\n      "+Zp+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Yh=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Yp(),o=t[0],i=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+Jp(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},Qh=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Yp(),o=t[0],i=t[1];this.outputShape=e;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;a+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Jp(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+a+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Jh=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+i+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Zh=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),ev=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=ch(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<e.length;i++)i===t?o.push("int(getIndices("+r[i]+"))"):o.push(""+r[i]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},tv=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=ch(t.length),o=ch(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function nv(e,t){var n=Yp();return Rl(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function rv(e,t){return Pl(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ov(e,t){return Ml(e,t,new Uint16Array([0,1,2,2,1,3]))}function iv(e,t,n,r,o,i,a){Bl(n,r);var s=Ll(e,t),u=e.TEXTURE_2D;return Sl(e,t,(function(){return e.bindTexture(u,s)})),Sl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Sl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Sl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Sl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Sl(e,t,(function(){return e.texImage2D(u,0,o,n,r,0,i,a,null)})),Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function av(e,t,n,r,o){var i=xl(n,r);return iv(e,t,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function sv(e,t,n,r,o){var i=xl(n,r);return iv(e,t,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function uv(e,t,n,r,o){var i=xl(n,r);return iv(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function cv(e,t,n,r,o){var i=wl(n,r);return iv(e,t,i[0],i[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function lv(e,t,n,r,o){var i=wl(n,r);return iv(e,t,i[0],i[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function fv(e,t,n,r){return Sl(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),jl(e,t,n,"clipSpacePos",r,3,20,0)&&jl(e,t,n,"uv",r,2,20,12)}function dv(e,t,n,r,o,i,a){var s,u,c;Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,c=a.internalFormatPackedFloat),s.set(i),Sl(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,o,0,e.RGBA,u,s)})),Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function pv(e,t,n,r){Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?Sl(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):Sl(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),Sl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function hv(e,t,n,r,o){var i=e.createBuffer();Sl(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var a=16*n*r;return Sl(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)})),Sl(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),Sl(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}function vv(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function mv(e,t,n,r,o){var i=xl(n,r),a=i[0],s=i[1],u=new Uint8Array(n*r*4);return Sl(e,t,(function(){return e.readPixels(0,0,a,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function gv(e,t,n,r,o,i,a,s){var u=e,c=new Float32Array(function(e,t){var n=wl(e,t);return n[0]*n[1]*4}(i,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function yv(e,t,n,r){var o=new Float32Array(n*r*4);return Sl(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)})),o}var xv=Object.freeze({createVertexShader:nv,createVertexBuffer:rv,createIndexBuffer:ov,createFloat32MatrixTexture:av,createFloat16MatrixTexture:sv,createUnsignedBytesMatrixTexture:uv,createPackedMatrixTexture:cv,createFloat16PackedMatrixTexture:lv,bindVertexProgramAttributeStreams:fv,uploadDenseMatrixToTexture:dv,uploadPixelDataToTexture:pv,createBufferFromOutputTexture:hv,downloadFloat32MatrixFromBuffer:vv,downloadByteEncodedFloatMatrixFromOutputTexture:mv,downloadPackedMatrixFromBuffer:gv,downloadMatrixFromPackedOutputTexture:yv}),bv=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Bu().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,gl(t,e)):this.gl=yl(t);var n="WEBGL_color_buffer_float";if(1===Bu().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=_l(this.gl,this.debug,"OES_texture_float"),sf(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=_l(this.gl,this.debug,"OES_texture_half_float");else if(Bu().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),sf(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=_l(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Bu().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",sf(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!sf(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=rv(this.gl,this.debug),this.indexBuffer=ov(this.gl,this.debug),this.framebuffer=zl(this.gl,this.debug),this.textureConfig=Cl(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Bu().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Sl(t,this.debug,(function(){return t.finish()})),Sl(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),Sl(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),Sl(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),Sl(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),Sl(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),av(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),sv(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),uv(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),pv(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),dv(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),lv(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),cv(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(ql(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Sl(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return mv(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,o,i){return gv(this.gl,e,0,0,0,o,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return vv(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=hv(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Bu().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(i,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=i}else Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return yv(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Il(t,this.debug,e),r=nv(t,this.debug),o=Nl(t,this.debug);return Sl(t,this.debug,(function(){return t.attachShader(o,r)})),Sl(t,this.debug,(function(){return t.attachShader(o,n)})),Ol(t,this.debug,o),this.debug&&Fl(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=fv(t,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Sl(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Fl(this.gl,this.debug,this.program),Sl(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Ul(this.gl,this.debug,e,t):Vl(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Sl(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Hl(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=wl(t,n),o=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,o,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Fl(this.gl,this.debug,this.program),Kl(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Sl(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Sl(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=_l(this.gl,this.debug,2===Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Pu(this,void 0,void 0,(function(){var t=this;return Mu(this,(function(n){switch(n.label){case 0:return[4,sc((function(){return t.disposed||t.isQueryAvailable(e,Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||sc((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Gl(this.gl,this.debug,e,this.framebuffer),this.debug&&Kl(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Gl(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Kl(this.gl)):ql(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Gl(r,this.debug,e,this.framebuffer),this.debug&&Kl(r),this.outputTexture=e,Sl(r,this.debug,(function(){return r.viewport(0,0,t,n)})),Sl(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),Sl(this.gl,this.debug,(function(){return o.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function wv(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,o=t[n],i=o.shape;if(!nc(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!nc(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}}))}var Cv=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,f=n.dataFormat,d=s.left,p=s.top,h=o*r,v=Yp(),m="channelsLast"===f,g=m?0:1,y=m?1:2,x="",b=0;b<=1;b++)for(var w=0;w<=1;w++)x+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+a+" - "+p+";\n            d0 = offsetY + "+l+" * (pos / "+h+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+i+". - "+d+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+h+".) / "+o+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+x+"\n\n        "+v.output+" = result;\n      }\n    "},Sv=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},Ev=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},kv=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},_v=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,s=i-1-e.padInfo.left,u=o*i-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Rv=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.front,f=u-1-e.padInfo.top,d=c-1-e.padInfo.left,p=s*u*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+f+", "+d+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+p+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Iv=function(e,t,n,r,o,i,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",h="";i&&(p=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",h="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+d[0]+");\n          result += ("+f[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},Av=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Tv=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Dv=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Xp("rc",t),r=ch(t),o=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",o=e-2;o<e;o++)r+=n[o]+" >= "+t[o],o<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var i=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),a=2;a<e;a++)i=t[t.length-1-a]+","+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},Nv=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,o=ch(r),i=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Ov=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,o=ch(r),i=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Xp("rc",r),u=Xp("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",h=0,v=1===r?2:4;h<v;h++)p+="\n        "+f[h]+"\n        if ("+d+") {\n          result["+h+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+h+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";p+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+i+");\n      const "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+p+"\n        setOutput(result);\n      }\n    "},Fv=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var d="avg"===t,p="0.0";if(d||(p="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+i+");\n        const ivec2 pads = ivec2("+l+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var h=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(h="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+d+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+l+", "+f+");\n      const float initializationValue = "+p+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+p+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+h+");\n      }\n    "}},Pv=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,h=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+i+", "+a+");\n        const ivec3 pads = ivec3("+p+", "+h+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+f+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+d+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+f+" * "+d+" +\n                      wR * "+d+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var x=4*Math.floor(r/4),b=r%4,w="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+p+", "+h+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+x+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+x+";\n            if ("+(1===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},Mv=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(a="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+p+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},Lv=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Qp(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Jp(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Bv=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],c=[n&&s>1?o-1:o,n&&u>1?i-1:i],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=c[0]/l[0],d=c[1]/l[1],p=1/f,h=1/d,v=2*Math.ceil(p)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},zv=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},jv=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Wv=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],c=[n&&s>1?o-1:o,n&&u>1?i-1:i],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=c[0]/l[0],d=c[1]/l[1],p=1/f,h=1/d,v=2*Math.ceil(p)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Uv=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Vv=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),o=ch(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Hv=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Xp("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=ch(n);function s(n){var r=e.map((function(r,o){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+o+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Gv=function(e,t,n,r,o,i,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=ch(o.length),u=ch(i.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",f="";1===r?f="i":2===r&&(f="i, coords[1]");var d="getUpdates("+f+")",p=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+p+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},qv=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";o%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Kv=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&a.push(""+i[u]);r=a.join(),o=s.join()}var c=ch(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},$v=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=ch(this.rank),r="uniform int start["+this.rank+"];",o=function(e){if(1===e)return"sourceLoc";if(e<=6)return Xv.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Xv[t]+" = start["+t+"] + coords."+Xv[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+o+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Xv=["x","y","z","w","u","v"],Yv=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=ch(this.rank),n=Xp("coords",this.rank),r=Xp("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+o+")",a="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Qv=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=ch(n.length),i=ch(n.length),a="";if(1===r)a="coords * strides + begin";else{var s=0;a=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+e+");\n      "+o+" strides = "+o+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},Jv=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,o=Zv(t,n),i=em(e,o,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),o===hl.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===hl.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===hl.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===hl.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===hl.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var o=em(t,Zv(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],a=i.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Zv(e,t){if(e===pl.UPLOAD)return hl.PACKED_2X2_FLOAT32;if(e===pl.RENDER||null==e)return function(e){return Bu().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?hl.PACKED_2X2_FLOAT32:hl.UNPACKED_FLOAT32:e?hl.PACKED_2X2_FLOAT16:hl.UNPACKED_FLOAT16}(t);if(e===pl.DOWNLOAD||e===pl.PIXELS)return hl.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function em(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var tm=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=ch(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},nm=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=ch(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},rm=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=ch(this.rank),i=$p("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=i[r];var s="vec2("+a.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+a.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},om=1.7580993408473768,im=1.0507009873554805,am=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},sm="if (isnan(x)) return x;",um="return abs(x);",cm=sm+"\n  return (x < 0.0) ? 0.0 : x;\n",lm=sm+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",fm="return (x >= 0.0) ? x : (exp(x) - 1.0);",dm="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+om+";\n  float scale = "+im+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",pm="return -x;",hm="return ceil(x);",vm="return floor(x);",mm="return exp(x);",gm="return exp(x) - 1.0;",ym=sm+"\n  return sin(x);\n",xm=sm+"\n  return cos(x);\n",bm=sm+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",wm=sm+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",Cm=sm+"\n  return atan(x);\n",Sm=sm+"return log(x + sqrt(x * x + 1.0));",Em=sm+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",km=sm+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",_m="return x;",Rm="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Im="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Am="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Tm=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Dm=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Xp("rc",t),r=ch(t),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},Nm={};function Om(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?Rm:cm;if("elu"===e)return t?Am:fm;if("relu6"===e)return t?Im:lm;if("prelu"===e)return t?Sh:wh;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var Fm=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Bu().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var o=yl(Bu().getNumber("WEBGL_VERSION"));r.binaryCache=((n=Bu().getNumber("WEBGL_VERSION"))in Nm||(Nm[n]={}),Nm[n]),r.gpgpu=new bv(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Jv(r.gpgpu),r.numMBBeforeWarning=null==Bu().global.screen?1024:Bu().global.screen.height*Bu().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new up(r,cl),r}return Fu(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(Bu().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:pl.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(Bu().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:pl.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,o=t.complexTensors,i=t.slice,a=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new Tm(a,_m):new am(a,_m);var c=this.runWebGLProgram(u,[{dataId:e,shape:a,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,p=null!=this.activeTimers;return p&&(f=Tc()),d="complex64"===r?Ap(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=Tc()-f),this.convertAndCacheOnCPU(e,d)},t.prototype.read=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,u,c,l,f,d,p,h,v,m,g,y,x,b,w,C;return Mu(this,(function(S){switch(S.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,o=n.shape,i=n.slice,a=n.dtype,s=n.complexTensors,u=n.isPacked,null!=i)return void 0,c=u?new Tm(o,_m):new am(o,_m),l=this.runWebGLProgram(c,[{dataId:e,shape:o,dtype:a}],a),f=this.read(l.dataId),this.disposeData(l.dataId),[2,f];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!Bu().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Bu().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==a&&Bu().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(e),h=this.texData.get(p.dataId),d=(C=this.gpgpu).createBufferFromTexture.apply(C,[h.texture].concat(bl(o)))),this.pendingRead.set(e,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:S.sent(),S.label=2;case 2:return"complex64"!==a?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return m=S.sent(),g=m[0],y=m[1],v=Ap(g,y),[3,5];case 4:null==d?v=this.getValuesFromTexture(e):(x=tc(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(d,x)),S.label=5;case 5:return null!=p&&this.disposeData(p.dataId),b=this.convertAndCacheOnCPU(e,v),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(b)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,b]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!El(n)){if(Bu().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,i=n.isPacked,a=tc(r);if(Bu().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(bl(r))).subarray(0,a);return this.disposeData(s.dataId),c}var l=Bu().getBool("WEBGL_PACK")&&!0===i,f=l?Zl(r):r,d=l?new Xh(f):new $h(f),p=this.runWebGLProgram(d,[{shape:f,dtype:o,dataId:e}],"float32"),h=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,a);return this.disposeData(p.dataId),v},t.prototype.time=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r,o,i,a,s;return Mu(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=ec(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=ec(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return s=u.sent(),a.kernelMs=Yu(s),a.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:a.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Tc(),endMs:null}},t.prototype.endTimer=function(e){return Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Tc(),e)},t.prototype.getQueryTime=function(e){return Pu(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){return Bu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,o=t.texShape,i=t.usage,a=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,i,a)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Bu().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=cl.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:cl.keep(e.clone()),imag:cl.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===tc(n))return Lf([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,o=rp(e.shape,t,n);if(r||!o){var i=Bu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yv(n):new $v(n),a=i.getCustomSetupFunc(t);return this.compileAndRun(i,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),o=this.makeOutput(n,e.dtype),i=this.texData.get(o.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var a=op(t,e.strides);r.slice&&(a+=r.slice.flatOffset),i.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,s+1),o},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var o=ep(t,n,r);if(o.some((function(e){return 0===e})))return Lf([],o);var i=new Qv(t,r,o);return this.compileAndRun(i,[e])},t.prototype.reverse=function(e,t){var n=Bu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Hv(e.shape,t):new Vv(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return Pf(e)})),r=e.map((function(e){return Mf(e)}));return Ff(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Bu().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(e.length/2),i=this.concat(e.slice(0,o),t),a=this.concat(e.slice(o),t);return this.concat([i,a],t)}if(Bu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new Ah(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=Nf(e.map((function(e){return e.shape})),t),c=e.map((function(e){return e.as2D(-1,tc(e.shape.slice(t)))})),l=new Ih(c.map((function(e){return e.shape})));return this.compileAndRun(l,c).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,pm,e.dtype);var t=new am(e.shape,pm);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var o=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===o||1===i)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===i?e:e.as3D(s,a,1),c=1===i?2:1,l=1===i?t.as3D(s,1,a):t;return this.multiply(u,l).sum(c,!0)}var f=tl(e.dtype,t.dtype),d=new Iv(e.shape,[s,o,i],n,r);return this.compileAndRun(d,[e,t],f)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,i=e.bias,a=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],c=o?n.shape[1]:n.shape[2],l=t.shape[0],f=tl(t.dtype,n.dtype),d=null!=i,p=null!=s,h=a?Om(a,!0):null,v=new Iv(t.shape,[l,u,c],r,o,d,h,p),m=[t,n];return i&&m.push(i),s&&m.push(s),this.compileAndRun(v,m,f)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),o=new gh("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new gh("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(o,a),u=this.compileAndRun(i,a),c=this.complex(s,u);return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,bh,e.dtype);var l=new Ch(bh,e.shape,t.shape);return this.compileAndRun(l,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,i){var a=[e,t,n],s=null;null!=i&&(s=i.shape,a.push(i));var u=null;if(null!=o&&(u=o.shape,a.push(o)),Bu().getBool("WEBGL_PACK_NORMALIZATION")){var c=new mh(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,a)}var l=new vh(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,a)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){var i=Bu().getBool("WEBGL_PACK_NORMALIZATION")?new kv(e.shape,t,n,r,o):new Sv(e.shape,t,n,r,o);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,t,n,r,o,i,a){var s=new Ev(t.shape,r,o,i,a);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return Oc(e)}));return Up(hd(e.shape,e.dtype,n),t)}var r=new tm(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=Bu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ov(e.shape,t,n):new Nv(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Bu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rm(e.shape,t):new nm(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new ev(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){Qu(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=Wd(e.shape,t,r),i=Ud(o.length,t.length),a=Vd(e.shape,t,r),s=Hd(n,t.length),u=Gd(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){Qu(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),s=Wd(a.shape,t,r,!1),u=Ud(s.length,t.length,!1),c=Vd(a.shape,t,r,!1);return a.reshape(s).transpose(u).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],i=$d(o),a=new Mv({windowSize:i,inSize:o,batchSize:r},t),s=this.compileAndRun(a,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=$d(o),a=new Kp({windowSize:i,inSize:o,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(a,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,o=$d(r[r.length-1]),i=new dh(r,o,t,null==n),a=null==n?[e]:[e,n],s=this.compileAndRun(i,a,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){Rf("sum",t,e.rank);var n=kf(e.shape,t),r=n[0],o=tc(n[1]),i=e.as2D(-1,o),a=nl(e.dtype);return this.reduce(i,"sum",a).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=kf(e.shape,t),r=n[0],o=tc(n[1]),i=e.as2D(-1,o),a=nl(e.dtype);return this.reduce(i,"prod",a).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=If([r],e.rank),i=e;null!=o&&(i=e.transpose(o),r=Tf(1,e.rank)[0]);var a=function(e,t,n){for(var r=[],o=e.length,i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),s=tc([i.shape[r]]),u=i.as2D(-1,s),c=nl(e.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",t,c,n).reshape(a);return null!=o&&(l=l.transpose(Af(o))),l},t.prototype.segOpCompute=function(e,t,n,r,o){var i=e.shape[0],a=e.shape[1],s=function(e,t){var n,r=!1;for(e<=Kd?(n=e,r=!0):n=Ec(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Ec(e,n+1);return n}(a,o),u=new qv({windowSize:s,inSize:a,batchSize:i,numSegments:o},t),c=this.compileAndRun(u,[e,n],r);return c.shape[1]===o?c:(n=Kf(0,o).tile([a/s]),this.segOpCompute(c,t,n,r,o))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(Rf("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Bu().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=kf(e.shape,r),i=o[0],a=tc(o[1]),s=e.as2D(-1,a);return this.argReduce(s,n).reshape(i)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new Uh(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.equal=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new Ch("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Ch("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Ch("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Ch("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Ch("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Ch("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new am(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Ch("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Ch("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Kv(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],tl(t.dtype,n.dtype))},t.prototype.where=function(e){yf("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Hp(e.shape,t)},t.prototype.topk=function(e,t,n){return Vp(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Rf("min",t,e.rank);var n=kf(e.shape,t),r=n[0],o=tc(n[1]),i=e.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ch("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ch("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);Rf("max",t,e.rank);var n=kf(e.shape,t),r=n[0],o=tc(n[1]),i=e.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ch("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){Rf("all",t,e.rank);var n=kf(e.shape,t),r=n[0],o=tc(n[1]),i=e.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(e,t){Rf("any",t,e.rank);var n=kf(e.shape,t),r=n[0],o=tc(n[1]),i=e.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new Ch("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Ch("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,yh);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=tl(e.dtype,t.dtype);if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,yh,n);var r=new Ch(yh,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new Tm(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,o){void 0===o&&(o=!1);var i=new Eh(n,e.shape,t.shape,o);return this.compileAndRun(i,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,o=this.texData.get(e.dataId),i=this.texData.get(t.dataId),a=[[o.complexTensors.real,i.complexTensors.real],[o.complexTensors.imag,i.complexTensors.imag]].map((function(o){var i=o[0],a=o[1],s=r.makeComplexComponentTensorInfo(e,i),u=r.makeComplexComponentTensorInfo(t,a),c=new Ch(n,e.shape,t.shape);return r.compileAndRun(c,[s,u],tl(i.dtype,a.dtype))})),s=a[0],u=a[1],c=this.complex(s,u);return s.dispose(),u.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Bu().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var o=e.map((function(e){return e.dtype})).reduce((function(e,t){return tl(e,t)})),i=e.map((function(e){return e.shape})),a=Bu().getBool("WEBGL_PACK")?new qp(e[0].shape,i):new Gp(e[0].shape,i);return this.compileAndRun(a,e,o)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,xh);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=tl(e.dtype,t.dtype);if(Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,xh,e.dtype);var r=new Ch(xh,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ch("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=tl(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,hm,e.dtype);var t=new am(e.shape,hm);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,vm,e.dtype);var t=new am(e.shape,vm);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new am(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new am(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new am(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new am(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new am(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,mm,e.dtype);var t=new am(e.shape,mm);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gm,e.dtype);var t=new am(e.shape,gm);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=cc([t],e.shape),r=this.max(e,n),o=_f(r.shape,n),i=this.subtract(e,r.reshape(o)),a=this.exp(i),s=this.sum(a,n).reshape(o);return this.realDivide(a,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new am(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new am(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new am(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new am(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new am(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=Bu().getBool("WEBGL_PACK")?new Tm(e.shape,Rm):new am(e.shape,cm),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=Bu().getBool("WEBGL_PACK")?new Tm(e.shape,Im):new am(e.shape,lm),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh(Sh,e.shape,t.shape):new Ch(wh,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Am,e.dtype);var t=new am(e.shape,fm);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new Ch("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new am(e.shape,dm);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new am(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,o=(r=Bu().getBool("WEBGL_PACK_CLIP")?new _h(e.shape):new kh(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Bu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,um,e.dtype);var t=new am(e.shape,um);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new Rh(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new am(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new am(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new am(e.shape,ym);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new am(e.shape,xm);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new am(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new am(e.shape,bm);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new am(e.shape,wm);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new am(e.shape,Cm);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ch("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new am(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new am(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new am(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new am(e.shape,Sm);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new am(e.shape,Em);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new am(e.shape,km);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new am(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new am(e.shape,function(e){return void 0===e&&(e=0),sm+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,o,i){var a=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,c=a[0]*a[1]*a[2],l=n.outChannels,f="channelsLast"===n.dataFormat,d=(1===c||1===l)&&u>1e3,p=a[2]%2!=0&&!!s.isPacked;if(d||!Bu().getBool("WEBGL_LAZILY_UNPACK")||!Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!p){var h=f?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],v=this.reshape(e,[1,h,n.inChannels]),m=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:m,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),n.outShape)}var g=f?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),y={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},x=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,Qu(nf(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var b=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:b,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),C=this.texData.get(w.dataId);return Qu(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=x,C.shape=n.outShape,cl.makeTensorFromDataId(w.dataId,n.outShape,w.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,o,i){var a=n.filterWidth,s=n.filterHeight,u=n.inChannels,c=n.outWidth,l=n.outHeight,f="channelsLast"===n.dataFormat,d=a*s*u,p=l*c,h=[d,p],v=e.squeeze([0]),m=t.reshape([1,d,-1]),g=new Cv(h,v.shape,n),y=this.compileAndRun(g,[v]).reshape([1,h[0],h[1]]),x=null!=r,b=null!=i,w=o?Om(o,!0):null,C=new Iv(y.shape,[1,p,n.outChannels],!0,!1,x,w,b),S=[y,m];r&&S.push(r),b&&S.push(i);var E=this.compileAndRun(C,S);return f?E.reshape([1,l,c,n.outChannels]):E.reshape([1,n.outChannels,l,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,o,i,a);if(Bu().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,o,i,a);var s=null!=o,u=null!=a,c=i?Om(i,!1):null,l=new Lh(r,s,c,u),f=[t,n];return o&&f.push(o),a&&f.push(a),this.compileAndRun(l,f)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Bu().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Lh(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Nh(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Dh(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,o=e.convInfo,i=e.bias,a=e.activation,s=e.preluActivationWeights,u=Bu().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,c=a?Om(a,u):null,l=[n,r],f=null!=i,d=null!=s;return f&&l.push(i),d&&l.push(s),u?(t=new jh(o,f,c,d),this.compileAndRun(t,l)):(t=new zh(o,f,c,d),this.compileAndRun(t,l))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return Bu().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new jh(n),this.compileAndRun(r,[e,t])):(r=new zh(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Mh(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Ph(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Bh(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new Fh(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Oh(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Fv(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Fv(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var o=new Fv(r,"max",!0),i=this.compileAndRun(o,[t]),a=new _v(r),s=this.compileAndRun(a,[e,i],t.dtype);return i.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new ph(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return _p(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,i=0;i<e.rank;i++)i!==t&&(r[o++]=e.shape[i]);var a=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(i=0;i<u.length;i++)a[t]=i,u[i]=this.slice(e,a,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new Pv(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new hh(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Pv(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var o=new Pv(r,"max",!0),i=this.compileAndRun(o,[t]),a=new Rv(r),s=this.compileAndRun(a,[e,i],t.dtype);return i.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!nf(e.shape,t)&&(null===n.texture||!nf(n.shape,t))){var r=this.packedReshape(e,t);return cl.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Rp(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var o=Bu().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new jv(e.shape,t,n,r):new zv(e.shape,t,n,r);return this.compileAndRun(o,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Bv(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new Uv(e.shape,t,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Wv(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var o=t?e:ap(e),i=o.shape[0],a=o.shape[1],s=new Av(i,a,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var o=new Tv(e.size,t,n,r);return this.compileAndRun(o,[e])},t.prototype.diag=function(e){var t=new Kh(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return yf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Pp(e.dataSync(),t.dataSync(),n,r,o)},t.prototype.cropAndResize=function(e,t,n,r,o,i){var a=new Wh(e.shape,t.shape,r,o,i);return this.compileAndRun(a,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){Qu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],o="NHWC"===n?e.shape[1]:e.shape[2],i="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],s=o*t,u=i*t,c=a/(t*t),l=new qh("NHWC"===n?[r,s,u,c]:[r,c,s,u],t,n);return this.compileAndRun(l,[e])},t.prototype.split=function(e,t,n){return Wp(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Qd(0,e,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/a,a],l=e.reshape([i,o]),f=t.reshape([i,a]);if(0===u)return Rp(Lf([]),n);var d=zf(0),p=new Gv(i,o,l.rank,f.rank,s,c);return this.compileAndRun(p,[f,l,d]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var o=Qd(0,e,n),i=o.sliceRank,a=o.numUpdates,s=o.strides,u=o.outputSize,c=new Gv(a,i,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Jh("return real * expR - imag * expI;",e.shape,t),o=new Jh("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],a=this.compileAndRun(r,i),s=this.compileAndRun(o,i),u=this.complex(a,s).as2D(e.shape[0],e.shape[1]);return a.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=qd(e,t),i=o[0],a=o[1],s=o[2],u=o[3],c=t.reshape([a,r]),l=e.reshape([e.size/s,s]),f=new tv(r,u,[a,s]);return this.compileAndRun(f,[l,c]).reshape(i)},t.prototype.fill=function(e,t,n){if("string"===(n=n||Cc(t))){var r=dc(n,tc(e));return r.fill(t),cl.makeTensor(r,e,n,this)}var o=new Zh(e,t),i=o.getCustomSetupFunc(t);return this.compileAndRun(o,[],n,i)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return Ip(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return cl.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new Dm(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new Dv(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[Ql(e.shape)].concat(Jl(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[Ql(t)].concat(Jl(t)),i=new Lv(o,n),a=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,o=n.shape,i=n.dtype,a=Zl(o);return t=r?new Gh(a):new Hh(a),{dtype:i,shape:o,dataId:this.runWebGLProgram(t,[{shape:a,dtype:i,dataId:e}],i,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,o){var i=this;void 0===o&&(o=!1);var a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===dl.DENSE){var u=bl(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===tc(a.shape))return s.values=fc(a.dtype,0),a;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&tc(t.shape)<=Bu().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),c.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!nf(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),c.push(t),n=i.texData.get(t.dataId),r.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);var f,d={shape:a.shape,texData:s,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var o=e.userCode;return e.constructor.name+"_"+r+"_"+o}(e,l,d),h=this.getAndSaveBinary(p,(function(){return function(e,t,n,r){var o=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=eh(i,s,o,t.packedInputs),c=e.createProgram(u),l=null,f=e.getUniformLocation(c,"NAN",!1);1===Bu().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var d={},p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];d[h]=e.getUniformLocation(c,h,!1),d["offset"+h]=e.getUniformLocation(c,"offset"+h,!1)}return{program:t,source:u,webGLProgram:c,uniformLocations:d,inShapeInfos:a,outShapeInfo:s,infLoc:l,nanLoc:f}}(i.gpgpu,e,l,d)})),v=null!=this.activeTimers;if(v&&(f=this.startTimer()),function(e,t,n,r,o){wv(t.inShapeInfos,n),wv([t.outShapeInfo],[r]);var i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,a[0],a[1]):e.setOutputMatrixTexture(i,a[0],a[1]),e.setProgram(t.webGLProgram),1===Bu().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var o=t.program.variableNames[r],i=t.uniformLocations[o],a=t.uniformLocations["offset"+o];if(null!=i)if(n.isUniform)if(tc(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=o&&o(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,h,l,d,r),c.forEach((function(e){return i.disposeData(e.dataId)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!Bu().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var m=this.unpackTensor(a);return this.disposeData(a.dataId),m}return a},t.prototype.compileAndRun=function(e,t,n,r,o){void 0===o&&(o=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,o);return cl.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Bu().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=mf((function(){if(!Bu().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Bu().getBool("DEBUG");Bu().set("DEBUG",!1);var n=e.abs(zf(1e-8)).dataSync()[0];if(Bu().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,i=n.values,a=n.texture,s=n.usage,u=n.isPacked;if(null==a){var c,l=null!=this.activeTimers;l&&(c=Tc());var f=n.texShape;if(null==f&&(f=ef(r,u),n.texShape=f),null!=i){var d=Zl(r),p=void 0,h=f[1],v=f[0],m=i instanceof Uint8Array;u?(h=(t=wl(f[0],f[1]))[0],v=t[1],p=new Qh(d,[v,h],m)):p=new Yh(d,[v,h],m);var g=this.makeTensorInfo([v,h],o);this.texData.get(g.dataId).usage=m?pl.PIXELS:pl.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),h,v,i);var y=this.runWebGLProgram(p,[g],o,null,!0),x=this.texData.get(y.dataId);n.texture=x.texture,n.texShape=x.texShape,n.isPacked=x.isPacked,n.usage=x.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=Tc()-c)}else{var b=this.acquireTexture(f,s,o,u);n.texture=b}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*gc(t)},t}(cp);ll()&&cl.registerBackend("webgl",(function(){return new Fm}),2);var Pm=Of({square_:function(e){var t=wf(e,"x","square"),n=[t];return cl.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),Mm="SquaredDifference",Lm=Of({squaredDifference_:function(e,t){var n,r=wf(e,"a","squaredDifference"),o=wf(t,"b","squaredDifference");n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return cl.runKernelFunc((function(e,t){var n=e.squaredDifference(r,o);return t([r,o]),n}),i,(function(e,t){var n=t[0],r=t[1],o=zf(2);return{a:function(){return e.mul(n.sub(r).mul(o))},b:function(){return e.mul(r.sub(n).mul(o))}}}),Mm,{},a,[])}}),Bm=Of({abs_:function(e){var t=wf(e,"x","abs");return"complex64"===t.dtype?cl.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):cl.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),zm=Of({acos_:function(e){var t=wf(e,"x","acos");return cl.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(zf(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),jm=Of({acosh_:function(e){var t=wf(e,"x","acosh");return cl.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Wm=Of({asin_:function(e){var t=wf(e,"x","asin");return cl.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(zf(1).sub(n.toFloat().square()).sqrt())}}}))}}),Um=Of({asinh_:function(e){var t=wf(e,"x","asinh");return cl.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(zf(1).add(n.toFloat().square()).sqrt())}}}))}}),Vm=Of({atan_:function(e){var t=wf(e,"x","atan");return cl.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),Hm=Of({atanh_:function(e){var t=wf(e,"x","atanh");return cl.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(zf(1).sub(n.toFloat().square()))}}}))}}),Gm=Of({ceil_:function(e){var t=wf(e,"x","ceil");return cl.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),qm=Of({clipByValue_:function(e,t,n){var r=wf(e,"x","clipByValue");Qu(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var o=[r],i={min:t,max:n};return cl.runKernelFunc((function(e,o){var i=e.clip(r,t,n);return o([r]),i}),{x:r},(function(e,r){var o=r[0];return{x:function(){return e.where(o.greaterEqual(t).logicalAnd(o.lessEqual(n)),Xf(e))}}}),"ClipByValue",i,o)}}),Km=Of({cos_:function(e){var t=wf(e,"x","cos"),n=[t];return cl.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),$m=Of({cosh_:function(e){var t=wf(e,"x","cosh");return cl.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Xm=Of({erf_:function(e){var t=wf(e,"x","erf");return Qu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),cl.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Ym=Of({exp_:function(e){var t=wf(e,"x","exp");return cl.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Qm=Of({expm1_:function(e){var t=wf(e,"x","expm1");return cl.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Jm=Of({floor_:function(e){var t=wf(e,"x","floor");return cl.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),Zm=Of({log_:function(e){var t=wf(e,"x","log"),n=[t];return cl.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),eg=Of({log1p_:function(e){var t=wf(e,"x","log1p");return cl.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),tg=Of({logSigmoid_:function(e){var t=wf(e,"x","logSigmoid");return cl.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),ng=Of({neg_:function(e){var t=wf(e,"x","neg"),n=[t];return cl.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),rg=Of({reciprocal_:function(e){var t=wf(e,"x","reciprocal");return cl.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),og=Of({round_:function(e){var t=wf(e,"x","round");return cl.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),ig=Of({rsqrt_:function(e){var t=wf(e,"x","rsqrt"),n=[t];return cl.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),ag=Of({sigmoid_:function(e){var t=wf(e,"x","sigmoid");return cl.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(zf(1).sub(n)))}}}),"Sigmoid")}}),sg=Of({sign_:function(e){var t=wf(e,"x","sign");return cl.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),ug=Of({isNaN_:function(e){var t=wf(e,"x","isNaN");return cl.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),cg=Of({isInf_:function(e){var t=wf(e,"x","isInf");return cl.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),lg=Of({isFinite_:function(e){var t=wf(e,"x","isFinite");return cl.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Xf(e)}}}))}}),fg=Of({sin_:function(e){var t=wf(e,"x","sin"),n=[t];return cl.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),dg=Of({sinh_:function(e){var t=wf(e,"x","sinh");return cl.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),pg=Of({softplus_:function(e){var t=wf(e,"x","softplus");return cl.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),hg=Of({sqrt_:function(e){var t=wf(e,"x","sqrt");return cl.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),vg=Of({step_:function(e,t){void 0===t&&(t=0);var n=wf(e,"x","step");return cl.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Xf(e)}}}))}}),mg=Of({tan_:function(e){var t=wf(e,"x","tan");return cl.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),gg=Of({tanh_:function(e){var t=wf(e,"x","tanh");return cl.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return zf(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function yg(e,t,n,r,o,i){var a,s,u=wf(e,"x","batchNorm"),c=wf(t,"mean","batchNorm"),l=wf(n,"variance","batchNorm");return null!=o&&(a=wf(o,"scale","batchNorm")),null!=r&&(s=wf(r,"offset","batchNorm")),Qu(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Qu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."})),Qu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."})),null!=a&&Qu(2===a.rank||1===a.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."})),null!=s&&Qu(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),wg(u,c,l,s,a,i)}function xg(e,t,n,r,o,i){var a,s,u=wf(e,"x","batchNorm"),c=wf(t,"mean","batchNorm"),l=wf(n,"variance","batchNorm");return null!=o&&(a=wf(o,"scale","batchNorm")),null!=r&&(s=wf(r,"offset","batchNorm")),Qu(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Qu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."})),Qu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."})),null!=a&&Qu(3===a.rank||1===a.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."})),null!=s&&Qu(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),wg(u,c,l,s,a,i)}function bg(e,t,n,r,o,i){var a,s,u=wf(e,"x","batchNorm"),c=wf(t,"mean","batchNorm"),l=wf(n,"variance","batchNorm");return null!=o&&(a=wf(o,"scale","batchNorm")),null!=r&&(s=wf(r,"offset","batchNorm")),Qu(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),Qu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."})),Qu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."})),null!=a&&Qu(4===a.rank||1===a.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."})),null!=s&&Qu(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),wg(u,c,l,s,a,i)}function wg(e,t,n,r,o,i){null==i&&(i=.001);var a,s,u,c=wf(e,"x","batchNorm"),l=wf(t,"mean","batchNorm"),f=wf(n,"variance","batchNorm");null!=o&&(a=wf(o,"scale","batchNorm")),null!=r&&(s=wf(r,"offset","batchNorm")),Qu(l.rank===f.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Qu(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Qu(null==a||l.rank===a.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var d=[c,l,f,a];return cl.runKernelFunc((function(e,t){var n=e.batchNormalization(u,Cg(l),Cg(f),i,Cg(a),Cg(s));return t([c,l,f,a]),n}),{x:c,mean:l,variance:f,scale:a,offset:s},(function(e,t){var n=t,r=n[0],o=n[1],a=n[2],s=n[3],c=null==s?zf(1):s,l=dp(o.shape,u.shape),f=[];if(1===o.rank){for(var d=0;d<u.shape.length-1;++d)f.push(u.shape[d]);f.push(1)}var p=r.sub(o),h=e.mul(c),v=ig(a.add(zf(i))),m=v.mul(v).mul(v).mul(zf(-.5));return{x:function(){return 1===o.rank?e.mul(Bd(v.as4D(1,1,1,o.shape[0]),f)).mul(c).reshape(r.shape):e.mul(v).mul(c).reshape(r.shape)},mean:function(){var e=v.mul(zf(-1)).mul(h);return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)},variance:function(){var e=m.mul(p).mul(h);return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)},scale:function(){var t=p.mul(v),n=e.mul(t);return 1===o.rank&&(n=n.sum(l)),n.reshape(o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=t.sum(l)),t.reshape(o.shape)}}}),"BatchNormalization",{varianceEpsilon:i},d).reshape(c.shape)}function Cg(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Sg(){vf("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Eg=Of({batchNormalization2d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Sg(),yg(e,t,n,i,o,r)}}),kg=Of({batchNormalization3d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Sg(),xg(e,t,n,i,o,r)}}),_g=Of({batchNormalization4d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Sg(),bg(e,t,n,i,o,r)}}),Rg=Of({batchNormalization_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Sg(),wg(e,t,n,i,o,r)}}),Ig=Of({batchNorm_:wg}),Ag=Of({batchNorm2d_:yg}),Tg=Of({batchNorm3d_:xg}),Dg=Of({batchNorm4d_:bg}),Ng=Of({logicalAnd_:function(e,t){var n=wf(e,"a","logicalAnd","bool"),r=wf(t,"b","logicalAnd","bool");return pp(n.shape,r.shape),cl.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Og=Of({logicalNot_:function(e){var t=wf(e,"x","logicalNot","bool");return cl.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),Fg=Of({logicalOr_:function(e,t){var n=wf(e,"a","logicalOr","bool"),r=wf(t,"b","logicalOr","bool");return pp(n.shape,r.shape),cl.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Pg=Of({logicalXor_:function(e,t){var n=wf(e,"a","logicalXor","bool"),r=wf(t,"b","logicalXor","bool");return pp(n.shape,r.shape),Fg(e,t).logicalAnd(Ng(e,t).logicalNot())}}),Mg=Of({where_:function(e,t,n){var r=wf(t,"a","where"),o=wf(n,"b","where"),i=wf(e,"condition","where","bool");return Ju(r.shape,o.shape,"Error in where: "),1===i.rank?Qu(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Ju(i.shape,o.shape,"Error in where: "),cl.runKernelFunc((function(e,t){var n=e.select(i,r,o);return t([i]),n}),{$condition:i,$a:r,$b:o},(function(e,t){var n=t[0];return{$condition:function(){return Xf(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Lg=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r;return Mu(this,(function(o){switch(o.label){case 0:return[4,(t=wf(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Hp(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},Bg=Of({add_:function(e,t){var n,r=wf(e,"a","add"),o=wf(t,"b","add");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e){return e.add(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=dp(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=dp(o.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(o.shape)}}}),"Add")}}),zg=Of({addN_:function(e){Qu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Qu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return wf(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!nc(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return cl.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),jg=Of({addStrict_:function(e,t){var n=wf(e,"a","addStrict"),r=wf(t,"b","addStrict");return Ju(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Wg=Of({atan2_:function(e,t){var n,r=wf(e,"a","atan2"),o=wf(t,"b","atan2");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e,t){var n=e.atan2(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Bg(n.square(),r.square()),o=e.mul(r.div(t)),a=dp(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$b:function(){var t=Bg(n.square(),r.square()),o=ng(e.mul(n.div(t))),a=dp(r.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(r.shape)}}}))}}),Ug=Of({div_:function(e,t){var n,r=wf(e,"a","div"),o=wf(t,"b","div");if(n=rl(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return Gg(r,o);var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e,t){var n=e.realDivide(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=dp(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=dp(r.shape,i);o.length>0&&(t=t.sum(o).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}),"Div")}}),Vg=Of({divNoNan_:function(e,t){var n,r=wf(e,"a","div"),o=wf(t,"b","div");r=(n=rl(r,o))[0],o=n[1];var i=Ug(r,o),a=Xf(i),s=o.equal(a);return Mg(s,a,i)}}),Hg=Of({divStrict_:function(e,t){var n=wf(e,"a","div"),r=wf(t,"b","div");return Ju(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Gg=Of({floorDiv_:function(e,t){var n,r=wf(e,"a","floorDiv"),o=wf(t,"b","floorDiv");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e,t){var n=e.floorDiv(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=dp(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=dp(r.shape,i);o.length>0&&(t=t.sum(o).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}),"FloorDiv")}}),qg=Of({maximum_:function(e,t){var n,r=wf(e,"a","maximum"),o=wf(t,"b","maximum");return n=rl(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),pp(r.shape,o.shape),cl.runKernelFunc((function(e,t){var n=e.maximum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Kg=Of({maximumStrict_:function(e,t){var n=wf(e,"a","maximumStrict"),r=wf(t,"b","maximumStrict");return Ju(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),$g=Of({minimum_:function(e,t){var n,r=wf(e,"a","minimum"),o=wf(t,"b","minimum");return n=rl(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),pp(r.shape,o.shape),cl.runKernelFunc((function(e,t){var n=e.minimum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Xg=Of({minimumStrict_:function(e,t){var n=wf(e,"a","minimumStrict"),r=wf(t,"b","minimumStrict");return Ju(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Yg=Of({mod_:function(e,t){var n,r=wf(e,"a","mod"),o=wf(t,"b","mod");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e,t){var n=e.mod(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=dp(n.shape,i);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),o=dp(r.shape,i);return o.length>0?t.sum(o).reshape(r.shape):t}}}))}}),Qg=Of({modStrict_:function(e,t){var n=wf(e,"a","modStrict"),r=wf(t,"b","modStrict");return Ju(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Jg=Of({mul_:function(e,t){var n,r=wf(e,"a","mul"),o=wf(t,"b","mul");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e,t){var n=e.multiply(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),o=dp(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=dp(r.shape,i);return o.length>0?t.sum(o).reshape(r.shape):t}}}),"Mul")}}),Zg=Of({mulStrict_:function(e,t){var n=wf(e,"a","mul"),r=wf(t,"b","mul");return Ju(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),ey=Of({pow_:function(e,t){var n,r=wf(e,"base","pow"),o=wf(t,"exp","pow");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape),a=[r,o];return cl.runKernelFunc((function(e,t){var n=e.pow(r,o);return t([r,o,n]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1],o=t[2];return{a:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(zf(1))))),a=dp(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},b:function(){var t=n.greater(0),a=n.log().where(t,Xf(n)),s=e.mul(o.mul(a)),u=dp(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},a,[!0])}}),ty=Of({powStrict_:function(e,t){return Ju(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),ny=Of({squaredDifferenceStrict_:function(e,t){var n=wf(e,"a","squaredDifferenceStrict"),r=wf(t,"b","squaredDifferenceStrict");return Ju(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ry=Of({sub_:function(e,t){var n,r=wf(e,"a","sub"),o=wf(t,"b","sub");n=rl(r,o),r=n[0],o=n[1];var i=pp(r.shape,o.shape);return cl.runKernelFunc((function(e){return e.subtract(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=dp(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=dp(o.shape,i);return n.length>0&&(t=t.sum(n)),t.neg().reshape(o.shape)}}}),"Sub")}}),oy=Of({subStrict_:function(e,t){var n=wf(e,"a","subStrict"),r=wf(t,"b","subStrict");return Ju(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),iy=Of({equal_:function(e,t){var n,r=wf(e,"a","equal"),o=wf(t,"b","equal");return n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape),cl.runKernelFunc((function(e){return e.equal(r,o)}),{$a:r,$b:o})}}),ay=Of({equalStrict_:function(e,t){var n=wf(e,"a","equalStrict"),r=wf(t,"b","equalStrict");return Ju(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),sy=Of({greater_:function(e,t){var n,r=wf(e,"a","greater"),o=wf(t,"b","greater");return n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape),cl.runKernelFunc((function(e){return e.greater(r,o)}),{a:r,b:o},null,"Greater")}}),uy=Of({greaterEqual_:function(e,t){var n,r=wf(e,"a","greaterEqual"),o=wf(t,"b","greaterEqual");return n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape),cl.runKernelFunc((function(e,t){var n=e.greaterEqual(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Xf(n)},b:function(){return Xf(r)}}}),"GreaterEqual")}}),cy=Of({greaterEqualStrict_:function(e,t){var n=wf(e,"a","greaterEqualStrict"),r=wf(t,"b","greaterEqualStrict");return Ju(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),ly=Of({greaterStrict_:function(e,t){var n=wf(e,"a","greaterStrict"),r=wf(t,"b","greaterStrict");return Ju(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),fy=Of({less_:function(e,t){var n,r=wf(e,"a","less"),o=wf(t,"b","less");return n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape),cl.runKernelFunc((function(e){return e.less(r,o)}),{a:r,b:o},null,"Less")}}),dy=Of({lessEqual_:function(e,t){var n,r=wf(e,"a","lessEqual"),o=wf(t,"b","lessEqual");return n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape),cl.runKernelFunc((function(e,t){var n=e.lessEqual(r,o);return t([r,o]),n}),{a:r,b:o},null,"LessEqual")}}),py=Of({lessEqualStrict_:function(e,t){var n=wf(e,"a","lessEqualStrict"),r=wf(t,"b","lessEqualStrict");return Ju(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),hy=Of({lessStrict_:function(e,t){var n=wf(e,"a","lessStrict"),r=wf(t,"b","lessStrict");return Ju(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),vy=Of({notEqual_:function(e,t){var n,r=wf(e,"a","notEqual"),o=wf(t,"b","notEqual");return n=rl(r,o),r=n[0],o=n[1],pp(r.shape,o.shape),cl.runKernelFunc((function(e){return e.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),my=Of({notEqualStrict_:function(e,t){var n=wf(e,"a","notEqualStrict"),r=wf(t,"b","notEqualStrict");return Ju(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function gy(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function yy(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var xy=Of({gather_:function(e,t,n){void 0===n&&(n=0);var r=wf(e,"x","gather"),o=wf(t,"indices","gather","int32");n=cc(n,r.shape)[0];var i=function(e,t,n){for(var r=e.shape[n],o=[],i=1,a=1,s=0;s<n;s++)o.push(e.shape[s]),i*=e.shape[s];for(s=0;s<t.rank;s++)o.push(t.shape[s]);for(s=n+1;s<e.rank;s++)o.push(e.shape[s]),a*=e.shape[s];return{batchSize:i,sliceSize:a,dimSize:r,outputShape:o}}(r,o,n);return cl.runKernelFunc((function(e,t){var i=e.gather(r,o.flatten(),n);return t([o]),i}),{x:r,indices:o},(function(e,t){var o=t[0];return{x:function(){var t=r.shape,i=o.size,a=t.slice(0,n),s=a.length,u=t.slice(n,t.length).slice(1),c=u.length,l=gy(0,s),f=gy(s+1,s+1+c),d=yy([a,[i],u]),p=e.reshape(d),h=o.reshape([i]),v=yy([[s],l,f]),m=p.transpose(v),g=by(m,h,r.shape[n]),y=Af(v);return g.transpose(y)},indices:function(){return o}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),by=Of({unsortedSegmentSum_:function(e,t,n){var r=wf(e,"x","unsortedSegmentSum"),o=wf(t,"segmentIds","unsortedSegmentSum","int32");return Qu(rc(n),(function(){return"numSegments must be of dtype int"})),cl.runKernelFunc((function(e,t){var i=e.unsortedSegmentSum(r,o,n);return t([o]),i}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=qg(t,Xf(t)),r=xy(e,n),o=uy(t,zf(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=wd(o,a+1);o=Ng(o,Hf(r.shape,"bool"));var s=Xf(r);return Mg(o,r,s)}(e,n)}}}))}});function wy(e,t,n,r,o,i,a){void 0===i&&(i="NHWC"),Qu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),Qu(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),Qu(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),Qu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var l="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];Qu(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),Qu(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),null!=a&&Qu(rc(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var d=kp(i),p=mp(s,n.shape,r,1,o,a,!1,d),h=cl.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,p);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return ky(e,n,r,o,i,1,a)},filter:function(){return Ry(e,s,n.shape,r,o,i,a)}}}));return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function Cy(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function Sy(e,t,n,r,o){Qu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,a=t,s=!1;4===t.rank&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=a.shape[4];Qu(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),Qu(5===a.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank})),Qu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Qu(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),Qu(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."}));var l=gp(i,n.shape,r,1,o),f=cl.runKernelFunc((function(e){return e.conv3dDerInput(a,n,l)}),{dy5D:a});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var Ey=Of({conv1d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NWC"),void 0===i&&(i=1);var s=wf(e,"x","conv1d"),u=wf(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),Qu(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."})),Qu(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=a&&Qu(rc(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})),Qu(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),Qu(Ep(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),Qu("NWC"===o,(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),p=ky(d,f,[1,n],r,"NHWC",[1,i],a);return l?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),ky=Of({conv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=wf(e,"x","conv2d"),u=wf(t,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Qu(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."})),Qu(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=a&&Qu(rc(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var f="NHWC"===o?c.shape[3]:c.shape[1];Qu(f===u.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."})),Qu(Ep(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var d=kp(o),p=mp(c.shape,u.shape,n,i,r,a,!1,d),h=[u,c],v=cl.runKernelFunc((function(e,t){var n=e.conv2d(c,u,p);return t([u,c]),n}),{x:c,filter:u},(function(e,t){var a=t,s=a[0],u=a[1];return Qu(Sp(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return Iy(u.shape,e,s,n,r,o)},filter:function(){return Ry(u,e,s.shape,n,r,o)}}}),"Conv2D",p,h);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),_y=Of({conv3d_:function(e,t,n,r,o,i){void 0===o&&(o="NDHWC"),void 0===i&&(i=[1,1,1]);var a=wf(e,"x","conv3d"),s=wf(t,"filter","conv3d"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),Qu(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),Qu(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Qu(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Qu(function(e,t){return Cy(e)||Cy(t)}(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),Qu("NDHWC"===o,(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var l=gp(u.shape,s.shape,n,i,r),f=cl.runKernelFunc((function(e,t){var n=e.conv3d(u,s,l);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){Qu(Cy(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var o=t[0],a=t[1];return{x:function(){return Sy(o.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,o){var i=e;4===e.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var a=t;4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Qu(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),Qu(5===a.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."})),Qu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Qu(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),Qu(a.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=gp(i.shape,n,r,1,o);return cl.runKernelFunc((function(e){return e.conv3dDerFilter(i,a,s)}),{x5D:i,dy5D:a})}(o,e,a.shape,n,r)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ry=Of({conv2dDerFilter_:function(e,t,n,r,o,i,a){void 0===i&&(i="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Qu(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),Qu(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),Qu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];Qu(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."})),Qu(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."})),null!=a&&Qu(rc(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var f=kp(i),d=mp(s.shape,n,r,1,o,a,!1,f);return cl.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,d)}),{x4D:s,dy4D:u})}}),Iy=Of({conv2dDerInput_:wy}),Ay=Of({depthwiseConv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=wf(e,"x","depthwiseConv2d"),u=wf(t,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Qu(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."})),Qu(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),Qu(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==i&&(i=[1,1]),Qu(Ep(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=a&&Qu(rc(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var f=mp(c.shape,u.shape,n,i,r,a,!0),d=[c,u],p=cl.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(c,u,f);return t([c,u]),n}),{x:c,filter:u},(function(e,t){Qu(Sp(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var n=t[0],r=t[1];return{x:function(){return Ty(n.shape,e,r,f)},filter:function(){return Dy(n,e,r.shape,f)}}}),"DepthwiseConv2dNative",f,d);return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Ty=Of({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,i=!1;3===t.rank&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=cl.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),Dy=Of({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),cl.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(o,i,r)}),{x4D:o,dy4D:i})}}),Ny=Of({separableConv2d_:function(e,t,n,r,o,i,a){void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC");var s=wf(e,"x","separableConv2d"),u=wf(t,"depthwiseFilter","separableConv2d"),c=wf(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(3===s.rank&&(f=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Qu(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."})),Qu(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),Qu(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),Qu(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."})),Qu(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."}));var d=u.shape[2],p=u.shape[3];Qu(c.shape[2]===d*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*p+", but got "+c.shape[2]+"."}));var h=Ay(l,u,r,o,a,i),v=ky(h,c,1,"valid",a);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Oy=Of({conv2dTranspose_:function(e,t,n,r,o,i){return wy(n,wf(e,"x","conv2dTranspose"),wf(t,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),Fy=Of({conv3dTranspose_:function(e,t,n,r,o){return Sy(n,wf(e,"x","conv3dTranspose"),wf(t,"filter","conv3dTranspose"),r,o)}}),Py=Of({matMul_:function(e,t,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=wf(e,"a","matMul"),a=wf(t,"b","matMul");o=rl(i,a),i=o[0],a=o[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],c=n?i.shape[i.rank-1]:i.shape[i.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=i.shape.slice(0,-2),d=a.shape.slice(0,-2),p=tc(f),h=tc(d);Qu(i.rank>=2&&a.rank>=2&&i.rank===a.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."})),Qu(nc(f,d),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."})),Qu(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var v=i.shape.slice(0,-2).concat([c,l]),m=n?i.as3D(p,s,c):i.as3D(p,c,s),g=r?a.as3D(h,l,u):a.as3D(h,u,l),y={transposeA:n,transposeB:r};return cl.runKernelFunc((function(e,t){var o=e.batchMatMul(m,g,n,r);return t([m,g]),o}),{a:m,b:g},(function(e,t){var o=t,i=o[0],a=o[1];return n||r?!n&&r?{a:function(){return e.matMul(a,!1,!1)},b:function(){return e.matMul(i,!0,!1)}}:n&&!r?{a:function(){return a.matMul(e,!1,!0)},b:function(){return i.matMul(e,!1,!1)}}:{a:function(){return a.matMul(e,!0,!0)},b:function(){return e.matMul(i,!0,!0)}}:{a:function(){return e.matMul(a,!1,!0)},b:function(){return i.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(v)}}),My=Of({dot_:function(e,t){var n=wf(e,"t1","dot"),r=wf(t,"t2","dot");Qu(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return Qu(o===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Ly=Of({outerProduct_:function(e,t){var n=wf(e,"v1","outerProduct"),r=wf(t,"v2","outerProduct");return Qu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),By=Of({reverse_:function(e,t){var n=wf(e,"x","reverse");if(0===n.rank)return n.clone();var r=cc(t,n.shape);return cl.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),zy=Of({reverse1d_:function(e){var t=wf(e,"x","reverse");return Qu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),By(t,0)}}),jy=Of({reverse2d_:function(e,t){var n=wf(e,"x","reverse");return Qu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),By(n,t)}}),Wy=Of({reverse3d_:function(e,t){var n=wf(e,"x","reverse");return Qu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),By(n,t)}}),Uy=Of({reverse4d_:function(e,t){var n=wf(e,"x","reverse");return Qu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),By(n,t)}});function Vy(e,t,n,r,o,i){var a=wf(e,"x","maxPool"),s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),Qu(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),Qu(Ep(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=i&&Qu(rc(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var c=hp(s.shape,t,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&nc(c.inShape,c.outShape))return a.clone();var l=[s],f=cl.runKernelFunc((function(e,t){var n=e.maxPool(s,c);return t([s,n]),n}),{x:s},(function(e,i){var a=i[0],s=i[1];return{x:function(){return function(e,t,n,r,o,i,a,s){var u=wf(e,"dy","maxPoolBackprop"),c=wf(t,"input","maxPoolBackprop"),l=wf(n,"output","maxPoolBackprop");Qu(c.rank===u.rank,(function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"})),null==i&&(i=[1,1]),Qu(Ep(o,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})),Qu(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),Qu(4===c.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."}));var f=hp(c.shape,r,o,i,a,s);return cl.runKernelFunc((function(e){return e.maxPoolBackprop(u,c,l,f)}),{$dy:u,$input:c})}(e,a,s,t,n,r,o)}}}),"MaxPool",c,l);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Hy(e,t,n,r,o,i){var a=wf(e,"x","avgPool","float32");null==r&&(r=[1,1]),Qu(Ep(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Qu(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=i&&Qu(rc(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var c=hp(s.shape,t,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&nc(c.inShape,c.outShape))return a.clone();var l=cl.runKernelFunc((function(e){return e.avgPool(s,c)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,o,i){var a=wf(e,"dy","avgPoolBackprop"),s=wf(t,"input","avgPoolBackprop");Qu(s.rank===a.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"})),null==o&&(o=[1,1]),Qu(Ep(r,o),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}));var u=s,c=a,l=!1;3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Qu(4===c.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."})),Qu(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var f=hp(u.shape,n,r,o,i),d=cl.runKernelFunc((function(e){return e.avgPoolBackprop(c,u,f)}),{dy4D:c,input4D:u});return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,s,t,n,r,o)}}}),"AvgPool",c);return l=l.cast(a.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var Gy=Of({maxPool_:function(e,t,n,r,o){return Vy(e,t,n,1,r,o)}}),qy=Of({avgPool_:function(e,t,n,r,o){return Hy(e,t,n,1,r,o)}}),Ky=Of({pool_:function(e,t,n,r,o,i){null==o&&(o=[1,1]),null==i&&(i=1),0===r&&(r="valid");var a=wf(e,"x","maxPool"),s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Qu(Ep(i,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}));var c,l=hp(s.shape,t,i,o,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),o=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],o[t]]}))}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var d=1===f[0]&&1===f[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),o=n.map((function(e){return e[1]})),i=e.concat(r,o),a=t.map((function(e,t){return(e-i[t]%e)%e})),s=o.map((function(e,t){return e+a[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,a[t]]}))]}([l.inHeight,l.inWidth],f,c),h=p[0],v=p[1],m=d?r:"valid",g=d?s:Pd(s,f,h),y=("avg"===n?function(){return Hy(g,t,i,1,m)}:function(){return Vy(g,t,i,1,m)})(),x=d?y:vd(y,f,v);return u?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),$y=Of({maxPool3d_:function(e,t,n,r,o,i,a){void 0===i&&(i="NDHWC");var s=wf(e,"x","maxPool3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),Qu(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),Qu("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),Qu(Ep(n,a),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&Qu(rc(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var l=vp(u.shape,t,n,a,r,o,i),f=cl.runKernelFunc((function(e,t){var n=e.maxPool3d(u,l);return t([u,n]),n}),{x:u},(function(e,i){var s=i[0],u=i[1];return{x:function(){return function(e,t,n,r,o,i,a,s){var u=wf(e,"dy","maxPool3dBackprop"),c=wf(t,"input","maxPool3dBackprop"),l=wf(n,"output","maxPool3dBackprop"),f=u,d=c,p=l,h=!1;4===c.rank&&(h=!0,f=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),d=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),p=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),Qu(5===f.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+f.rank+"."})),Qu(5===d.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."})),Qu(5===p.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."})),null==i&&(i=[1,1,1]),Qu(Ep(o,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})),null!=s&&Qu(rc(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."}));var v=vp(d.shape,r,o,i,a,s),m=cl.runKernelFunc((function(e){return e.maxPool3dBackprop(f,d,p,v)}),{dy5D:f,input5D:d});return h?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,s,u,t,n,a,r,o)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Xy=Of({avgPool3d_:function(e,t,n,r,o,i,a){void 0===i&&(i="NDHWC");var s=wf(e,"x","avgPool3d","float32"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),Qu(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),Qu("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),Qu(Ep(n,a),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&Qu(rc(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var l=vp(u.shape,t,n,a,r,o,i),f=cl.runKernelFunc((function(e){return e.avgPool3d(u,l)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,o,i,a){var s=wf(e,"dy","avgPool3dBackprop"),u=wf(t,"input","avgPool3dBackprop"),c=s,l=u,f=!1;4===u.rank&&(f=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),Qu(5===c.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."})),Qu(5===l.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."})),null==o&&(o=[1,1,1]),Qu(Ep(r,o),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"})),null!=a&&Qu(rc(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var d=vp(l.shape,n,r,o,i,a),p=cl.runKernelFunc((function(e){return e.avgPool3dBackprop(c,l,d)}),{dy5D:c,input5D:l});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}(e,u,t,n,a,r,o)}}}));return f=f.cast(u.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Yy=Of({slice_:function(e,t,n){var r,o,i=wf(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(e){Qu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Qu(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),i.shape[t]-r[t])})),Jd(i,r,o);var a=i.shape,s={begin:r,size:o};return cl.runKernelFunc((function(e){return e.slice(i,r,o)}),{x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-o[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),Qy=Of({slice1d_:function(e,t,n){var r=wf(e,"x","slice1d");return Qu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Yy(r,[t],[n])}}),Jy=Of({slice2d_:function(e,t,n){var r=wf(e,"x","slice2d");return Qu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Yy(r,t,n)}}),Zy=Of({slice3d_:function(e,t,n){var r=wf(e,"x","slice3d");return Qu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Yy(r,t,n)}}),ex=Of({slice4d_:function(e,t,n){var r=wf(e,"x","slice4d");return Qu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Yy(r,t,n)}});function tx(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(_f(t.shape,r))),e.rank<n.rank&&(e=e.reshape(_f(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==o?r:r.transpose(o)}}}var nx=Of({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","all","bool"),o=cc(t,r.shape),i=o,a=If(i,r.rank);null!=a&&(r=r.transpose(a),i=Tf(i.length,r.rank));var s=cl.runKernelFunc((function(e){return e.all(r,i)}),{$x:r});if(n){var u=_f(s.shape,o);return s.reshape(u)}return s}}),rx=Of({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","any","bool"),o=cc(t,r.shape),i=o,a=If(i,r.rank);null!=a&&(r=r.transpose(a),i=Tf(i.length,r.rank));var s=cl.runKernelFunc((function(e){return e.any(r,i)}),{$x:r});if(n){var u=_f(s.shape,o);return s.reshape(u)}return s}}),ox=Of({argMax_:function(e,t){void 0===t&&(t=0);var n=wf(e,"x","argMax");null==t&&(t=0);var r=cc(t,n.shape),o=If(r,n.rank);null!=o&&(n=n.transpose(o),r=Tf(r.length,n.rank));var i={axis:r[0]},a=[n];return cl.runKernelFunc((function(e,t){var o=e.argMax(n,r[0]);return t([n]),o}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Xf(n)}}}),"ArgMax",i,a)}}),ix=Of({argMin_:function(e,t){void 0===t&&(t=0);var n=wf(e,"x","argMin");null==t&&(t=0);var r=cc(t,n.shape),o=If(r,n.rank);return null!=o&&(n=n.transpose(o),r=Tf(r.length,n.rank)),cl.runKernelFunc((function(e,t){var o=e.argMin(n,r[0]);return t([n]),o}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Xf(n)}}}))}}),ax=Of({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","logSumExp"),o=cc(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=_f(s.shape,o);return s.reshape(u)}return s}}),sx=Of({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","max"),o=r,i=cc(t,r.shape),a=i,s=If(a,r.rank);null!=s&&(r=r.transpose(s),a=Tf(a.length,r.rank));var u=[r],c=cl.runKernelFunc((function(e,t){var n=e.max(r,a);return t([o,n]),n}),{x:r},(function(e,t){return tx(e,t[1],t[0],i,s)}),"Max",{axes:a},u,[!0]);if(n){var l=_f(c.shape,i);c=c.reshape(l)}return c}}),ux=Of({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","mean"),o=cc(t,r.shape),i=tc(kf(r.shape,o)[1]);return ip((function(e){var r=zf(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(Hf(e.shape,"float32")).div(i)}}}))(r)}}),cx=Of({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","min"),o=r,i=cc(t,r.shape),a=i,s=If(a,r.rank);null!=s&&(r=r.transpose(s),a=Tf(a.length,r.rank));var u=[r],c=cl.runKernelFunc((function(e,t){var n=e.min(r,a);return t([o,n]),n}),{x:r},(function(e,t){return tx(e,t[1],t[0],i,s)}),"Min",{axes:a},u,[!0]);if(n){var l=_f(c.shape,i);c=c.reshape(l)}return c}}),lx=Of({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cc(t,(e=wf(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;n||(i=_f(o.shape,r));var a=e.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),fx=Of({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=cc(t,r.shape);return ip((function(e){var t=If(o,e.rank),r=o,i=e;null!=t&&(i=e.transpose(t),r=Tf(r.length,e.rank));var a=function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(Hf(e.shape,"float32"))},s={axes:r},u=cl.runKernelFunc((function(e){return e.sum(i,r)}),{x:i},(function(e){return{x:function(){return a(e)}}}),"Sum",s);if(n){var c=_f(u.shape,o);u=u.reshape(c)}return{value:u,gradFunc:a}}))(r)}}),dx=Of({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=wf(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=cc(t,r.shape),i=If(o,r.rank),a=o,s=r;null!=i&&(s=r.transpose(i),a=Tf(a.length,r.rank));var u=cl.runKernelFunc((function(e){return e.prod(s,a)}),{permutedX:s});if(n){var c=_f(u.shape,o);u=u.reshape(c)}return u}}),px=Of({elu_:function(e){var t=wf(e,"x","elu");return cl.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return cl.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),hx=Of({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=wf(e,"x","leakyRelu");return qg(zf(t).mul(n),n)}}),vx=Of({prelu_:function(e,t){var n=wf(e,"x","prelu"),r=wf(t,"alpha","prelu");return cl.runKernelFunc((function(e,t){var o=e.prelu(n,r);return t([n,r]),o}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],o=n.greater(0);return{x:function(){return Mg(o,e,e.mul(r))},alpha:function(){var t=Mg(o,Xf(e),e.mul(n)),i=dp(r.shape,e.shape);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)}}}),"Prelu")}}),mx=Of({relu_:function(e){var t=wf(e,"x","relu");return"bool"===t.dtype?t.toInt():cl.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),gx=Of({relu6_:function(e){var t=wf(e,"x","relu6");return"bool"===t.dtype?t.toInt():cl.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),yx=Of({selu_:function(e){var t=wf(e,"x","selu");return cl.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(zf(0)),r=zf(om),o=zf(im),i=e.mul(o),a=e.mul(r).mul(n.toFloat().exp());return Mg(t,i,a)}}}))}}),xx=Of({transpose_:function(e,t){var n=wf(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Qu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Qu(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return cl.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=Af(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),bx=Of({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=wf(e,"x","localResponseNormalization");Qu(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),Qu(rc(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=cl.runKernelFunc((function(e,i){var s=e.localResponseNormalization4D(a,t,n,r,o);return i([a,s]),s}),{x4D:a},(function(e,i){var a=i[0],s=i[1];return{x4D:function(){return cl.runKernelFunc((function(i){return i.LRNGrad(e,a,s,t,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),wx=Of({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(zf(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=wf(e,"x","norm"),t,n),i=o.shape;if(r){var a=cc(n,e.shape);i=_f(o.shape,a)}return o.reshape(i)}}),Cx=Of({basicLSTMCell_:function(e,t,n,r,o,i){var a=wf(e,"forgetBias","basicLSTMCell"),s=wf(t,"lstmKernel","basicLSTMCell"),u=wf(n,"lstmBias","basicLSTMCell"),c=wf(r,"data","basicLSTMCell"),l=wf(o,"c","basicLSTMCell"),f=wf(i,"h","basicLSTMCell"),d=c.concat(f,1).matMul(s).add(u),p=d.shape[0],h=d.shape[1]/4,v=[p,h],m=d.slice([0,0],v),g=d.slice([0,h],v),y=d.slice([0,2*h],v),x=d.slice([0,3*h],v),b=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(y).sigmoid())),w=b.tanh().mulStrict(x.sigmoid());return[b,w]}}),Sx=Of({multiRNNCell_:function(e,t,n,r){for(var o=wf(t,"data","multiRNNCell"),i=Cf(n,"c","multiRNNCell"),a=Cf(r,"h","multiRNNCell"),s=o,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],a[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var f=[],d=[];for(c=0;c<u.length;c+=2)f.push(u[c]),d.push(u[c+1]);return[f,d]}}),Ex=Of({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var i=wf(e,"v","movingAverage"),a=wf(t,"x","movingAverage"),s=wf(n,"decay","movingAverage");ol(i,a),Qu(nc(i.shape,a.shape),(function(){return"Shape mismatch in v and x"}));var u=zf(1),c=u.sub(s),l=a.sub(i).mul(c);if(o){Qu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=wf(r,"step","movingAverage");l=l.div(u.sub(ey(s,f)))}return i.add(l)}}),kx=Of({stridedSlice_:function(e,t,n,r,o,i,a,s,u){if(void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==a)throw new Error("ellipsis mask is not yet supported");var c=wf(e,"x","stridedSlice"),l=Zd(s),f=c.shape.slice();l.forEach((function(e){t[e]=0,n[e]=1,f.splice(e,0,1)})),c=c.reshape(f);for(var d=0;d<c.rank;d++)t[d]=tp(o,t,r,c.shape,d),n[d]=np(i,n,r,c.shape,d),r[d]=r[d]||1;var p=Zd(u);p.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var h=ep(t,n,r),v=h.filter((function(e,t){return-1===p.indexOf(t)}));return r.every((function(e){return 1===e}))?Yy(c,t,h).reshape(v):cl.runKernelFunc((function(e){return e.stridedSlice(c,t,n,r)}),{$x:c}).reshape(v)}}),_x=Of({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=wf(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=cl.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),Rx=Of({scatterND_:function(e,t,n){var r=wf(e,"indices","scatterND","int32"),o=wf(t,"updates","scatterND");return Yd(o,r,n),cl.runKernelFunc((function(e){return e.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),Ix=Of({fft_:function(e){Qu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return cl.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),Ax=Of({ifft_:function(e){Qu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return cl.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),Tx=Of({rfft_:function(e,t){Qu("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],o=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),a=e.shape.map((function(e){return e}));a[e.shape.length-1]=t,n=e.slice(i,a),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(Gf(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),c=Ff(n,u).as2D(o,r),l=Ix(c),f=Math.floor(r/2)+1,d=Pf(l),p=Mf(l),h=d.split([f,r-f],d.shape.length-1),v=p.split([f,r-f],p.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,Ff(h[0],v[0]).reshape(m)}}),Dx=Of({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=Ax(r);return Pf(o)}var i=[n,2*(t-1)],a=Pf(e).as2D(n,t),s=Mf(e).as2D(n,t),u=a.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(zf(-1)),l=a.concat(u,1),f=s.concat(c,1);return r=Ff(l,f).as2D(i[0],i[1]),o=Ax(r),Pf(o)}}),Nx=Object.freeze({fft:Ix,ifft:Ax,rfft:Tx,irfft:Dx}),Ox=Of({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var o=wf(e,"sparseIndices","sparseToDense","int32"),i=wf(t,"sparseValues","sparseToDense"),a=wf(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var a=t.size;if(0!==t.rank&&(1!==t.rank||a!==o))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+o+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),cl.runKernelFunc((function(e){return e.sparseToDense(o,i,n,a)}),{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),Fx=Of({gatherND_:function(e,t){var n=wf(t,"indices","gatherND","int32"),r=wf(e,"x","gatherND");return cl.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),Px=Of({diag_:function(e){var t=wf(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return cl.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),Mx=Of({dropout_:function(e,t,n,r){var o=wf(e,"x","dropout");if(Qu("float32"===o.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),Qu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof qc?o.clone():o;var i=function(e,t){if(null==t)return e.shape.slice();if(nc(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),a=1-t,s=Od(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(s)}});function Lx(e,t,n){for(var r=1-e%2,o=new Float32Array(e),i=0;i<e;++i){var a=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(a)}return jf(o,"float32")}var Bx,zx=Of({hannWindow_:function(e){return Lx(e,.5,.5)}}),jx=Of({hammingWindow_:function(e){return Lx(e,.54,.46)}}),Wx=Of({frame_:function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var i=0,a=[];i+t<=e.size;)a.push(Yy(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Yf([Yy(e,i,t-s),qf([s],o)]);a.push(u),i+=n}return 0===a.length?Wf([],[0,t]):Yf(a).as2D(a.length,t)}}),Ux=Of({stft_:function(e,t,n,r,o){var i;void 0===o&&(o=zx),null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=Wx(e,t,n),s=Jg(a,o(t)),u=[],c=0;c<a.shape[0];c++)u.push(Tx(s.slice([c,0],[1,t]),r));return Yf(u)}}),Vx=Object.freeze({hannWindow:zx,hammingWindow:jx,frame:Wx,stft:Ux});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Bx||(Bx={}));var Hx=Of({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Bx.SUM_BY_NONZERO_WEIGHTS);var o=wf(e,"labels","absoluteDifference"),i=wf(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=wf(n,"weights","absoluteDifference")),Ju(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return Gx(s,a,r)}}),Gx=Of({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Bx.SUM_BY_NONZERO_WEIGHTS);var r=wf(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=wf(t,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===Bx.NONE)return i;if(n===Bx.SUM)return i.sum();if(n===Bx.MEAN){if(null==o)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return a>1?s.div(zf(a)):s}if(n===Bx.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(zf(r.size));var u=o.mul(Hf(r.shape)).notEqual(zf(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),qx=Of({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=Bx.SUM_BY_NONZERO_WEIGHTS);var i=wf(e,"labels","cosineDistance"),a=wf(t,"predictions","cosineDistance"),s=null;null!=r&&(s=wf(r,"weights","cosineDistance")),Ju(i.shape,a.shape,"Error in cosineDistance: ");var u=zf(1).sub(i.mul(a).sum(n,!0));return Gx(u,s,o)}}),Kx=Of({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Bx.SUM_BY_NONZERO_WEIGHTS);var o=wf(e,"labels","hingeLoss"),i=wf(t,"predictions","hingeLoss"),a=null;null!=n&&(a=wf(n,"weights","hingeLoss")),Ju(o.shape,i.shape,"Error in hingeLoss: ");var s=zf(1);o=zf(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return Gx(u,a,r)}}),$x=Of({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=Bx.SUM_BY_NONZERO_WEIGHTS);var i=wf(e,"labels","huberLoss"),a=wf(t,"predictions","huberLoss"),s=null;null!=n&&(s=wf(n,"weights","huberLoss")),Ju(i.shape,a.shape,"Error in huberLoss: ");var u=zf(r),c=a.sub(i).abs(),l=$g(c,u),f=c.sub(l),d=zf(.5).mul(l.square()).add(u.mul(f));return Gx(d,s,o)}}),Xx=Of({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=Bx.SUM_BY_NONZERO_WEIGHTS);var i=wf(e,"labels","logLoss"),a=wf(t,"predictions","logLoss"),s=null;null!=n&&(s=wf(n,"weights","logLoss")),Ju(i.shape,a.shape,"Error in logLoss: ");var u=zf(1),c=zf(r),l=i.mul(a.add(c).log()).neg().sub(u.sub(i).mul(u.sub(a).add(c).log()));return Gx(l,s,o)}}),Yx=Of({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Bx.SUM_BY_NONZERO_WEIGHTS);var o=wf(e,"labels","meanSquaredError"),i=wf(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=wf(n,"weights","meanSquaredError")),Ju(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return Gx(s,a,r)}}),Qx=Of({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Bx.SUM_BY_NONZERO_WEIGHTS);var i=wf(e,"multiClassLabels","sigmoidCrossEntropy"),a=wf(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=wf(n,"weights","sigmoidCrossEntropy")),Ju(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=zf(r),c=zf(1),l=zf(.5);i=i.mul(c.sub(u)).add(l.mul(u))}var f=function(e,t){var n=wf(e,"labels","sigmoidCrossEntropyWithLogits"),r=wf(t,"logits","sigmoidCrossEntropyWithLogits");Ju(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)}(i,a);return Gx(f,s,o)}}),Jx=Of({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Bx.SUM_BY_NONZERO_WEIGHTS);var i=wf(e,"onehotLabels","softmaxCrossEntropy"),a=wf(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=wf(n,"weights","softmaxCrossEntropy")),Ju(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=zf(r),c=zf(1),l=zf(i.shape[1]);i=i.mul(c.sub(u)).add(u.div(l))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ip((function(e,t,r){var o=t.logSumExp([n],!0),i=t.toFloat().sub(o);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],o=t[1],i=_f(e.shape,[n]);return[e.reshape(i).mul(r.toFloat().sub(o.exp())),e.reshape(i).mul(o.exp().sub(r.toFloat()))]}}}))(e,t)}(i,a);return Gx(f,s,o)}}),Zx=Object.freeze({get Reduction(){return Bx},absoluteDifference:Hx,computeWeightedLoss:Gx,cosineDistance:qx,hingeLoss:Kx,huberLoss:$x,logLoss:Xx,meanSquaredError:Yx,sigmoidCrossEntropy:Qx,softmaxCrossEntropy:Jx});function eb(e,t){return void 0===t&&(t=!1),cl.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=Cd(n),i=e.clone(),a=Wf([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,c=function(e){var t,u=i,c=s,l=o;t=cl.tidy((function(){var t=i.slice([e,e],[n-e,1]),u=t.norm(),c=i.slice([e,e],[1,1]),l=Wf([[-1]]).where(c.greater(0),Wf([[1]])),f=c.sub(l.mul(u)),d=t.div(f);s=1===d.shape[0]?a.clone():a.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var p=l.matMul(f).div(u).neg(),h=i.slice([e,0],[n-e,r]),v=p.mul(s);if(0===e)i=h.sub(v.matMul(s.transpose().matMul(h)));else{var m=h.sub(v.matMul(s.transpose().matMul(h)));i=i.slice([0,0],[e,r]).concat(m,0)}var g=o.slice([0,e],[n,o.shape[1]-e]);if(0===e)o=g.sub(g.matMul(s).matMul(v.transpose()));else{var y=g.sub(g.matMul(s).matMul(v.transpose()));o=o.slice([0,0],[n,e]).concat(y,1)}return[s,i,o]})),s=t[0],i=t[1],o=t[2],gf([u,c,l])},l=0;l<u;++l)c(l);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]}))}var tb=Of({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=wf(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],s=i[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=a),n<0&&(n=s);var u=Kf(0,a,1,"int32").reshape([-1,1]),c=Kf(0,s,1,"int32"),l=ry(u,c),f=Ng(l.lessEqual(zf(+t,"int32")),l.greaterEqual(zf(-n,"int32"))),d=Gf([a,s],r.dtype);return Ld(jd(r.reshape([-1,a,s])).map((function(e){return Mg(f,e,d)}))).reshape(o)}}),nb=Of({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Qu(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Qu(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},o=1;o<e.length;++o)r(o)}else t=!0,e=td(e,e.shape[0],0).map((function(e){return Md(e,[0])}));Qu(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var i=[],a=e,s=function(e){i.push(cl.tidy((function(){var t=a[e];if(e>0)for(var n=0;n<e;++n){var r=fx(i[n].mulStrict(t)).mul(i[n]);t=t.sub(r)}return t.div(wx(t,"euclidean"))})))};for(o=0;o<e.length;++o)s(o);return t?Ld(i,0):i}}),rb=Of({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return eb(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=jd(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach((function(e){var n=eb(e,t),r=n[0],a=n[1];o.push(r),i.push(a)})),[Ld(o,0).reshape(e.shape),Ld(i,0).reshape(e.shape)]}}),ob=Object.freeze({bandPart:tb,gramSchmidt:nb,qr:rb});function ib(e,t,n,r,o,i){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==i&&(i=0);var a=e.shape[0];return n=Math.min(n,a),Qu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Qu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Qu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Qu(1===t.rank,(function(){return"scores must be a 1D tensor"})),Qu(t.shape[0]===a,(function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]})),Qu(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var ab=Of({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=wf(e,"images","resizeBilinear");Qu(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Qu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=cl.runKernelFunc((function(e,t){return t([o]),e.resizeBilinear(o,a,s,n)}),{x:o},(function(e,t){return{x:function(){return cl.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),sb=Of({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=wf(e,"images","resizeNearestNeighbor");Qu(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Qu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Qu("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=cl.runKernelFunc((function(e,t){return t([o]),e.resizeNearestNeighbor(o,a,s,n)}),{batchImages:o},(function(e,t){return{batchImages:function(){return cl.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ub=Of({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var i=wf(e,"boxes","nonMaxSuppression"),a=wf(t,"scores","nonMaxSuppression"),s=ib(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return cl.runKernelFunc((function(e){return e.nonMaxSuppression(i,a,n,r,o)}),{boxes:i,scores:a},null,"NonMaxSuppressionV3",u)}}),cb=Of({nonMaxSuppressionWithScore_:function(e,t,n,r,o,i){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var a=wf(e,"boxes","nonMaxSuppression"),s=wf(t,"scores","nonMaxSuppression"),u=ib(a,s,n,r,o,i),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},l=cl.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),lb=Of({cropAndResize_:function(e,t,n,r,o,i){var a=wf(e,"image","cropAndResize"),s=wf(t,"boxes","cropAndResize","float32"),u=wf(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var c=s.shape[0];return Qu(4===a.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."})),Qu(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."})),Qu(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."})),Qu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Qu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Qu("bilinear"===o||"nearest"===o,(function(){return"method must be bilinear or nearest, but was "+o})),cl.runKernelFunc((function(e,t){return e.cropAndResize(a,s,u,r,o,i)}),{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),fb=Object.freeze({resizeBilinear:ab,resizeNearestNeighbor:sb,nonMaxSuppression:ub,nonMaxSuppressionAsync:function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),Pu(this,void 0,void 0,(function(){var i,a,s,u,c,l,f;return Mu(this,(function(d){switch(d.label){case 0:return i=wf(e,"boxes","nonMaxSuppressionAsync"),a=wf(t,"scores","nonMaxSuppressionAsync"),s=ib(i,a,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return u=d.sent(),c=u[0],l=u[1],f=Pp(c,l,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,f]}}))}))},nonMaxSuppressionWithScore:cb,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,o,i){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0),Pu(this,void 0,void 0,(function(){var a,s,u,c,l,f,d;return Mu(this,(function(p){switch(p.label){case 0:return a=wf(e,"boxes","nonMaxSuppressionAsync"),s=wf(t,"scores","nonMaxSuppressionAsync"),u=ib(a,s,n,r,o,i),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return c=p.sent(),l=c[0],f=c[1],d=Mp(l,f,n,r,o,i),a!==e&&a.dispose(),s!==t&&s.dispose(),[2,d]}}))}))},cropAndResize:lb}),db=function(e,t){return!(e>0)||"linear"===t},pb=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},hb=function(e,t){var n=t,r=dp(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},vb=function(e,t,n){if("linear"===t)return e;if("relu"===t)return mx(e);if("elu"===t)return px(e);if("relu6"===t)return gx(e);if("prelu"===t)return vx(e,n);throw new Error("Unknown fused activation "+t+".")},mb=Of({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,i=void 0!==o&&o,a=e.transposeB,s=void 0!==a&&a,u=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights;if(!1===db(cl.state.gradientDepth,l)){var d=Py(n,r,i,s);return null!=u&&(d=Bg(d,u)),vb(d,l,f)}var p=wf(n,"a","fused matMul"),h=wf(r,"b","fused matMul");t=rl(p,h),p=t[0],h=t[1];var v=i?p.shape[p.rank-2]:p.shape[p.rank-1],m=s?h.shape[h.rank-1]:h.shape[h.rank-2],g=i?p.shape[p.rank-1]:p.shape[p.rank-2],y=s?h.shape[h.rank-2]:h.shape[h.rank-1],x=p.shape.slice(0,-2),b=h.shape.slice(0,-2),w=tc(x),C=tc(b);Qu(p.rank>=2&&h.rank>=2&&p.rank===h.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+h.rank+"."})),Qu(nc(x,b),(function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+b+") of Tensors with shapes "+p.shape+" and "+h.shape+" must match."})),Qu(v===m,(function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+p.shape+" and "+h.shape+" and transposeA="+i+" and transposeB="+s+" must match."}));var S,E,k=p.shape.slice(0,-2).concat([g,y]),_=i?p.as3D(w,v,g):p.as3D(w,g,v),R=s?h.as3D(C,y,m):h.as3D(C,m,y);null!=u&&pp(k,(S=rl(S=wf(u,"bias","fused matMul"),p)[0]).shape),null!=f&&(E=wf(f,"prelu weights","fused matMul"));var I={a:_,b:R};null!=u&&(I.bias=S),null!=f&&(I.preluActivationWeights=E);var A=[_,R];return cl.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:_,b:R,transposeA:i,transposeB:s,bias:S,activation:l,preluActivationWeights:E});return t([_,R,n]),n}),I,(function(e,t){var n=t[0],r=t[1],o=t[2],a=pb(e,o,l),c={};return null!=u&&(c={bias:function(){return hb(S,a)}}),i||s?!i&&s?Object.assign({a:function(){return a.matMul(r,!1,!1)},b:function(){return a.matMul(n,!0,!1)}},c):i&&!s?Object.assign({a:function(){return r.matMul(a,!1,!0)},b:function(){return n.matMul(a,!1,!1)}},c):Object.assign({a:function(){return r.matMul(a,!0,!0)},b:function(){return a.matMul(n,!0,!0)}},c):Object.assign({a:function(){return a.matMul(r,!1,!0)},b:function(){return n.matMul(a,!0,!1)}},c)}),"_FusedMatMul",{transposeA:i,transposeB:s,activation:l},A,[!0]).reshape(k)}}),gb=Of({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(d=d||"linear",!1===db(cl.state.gradientDepth,d)){var h=ky(t,n,r,o,a,u,c);return null!=l&&(h=Bg(h,l)),vb(h,d,p)}var v=wf(t,"x","conv2d"),m=wf(n,"filter","conv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Qu(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),Qu(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."})),null!=c&&Qu(rc(o),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."})),Qu(g.shape[3]===m.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."})),Qu(Ep(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),Qu("NHWC"===a,(function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."}));var x,b,w=mp(g.shape,m.shape,r,u,o,c);null!=l&&(x=rl(x=wf(l,"bias","fused conv2d"),v)[0],pp(w.outShape,x.shape)),null!=p&&(b=wf(p,"prelu weights","fused conv2d"));var C={x:g,filter:m};null!=l&&(C.bias=x),null!=p&&(C.preluActivationWeights=b);var S=[m,g],E=cl.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:w,bias:x,activation:d,preluActivationWeights:b});return t([m,g,n]),n}),C,(function(e,t){var n=t,i=n[0],a=n[1],s=n[2],c=pb(e,s,d);Qu(Sp(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var f={};return null!=l&&(f={bias:function(){return hb(x,c)}}),Object.assign({x:function(){return Iy(a.shape,c,i,r,o)},filter:function(){return Ry(a,c,i.shape,r,o)}},f)}),"FusedConv2D",{convInfo:w,activation:d},S,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),yb=Of({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(!1===db(cl.state.gradientDepth,d)){var h=Ay(t,n,r,o,a,u,c);return null!=l&&(h=Bg(h,l)),vb(h,d,p)}var v=wf(t,"x","depthwiseConv2d"),m=wf(n,"filter","depthwiseConv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Qu(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),Qu(4===m.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."})),Qu(g.shape[3]===m.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."})),null==u&&(u=[1,1]),Qu(Ep(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=c&&Qu(rc(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."}));var x,b,w=mp(g.shape,m.shape,r,u,o,c,!0);null!=l&&(x=rl(x=wf(l,"bias","fused conv2d"),v)[0],pp(w.outShape,x.shape)),null!=p&&(b=wf(p,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:m};null!=l&&(C.bias=x),null!=p&&(C.preluActivationWeights=b);var S=[m,g],E=cl.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:m,convInfo:w,bias:x,activation:d,preluActivationWeights:b});return t([m,g,n]),n}),C,(function(e,t){Qu(Sp(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],o=t[2],i=pb(e,o,d),a={};return null!=l&&(a={bias:function(){return hb(x,i)}}),Object.assign({x:function(){return Ty(r.shape,i,n,w)},filter:function(){return Dy(r,i,n.shape,w)}},a)}),"FusedDepthwiseConv2D",{convInfo:w,activation:d},S,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),xb=Object.freeze({matMul:mb,conv2d:gb,depthwiseConv2d:yb}),bb=Object.freeze({image:fb,linalg:ob,losses:Zx,spectral:Nx,fused:xb,signal:Vx,square:Pm,squaredDifference:Lm,conv1d:Ey,conv2d:ky,conv3d:_y,depthwiseConv2d:Ay,separableConv2d:Ny,conv2dTranspose:Oy,conv3dTranspose:Fy,op:Of,batchNormalization2d:Eg,batchNormalization3d:kg,batchNormalization4d:_g,batchNormalization:Rg,batchNorm:Ig,batchNorm2d:Ag,batchNorm3d:Tg,batchNorm4d:Dg,booleanMaskAsync:function(e,t,n){return Pu(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,f,d,p,h,v;return Mu(this,(function(m){switch(m.label){case 0:for(r=wf(e,"tensor","boolMask"),o=wf(t,"mask","boolMask","bool"),i=null==n?0:n,a=o.rank,s=r.shape,Qu(a>0,(function(){return"mask cannot be scalar"})),Ju(s.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=i;c<i+a;c++)u*=s[c];return l=s.slice(0,i).concat([u],s.slice(i+a)),f=r.reshape(l),d=o.reshape([-1]),[4,Lg(d)];case 1:return p=m.sent(),h=p.squeeze([1]),v=xy(f,h,i),e!==r&&r.dispose(),t!==o&&o.dispose(),h.dispose(),f.dispose(),d.dispose(),p.dispose(),[2,v]}}))}))},complex:Ff,real:Pf,imag:Mf,concat:Yf,concat1d:Qf,concat2d:Jf,concat3d:Zf,concat4d:ed,split:td,matMul:Py,dot:My,outerProduct:Ly,reverse:By,reverse1d:zy,reverse2d:jy,reverse3d:Wy,reverse4d:Uy,maxPool:Gy,avgPool:qy,pool:Ky,maxPool3d:$y,avgPool3d:Xy,slice:Yy,slice1d:Qy,slice2d:Jy,slice3d:Zy,slice4d:ex,abs:Bm,acos:zm,acosh:jm,asin:Wm,asinh:Um,atan:Vm,atanh:Hm,ceil:Gm,clipByValue:qm,cos:Km,cosh:$m,erf:Xm,exp:Ym,expm1:Qm,floor:Jm,log:Zm,log1p:eg,logSigmoid:tg,neg:ng,reciprocal:rg,round:og,rsqrt:ig,sigmoid:ag,sign:sg,isNaN:ug,isInf:cg,isFinite:lg,sin:fg,sinh:dg,softplus:pg,sqrt:hg,step:vg,tan:mg,tanh:gg,all:nx,any:rx,argMax:ox,argMin:ix,logSumExp:ax,max:sx,mean:ux,min:cx,moments:lx,sum:fx,prod:dx,equal:iy,equalStrict:ay,greater:sy,greaterEqual:uy,greaterEqualStrict:cy,greaterStrict:ly,less:fy,lessEqual:dy,lessEqualStrict:py,lessStrict:hy,notEqual:vy,notEqualStrict:my,add:Bg,addN:zg,addStrict:jg,atan2:Wg,div:Ug,divNoNan:Vg,divStrict:Hg,floorDiv:Gg,maximum:qg,maximumStrict:Kg,minimum:$g,minimumStrict:Xg,mod:Yg,modStrict:Qg,mul:Jg,mulStrict:Zg,pow:ey,powStrict:ty,squaredDifferenceStrict:ny,sub:ry,subStrict:oy,elu:px,leakyRelu:hx,prelu:vx,relu:mx,relu6:gx,selu:yx,logicalAnd:Ng,logicalNot:Og,logicalOr:Fg,logicalXor:Pg,where:Mg,whereAsync:Lg,buffer:hd,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:vd,broadcastTo:md,cast:gd,clone:yd,cumsum:xd,depthToSpace:bd,expandDims:wd,eye:Cd,multinomial:Sd,oneHot:Ed,pad:kd,pad1d:_d,pad2d:Rd,pad3d:Id,pad4d:Ad,rand:Td,randomNormal:Dd,randomGamma:Nd,randomUniform:Od,reshape:Fd,spaceToBatchND:Pd,squeeze:Md,stack:Ld,tile:Bd,truncatedNormal:zd,unstack:jd,setdiff1dAsync:function(e,t){return Pu(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f;return Mu(this,(function(d){switch(d.label){case 0:return n=wf(e,"x","setdiff1d"),r=wf(t,"y","setdiff1d"),Qu(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Qu(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Qu(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=d.sent(),[4,r.data()];case 2:for(i=d.sent(),a=new Set(i),s=0,l=0;l<o.length;l++)a.has(o[l])||s++;for(u=new Uc([s],n.dtype),c=new Uc([s],"int32"),l=0,f=0;l<o.length;l++)a.has(o[l])||(u.values[f]=o[l],c.values[f]=l,f++);return[2,[u.toTensor(),c.toTensor()]]}}))}))},fill:qf,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return cl.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:Hf,range:Kf,scalar:zf,tensor:Lf,tensor1d:jf,tensor2d:Wf,tensor3d:Uf,tensor4d:Vf,tensor5d:function(e,t,n){if(Zu(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=xf(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Bf(e,t,r,n)},tensor6d:function(e,t,n){if(Zu(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=xf(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Bf(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),cl.makeVariable(e,t,n,r)},zeros:Gf,onesLike:$f,zerosLike:Xf,transpose:xx,softmax:ap,logSoftmax:sp,localResponseNormalization:bx,norm:wx,gather:xy,unsortedSegmentSum:by,basicLSTMCell:Cx,multiRNNCell:Sx,movingAverage:Ex,stridedSlice:kx,topk:_x,scatterND:Rx,fft:Ix,ifft:Ax,rfft:Tx,irfft:Dx,sparseToDense:Ox,gatherND:Fx,diag:Px,dropout:Mx,hannWindow:zx,hammingWindow:jx,frame:Wx,stft:Ux,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Pu(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,f,d,p,h,v,m;return Mu(this,(function(g){switch(g.label){case 0:return r=wf(e,"predictions","inTopK"),o=wf(t,"targets","inTopK"),Qu(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),Qu(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),Ju(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],Qu(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return a=g.sent(),[4,o.data()];case 2:for(s=g.sent(),u=[a.length/i,i],l=u[1],f=fc("bool",c=u[0]),d=0;d<c;d++){for(p=d*l,h=a.subarray(p,p+l),v=[],m=0;m<h.length;m++)v.push({value:h[m],index:m});for(v.sort((function(e,t){return t.value-e.value})),f[d]=0,m=0;m<n;m++)if(v[m].index===s[d]){f[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,Lf(f,o.shape,"bool")]}}))}))}});function wb(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Qu("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function Cb(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Sb=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new up(t,cl),t}return Fu(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Bu().get("IS_NODE")&&yf("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Ap(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Oc(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return hd(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return cl.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Pu(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){return t=Tc(),e(),[2,{kernelMs:Tc()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:cl.keep(e.clone()),imag:cl.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(wb(e,"slice"),rp(e.shape,t,n)){var r=op(t,e.strides),o=tc(n);return Lf(this.readSync(e.dataId).subarray(r,r+o),n,e.dtype)}for(var i=hd(n,e.dtype),a=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s).map((function(e,n){return e+t[n]}));i.values[s]=a.get.apply(a,u)}return i.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){wb(e,"stridedSlice");var o=ep(t,n,r);if(o.some((function(e){return 0===e})))return Lf([],o);for(var i=hd(o,e.dtype),a=this.bufferSync(e),s=0;s<i.size;s++){for(var u=i.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+t[l];i.set.apply(i,[a.get.apply(a,c)].concat(u))}return i.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=hd([e.size,e.size],e.dtype),r=n.values,o=0;o<t.length;o++)r[o*e.size+o]=t[o];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,i=0;i<e.rank;i++)i!==t&&(r[o++]=e.shape[i]);var a=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(i=0;i<u.length;i++)a[t]=i,u[i]=this.slice(e,a,s).reshape(r);return u},t.prototype.reverse=function(e,t){wb(e,"reverse");for(var n=hd(e.shape,e.dtype),r=this.bufferSync(e),o=function(o){var i=n.indexToLoc(o),a=i.slice();t.forEach((function(t){return a[t]=e.shape[t]-1-a[t]})),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return Pf(e)})),o=e.map((function(e){return Mf(e)}));return Ff(this.concat(r,t),this.concat(o,t))}var i=e.map((function(e){var n=tc(e.shape.slice(t));return e.as2D(-1,n)})),a=Nf(i.map((function(e){return e.shape})),1),s=hd(a,e[0].dtype).values;if(1===i[0].shape[0]){var u=0;i.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var c=0;i.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,o=0;o<e.shape[0];++o)for(var i=o*a[1]+c,u=0;u<e.shape[1];++u)s[i+u]=t[r++];c+=e.shape[1]}))}var l=Nf(e.map((function(e){return e.shape})),t);return Lf(s,l,e[0].dtype)},t.prototype.neg=function(e){return wb(e,"neg"),this.multiply(zf(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,tl(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;wb(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=hd(e[0].shape,e[0].dtype),o=r.values,i=0;i<e.length;i++)for(var a=n[i],s=0;s<o.length;s++)o[s]+=a[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=cc([t],e.shape),r=this.max(e,n),o=_f(r.shape,n),i=this.subtract(e,r.reshape(o)),a=this.exp(i),s=this.sum(a,n).reshape(o);return this.realDivide(a,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,tl(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return wb([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){wb([e,t],"matMul");for(var o=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=l[0],d=l[1],p=l[2],h=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=h[0],m=h[1],g=h[2],y=i*a,x=hd([s,i,a],e.dtype),b=x.values,w=this.blockSize,C=0;C<s;C++)for(var S=0;S<i;S+=w)for(var E=0;E<a;E+=w)for(var k=0;k<o;k+=w)for(var _=Math.min(S+w,i),R=Math.min(E+w,a),I=Math.min(k+w,o),A=S;A<_;A++)for(var T=E;T<R;T++){for(var D=0,N=k;N<I;N++)D+=u[C*f+A*d+N*p]*c[N*v+T*m+C*g];b[C*y+(A*a+T)]+=D}return x.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,i=e.bias,a=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,o);return i&&(u=this.add(u,i)),a&&(u=Cb(this,u,a,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,tl(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return wb([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return wb([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){wb(e,"sum"),Rf("sum",t,e.rank);for(var n=kf(e.shape,t),r=n[0],o=n[1],i=Gf(r,tl(e.dtype,"int32")),a=tc(o),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,f=0,d=0;d<a;++d)f+=u[l+d];s[c]=f}return i},t.prototype.prod=function(e,t){wb(e,"sum");for(var n=kf(e.shape,t),r=n[0],o=n[1],i=Gf(r,tl(e.dtype,"int32")),a=tc(o),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,f=1,d=0;d<a;++d)f*=u[l+d];s[c]=f}return i},t.prototype.unsortedSegmentSum=function(e,t,n){wb(e,"unsortedSegmentSum");for(var r=[],o=e.rank-t.rank,i=0;i<o;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var a=zf(i,"int32"),s=iy(a,t).asType("float32").mul(e).sum(0);r.push(s)}return Ld(r)},t.prototype.argMin=function(e,t){wb(e,"argMin");var n=[t];Rf("argMin",n,e.rank);for(var r=kf(e.shape,n),o=r[0],i=r[1],a=Gf(o,"int32"),s=tc(i),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var f=l*s,d=c[f],p=0,h=0;h<s;++h){var v=c[f+h];v<d&&(d=v,p=h)}u[l]=p}return a},t.prototype.argMax=function(e,t){wb(e,"argMax");var n=[t];Rf("argMax",n,e.rank);for(var r=kf(e.shape,n),o=r[0],i=r[1],a=Gf(o,"int32"),s=tc(i),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var f=l*s,d=c[f],p=0,h=0;h<s;++h){var v=c[f+h];v>d&&(d=v,p=h)}u[l]=p}return a},t.prototype.cumsum=function(e,t,n,r){if(wb(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=tl(e.dtype,"int32"),i=Gf(e.shape,o),a=this.readSync(i.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],c=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},l=0;l<s.length;l+=u)for(var f=0;f<u;f++){var d=c(l,f);if(0===f)a[d]=n?0:s[d];else{var p=c(l,f-1);a[d]=n?s[p]+a[p]:s[d]+a[p]}}return i},t.prototype.equal=function(e,t){return wb([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return wb([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return wb([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return wb([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return wb([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return wb([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){wb(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return wb([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return wb([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){wb([e,t,n],"select");for(var r=this.readSync(e.dataId),o=this.readSync(t.dataId),i=this.readSync(n.dataId),a=Gf(t.shape,tl(t.dtype,n.dtype)),s=this.readSync(a.dataId),u=0,c=0===e.rank||e.rank>1||1===t.rank?1:tc(t.shape.slice(1)),l=0;l<r.length;l++)for(var f=0;f<c;f++)1===r[l]?s[u++]=o[l]:s[u++]=i[l];return a},t.prototype.where=function(e){wb([e],"where");var t=this.readSync(e.dataId);return Hp(e.shape,t)},t.prototype.topk=function(e,t,n){return wb(e,"topk"),Vp(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){wb(e,"min"),Rf("min",t,e.rank);for(var n=kf(e.shape,t),r=n[0],o=n[1],i=Gf(r,e.dtype),a=tc(o),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,f=u[l],d=0;d<a;++d){var p=u[l+d];p<f&&(f=p)}s[c]=f}return i},t.prototype.minimum=function(e,t){return wb([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return wb([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){wb(e,"max"),Rf("max",t,e.rank);for(var n=kf(e.shape,t),r=n[0],o=n[1],i=Gf(r,e.dtype),a=tc(o),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,f=u[l],d=0;d<a;++d){var p=u[l+d];p>f&&(f=p)}s[c]=f}return i},t.prototype.maximum=function(e,t){return wb([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){wb(e,"all"),Rf("all",t,e.rank);for(var n=kf(e.shape,t),r=n[0],o=n[1],i=Gf(r,e.dtype),a=tc(o),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,f=u[l],d=0;d<a;++d){var p=u[l+d];f=f&&p}s[c]=f}return i},t.prototype.any=function(e,t){wb(e,"any"),Rf("any",t,e.rank);for(var n=kf(e.shape,t),r=n[0],o=n[1],i=Gf(r,e.dtype),a=tc(o),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,f=u[l],d=0;d<a;++d){var p=u[l+d];f=f||p}s[c]=f}return i},t.prototype.squaredDifference=function(e,t){return wb([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){wb(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){wb(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){wb(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){wb(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){wb(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){wb(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){wb(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);t[r]-o<.5?n[r]=Math.floor(t[r]):t[r]-o>.5?n[r]=Math.ceil(t[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){wb(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){wb(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){wb(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){wb(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log1p(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){wb(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){wb(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){wb(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){wb(e,"relu");for(var t=Gf(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},t.prototype.relu6=function(e){wb(e,"relu");for(var t=Gf(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return t},t.prototype.prelu=function(e,t){return wb([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){wb(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){wb([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=this.readSync(e.dataId),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){wb(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){wb(e,"clip");for(var r=new Float32Array(e.size),o=this.readSync(e.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>n?n:a<t?t:a}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var o=n[2*r],i=n[2*r+1];t[r]=Math.hypot(o,i)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){wb(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){wb(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){wb(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var i,a=r[o]>-t,s=r[o]<t,u=Math.exp(r[o]);i=s?u:a?r[o]:Math.log(1+u),n[o]=i}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){wb(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){wb(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){wb(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){wb(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){wb(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){wb(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return wb([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){wb(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){wb(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){wb(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=oc(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){wb(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){wb(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){wb(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){wb(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),i=Math.abs(n[r]),a=1/(1+.3275911*i);t[r]=o*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-i*i))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),wb(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var i=r[o];isNaN(i)?n[o]=NaN:n[o]=i>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights,s=this.conv2d(t,n,r);return o&&(s=this.add(s,o)),i&&(s=Cb(this,s,i,a)),s},t.prototype.conv2d=function(e,t,n){wb([e,t],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=hd(n.outShape,e.dtype),f=e.strides[0],d=c?e.strides[1]:e.strides[2],p=c?e.strides[2]:1,h=c?1:e.strides[1],v=l.strides[0],m=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,y=c?1:l.strides[1],x=this.readSync(e.dataId),b=this.readSync(t.dataId),w=l.values,C=0;C<n.batchSize;++C)for(var S=C*f,E=C*v,k=0;k<n.outHeight;++k)for(var _=E+k*m,R=k*n.strideHeight-u,I=0;I<r;I++){var A=R+I*i;if(!(A<0||A>=n.inHeight))for(var T=I*t.strides[0],D=S+A*d,N=0;N<n.outWidth;++N)for(var O=_+N*g,F=N*n.strideWidth-s,P=0;P<o;P++){var M=F+P*a;if(!(M<0||M>=n.inWidth))for(var L=D+M*p,B=T+P*t.strides[1],z=0;z<n.inChannels;++z){for(var j=x[L+z*h],W=0;W<n.outChannels;++W)w[O+W*y]+=j*b[B+W];B+=n.outChannels}}}return l.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,o=n.filterHeight,i=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,f=n.padInfo.top,d=hd(n.outShape,e.dtype),p=this.readSync(e.dataId),h=this.readSync(t.dataId),v=d.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],y=m*d.strides[0],x=0;x<n.outDepth;++x)for(var b=y+x*d.strides[1],w=x*n.strideDepth-c,C=0;C<r;C++){var S=w+C*a;if(!(S<0||S>=n.inDepth))for(var E=C*t.strides[0],k=g+S*e.strides[1],_=0;_<n.outHeight;++_)for(var R=b+_*d.strides[2],I=_*n.strideHeight-f,A=0;A<o;A++){var T=I+A*s;if(!(T<0||T>=n.inHeight))for(var D=E+A*t.strides[1],N=k+T*e.strides[2],O=0;O<n.outWidth;++O)for(var F=R+O*n.outChannels,P=O*n.strideWidth-l,M=0;M<i;M++){var L=P+M*u;if(!(L<0||L>=n.inWidth))for(var B=D+M*t.strides[2],z=N+L*n.inChannels,j=B,W=0;W<n.inChannels;++W){for(var U=p[z+W],V=0;V<n.outChannels;++V)v[F+V]+=U*h[j+V];j+=n.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){wb([e,t],"conv2dDerInput");for(var r=hd(n.inShape,"float32"),o=r.values,i=this.readSync(e.dataId),a=this.readSync(t.dataId),s=t.strides,u=s[0],c=s[1],l=s[2],f=n.batchSize,d=n.filterHeight,p=n.filterWidth,h=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,y=n.outHeight,x=n.outWidth,b=n.strideHeight,w=n.strideWidth,C=n.dataFormat,S=d-1-n.padInfo.top,E=p-1-n.padInfo.left,k="channelsLast"===C,_=r.strides[0],R=k?r.strides[1]:r.strides[2],I=k?r.strides[2]:1,A=k?1:r.strides[1],T=e.strides[0],D=k?e.strides[1]:e.strides[2],N=k?e.strides[2]:1,O=k?1:e.strides[1],F=0;F<f;++F)for(var P=0;P<h;++P)for(var M=0;M<v;++M)for(var L=M-S,B=Math.max(0,Math.ceil(L/b)),z=Math.min(y,(d+L)/b),j=0;j<m;++j){for(var W=j-E,U=Math.max(0,Math.ceil(W/w)),V=Math.min(x,(p+W)/w),H=0,G=B;G<z;++G)for(var q=G*b-L,K=U;K<V;++K)for(var $=T*F+D*G+N*K,X=u*(d-1-q)+c*(p-1-(K*w-W))+l*P,Y=0;Y<g;++Y)H+=i[$+O*Y]*a[X+Y];o[_*F+R*M+I*j+A*P]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=hd(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=i[3],l=this.readSync(e.dataId),f=e.strides,d=f[0],p=f[1],h=f[2],v=f[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],x=g[1],b=g[2],w=g[3],C=n.batchSize,S=n.filterDepth,E=n.filterHeight,k=n.filterWidth,_=n.inChannels,R=n.inDepth,I=n.inHeight,A=n.inWidth,T=n.outChannels,D=n.outDepth,N=n.outHeight,O=n.outWidth,F=n.strideDepth,P=n.strideHeight,M=n.strideWidth,L=S-1-n.padInfo.front,B=E-1-n.padInfo.top,z=k-1-n.padInfo.left,j=0;j<C;++j)for(var W=0;W<_;++W)for(var U=0;U<R;++U)for(var V=U-L,H=Math.max(0,Math.ceil(V/F)),G=Math.min(D,(S+V)/F),q=0;q<I;++q)for(var K=q-B,$=Math.max(0,Math.ceil(K/P)),X=Math.min(N,(E+K)/P),Y=0;Y<A;++Y){for(var Q=Y-z,J=Math.max(0,Math.ceil(Q/M)),Z=Math.min(O,(k+Q)/M),ee=0,te=H;te<G;++te)for(var ne=te*F-V,re=$;re<X;++re)for(var oe=re*P-K,ie=J;ie<Z;++ie)for(var ae=d*j+p*te+h*re+v*ie,se=y*(S-1-ne)+x*(E-1-oe)+b*(k-1-(ie*M-Q))+w*W,ue=0;ue<T;++ue)ee+=l[ae+ue]*m[se+ue];o[a*j+s*U+u*q+c*Y+W]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){wb([e,t],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s="channelsLast"===n.dataFormat,u=hd(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,f=this.bufferSync(e),d=this.bufferSync(t),p=0;p<i;++p)for(var h=Math.max(0,Math.ceil((l-p)/r)),v=Math.min(n.outHeight,(n.inHeight+l-p)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((c-m)/o)),y=Math.min(n.outWidth,(n.inWidth+c-m)/o),x=0;x<n.inChannels;++x)for(var b=0;b<n.outChannels;++b){for(var w=0,C=0;C<n.batchSize;++C)for(var S=h;S<v;++S)for(var E=p+S*r-l,k=g;k<y;++k){var _=m+k*o-c;w+=s?f.get(C,E,_,x)*d.get(C,S,k,b):f.get(C,x,E,_)*d.get(C,b,S,k)}u.set(w,p,m,x,b)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=hd(n.filterShape,"float32"),l=c.values,f=c.strides,d=f[0],p=f[1],h=f[2],v=f[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],x=g[1],b=g[2],w=g[3],C=this.readSync(e.dataId),S=e.strides,E=S[0],k=S[1],_=S[2],R=S[3],I=n.padInfo.front,A=n.padInfo.left,T=n.padInfo.top,D=0;D<a;++D)for(var N=Math.max(0,Math.ceil((I-D)/r)),O=Math.min(n.outDepth,(n.inDepth+I-D)/r),F=D*d,P=0;P<s;++P)for(var M=Math.max(0,Math.ceil((T-P)/o)),L=Math.min(n.outHeight,(n.inHeight+T-P)/o),B=P*p+F,z=0;z<u;++z)for(var j=Math.max(0,Math.ceil((A-z)/i)),W=Math.min(n.outWidth,(n.inWidth+A-z)/i),U=z*h+B,V=0;V<n.inChannels;++V)for(var H=V*v+U,G=0;G<n.outChannels;++G){for(var q=0,K=0;K<n.batchSize;++K)for(var $=K*E,X=K*y,Y=N;Y<O;++Y)for(var Q=(D+Y*r-I)*k+$,J=Y*x+X,Z=M;Z<L;++Z)for(var ee=(P+Z*o-T)*_+Q,te=Z*b+J,ne=j;ne<W;++ne){var re=ne*w+te;q+=C[(z+ne*i-A)*R+ee+V]*m[re+G]}l[H+G]=q}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return o&&(s=this.add(s,o)),i&&(s=Cb(this,s,i,a)),s},t.prototype.depthwiseConv2D=function(e,t,n){wb([e,t],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=hd(n.outShape,e.dtype),f=this.readSync(e.dataId),d=this.readSync(t.dataId),p=l.values,h=0;h<n.batchSize;++h)for(var v=h*e.strides[0],m=h*l.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*l.strides[1],x=g*n.strideHeight-s,b=0;b<r;++b){var w=x+b*i;if(!(w<0||w>=n.inHeight))for(var C=b*t.strides[0],S=v+w*e.strides[1],E=0;E<n.outWidth;++E)for(var k=y+E*l.strides[2],_=E*n.strideWidth-u,R=0;R<o;++R){var I=_+R*a;if(!(I<0||I>=n.inWidth))for(var A=C+R*t.strides[1],T=S+I*n.inChannels,D=k,N=A,O=0;O<n.inChannels;++O){for(var F=f[T+O],P=0;P<c;++P)p[D+P]+=F*d[N+P];D+=c,N+=c}}}return l.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){wb([e,t],"depthwiseConv2DDerInput");for(var r=hd(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],c=this.readSync(e.dataId),l=e.strides,f=l[0],d=l[1],p=l[2],h=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],x=n.batchSize,b=n.filterHeight,w=n.filterWidth,C=n.inChannels,S=n.inHeight,E=n.inWidth,k=n.outChannels,_=n.outHeight,R=n.outWidth,I=n.strideHeight,A=n.strideWidth,T=b-1-n.padInfo.top,D=w-1-n.padInfo.left,N=k/C,O=0;O<x;++O)for(var F=0;F<C;++F)for(var P=0;P<S;++P)for(var M=P-T,L=Math.max(0,Math.ceil(M/I)),B=Math.min(_,(b+M)/I),z=0;z<E;++z){for(var j=z-D,W=Math.max(0,Math.ceil(j/A)),U=Math.min(R,(w+j)/A),V=0,H=L;H<B;++H)for(var G=H*I-M,q=W;q<U;++q)for(var K=f*O+d*H+p*q,$=m*(b-1-G)+g*(w-1-(q*A-j))+y*F,X=0;X<N;++X)V+=c[K+(F*N+X)]*h[$+X];o[a*O+s*P+u*z+F]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){wb([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=hd(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,f=this.bufferSync(e),d=this.bufferSync(t),p=0;p<i;++p)for(var h=Math.max(0,Math.ceil((c-p)/r)),v=Math.min(n.outHeight,(n.inHeight+c-p)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),y=Math.min(n.outWidth,(n.inWidth+u-m)/o),x=0;x<n.outChannels;++x){for(var b=Math.trunc(x/l),w=x%l,C=0,S=0;S<n.batchSize;++S)for(var E=h;E<v;++E)for(var k=p+E*r-c,_=g;_<y;++_){var R=m+_*o-u;C+=f.get(S,k,R,b)*d.get(S,E,_,x)}s.set(C,p,m,b,w)}return s.toTensor()},t.prototype.tile=function(e,t){return wb(e,"tile"),Up(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){wb(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),o=t.map((function(e){return e[0]})),i=this.bufferSync(e),a=hd(r,e.dtype);0!==n&&a.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),c=u.map((function(e,t){return e+o[t]}));a.set.apply(a,[i.get.apply(i,u)].concat(c))}return a.toTensor()},t.prototype.transpose=function(e,t){wb(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=this.readSync(e.dataId),i=hd(n,e.dtype),a=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[t[c]];var l=i.locToIndex(u);i.values[l]=o[r]}return i.toTensor()},t.prototype.gather=function(e,t,n){wb([e,t],"gather");var r=e.shape.slice(),o=this.readSync(t.dataId);r[n]=o.length;for(var i=hd(r,e.dtype),a=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s),c=u.slice();c[n]=o[u[n]];var l=a.locToIndex(c);i.values[s]=a.values[l]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){wb([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),o=Wd(e.shape,t,r),i=Ud(o.length,t.length),a=Vd(e.shape,t,r),s=Hd(n,t.length),u=Gd(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){wb([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),s=Wd(a.shape,t,r,!1),u=Ud(s.length,t.length,!1),c=Vd(a.shape,t,r,!1);return a.reshape(s).transpose(u).reshape(c)},t.prototype.pool=function(e,t,n){wb(e,"pool");for(var r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,f="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(e.dataId),p=hd(t.outShape,e.dtype),h=p.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var x=y*v,b=y*e.strides[0],w=0;w<t.inChannels;++w)for(var C=0;C<t.outHeight;++C)for(var S=C*r-c,E=Math.max(0,S),k=Math.min(t.inHeight,s+S),_=x+C*m,R=0;R<t.outWidth;++R){for(var I=R*o-l,A=Math.max(0,I),T=Math.min(t.inWidth,u+I),D=f,N=0,O=0,F=E;F<k;F+=i){for(var P=b+F*e.strides[1],M=A;M<T;M+=a){var L=d[P+M*e.strides[2]+w];"max"===n&&L>D?D=L:"avg"===n&&(N+=L,O++)}if(isNaN(D))break}h[_+R*g+w]="avg"===n?N/O:D}return p.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=hd(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,f=this.bufferSync(e),d=0;d<t.batchSize;++d)for(var p=0;p<t.inChannels;++p)for(var h=0;h<t.outHeight;++h){for(var v=h*r-c,m=v;m<0;)m+=i;for(var g=Math.min(t.inHeight,s+v),y=0;y<t.outWidth;++y){for(var x=y*o-l,b=x;b<0;)b+=a;for(var w=Math.min(t.inWidth,u+x),C=Number.NEGATIVE_INFINITY,S=-1,E=m;E<g;E+=i)for(var k=E-v,_=b;_<w;_+=a){var R=_-x,I=f.get(d,E,_,p);I>C&&(C=I,S=k*u+R)}n.set(S,d,h,y,p)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){wb([t,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(t,r),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=l-1-r.padInfo.left,d=c-1-r.padInfo.top,p=hd(t.shape,"float32"),h=this.bufferSync(o),v=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var x=0;x<r.inWidth;++x){for(var b=y-d,w=x-f,C=0,S=0;S<c;S+=s){var E=(b+S)/i;if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var k=0;k<l;k+=u){var _=(w+k)/a;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var R=c*l-1-h.get(m,E,_,g)===S*l+k?1:0;0!==R&&(C+=v.get(m,E,_,g)*R)}}}p.set(C,m,y,x,g)}return p.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){wb([e,t],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,f=l-1-n.padInfo.left,d=c-1-n.padInfo.top,p=hd(t.shape,"float32"),h=1/(i*a),v=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var x=0;x<n.inWidth;++x){for(var b=y-d,w=x-f,C=0,S=0;S<c;S+=s){var E=(b+S)/r;if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var k=0;k<l;k+=u){var _=(w+k)/o;_<0||_>=n.outWidth||Math.floor(_)!==_||(C+=v.get(m,E,_,g))}}p.set(C*h,m,y,x,g)}return p.toTensor()},t.prototype.pool3d=function(e,t,n){wb(e,"pool3d");for(var r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=hd(t.outShape,e.dtype),y=g.values,x=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],b=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],C=t.outShape[4],S=0;S<t.batchSize;++S)for(var E=S*x,k=S*e.strides[0],_=0;_<t.inChannels;++_)for(var R=0;R<t.outDepth;++R){for(var I=R*r-d,A=I;A<0;)A+=a;for(var T=Math.min(t.inDepth,c+I),D=E+R*b,N=0;N<t.outHeight;++N){for(var O=N*o-p,F=O;F<0;)F+=s;for(var P=Math.min(t.inHeight,l+O),M=D+N*w,L=0;L<t.outWidth;++L){for(var B=L*i-h,z=B;z<0;)z+=u;for(var j=Math.min(t.inWidth,f+B),W=M+L*C,U=v,V=0,H=0,G=A;G<T;G+=a){for(var q=k+G*e.strides[1],K=F;K<P;K+=s){for(var $=q+K*e.strides[2],X=z;X<j;X+=u){var Y=m[$+X*e.strides[3]+_];if("max"===n&&Y>U?U=Y:"avg"===n&&(V+=Y,H++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}y[W+_]="avg"===n?V/H:U}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return wb(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){wb([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,v=d-1-n.padInfo.front,m=h-1-n.padInfo.left,g=p-1-n.padInfo.top,y=hd(t.shape,"float32"),x=1/(a*s*u),b=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var C=0;C<n.inChannels;++C)for(var S=0;S<n.inDepth;++S)for(var E=0;E<n.inHeight;++E)for(var k=0;k<n.inWidth;++k){for(var _=S-v,R=E-g,I=k-m,A=0,T=0;T<d;T+=c){var D=(_+T)/r;if(!(D<0||D>=n.outDepth||Math.floor(D)!==D))for(var N=0;N<p;N+=l){var O=(R+N)/o;if(!(O<0||O>=n.outHeight||Math.floor(O)!==O))for(var F=0;F<h;F+=f){var P=(I+F)/i;P<0||P>=n.outWidth||Math.floor(P)!==P||(A+=b.get(w,D,O,P,C))}}}y.set(A*x,w,S,E,k,C)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return wb(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=hd(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,v=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var x=y*r-d,b=x;b<0;)b+=a;for(var w=Math.min(t.inDepth,c+x),C=0;C<t.outHeight;++C){for(var S=C*o-p,E=S;E<0;)E+=s;for(var k=Math.min(t.inHeight,l+S),_=0;_<t.outWidth;++_){for(var R=_*i-h,I=R;I<0;)I+=u;for(var A=Math.min(t.inWidth,f+R),T=Number.NEGATIVE_INFINITY,D=-1,N=b;N<w;N+=a)for(var O=N-x,F=E;F<k;F+=s)for(var P=F-S,M=I;M<A;M+=u){var L=M-R,B=v.get(m,N,F,M,g);B>=T&&(T=B,D=O*l*f+P*l+L)}n.set(D,m,y,C,_,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){wb([t,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(t,r),i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=f-1-r.padInfo.front,v=p-1-r.padInfo.left,m=d-1-r.padInfo.top,g=hd(t.shape,"float32"),y=this.bufferSync(o),x=this.bufferSync(e),b=0;b<r.batchSize;++b)for(var w=0;w<r.inChannels;++w)for(var C=0;C<r.inDepth;++C)for(var S=0;S<r.inHeight;++S)for(var E=0;E<r.inWidth;++E){for(var k=C-h,_=S-m,R=E-v,I=0,A=0;A<f;A+=u){var T=(k+A)/i;if(!(T<0||T>=r.outDepth||Math.floor(T)!==T))for(var D=0;D<d;D+=c){var N=(_+D)/a;if(!(N<0||N>=r.outHeight||Math.floor(N)!==N))for(var O=0;O<p;O+=l){var F=(R+O)/s;if(!(F<0||F>=r.outWidth||Math.floor(F)!==F)){var P=f*d*p-1-y.get(b,T,N,F,w)===A*d*p+D*p+O?1:0;0!==P&&(I+=x.get(b,T,N,F,w)*P)}}}}g.set(I,b,C,S,E,w)}return g.toTensor()},t.prototype.cast=function(e,t){return _p(e,t,this)},t.prototype.reshape=function(e,t){return Rp(e,t)},t.prototype.avgPool=function(e,t){return wb(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){wb(e,"resizeBilinear");for(var o=e.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=this.readSync(e.dataId),l=new Float32Array(tc([i,t,n,u])),f=[r&&t>1?a-1:a,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0,h=f[0]/d[0],v=f[1]/d[1],m=0;m<i;m++)for(var g=0;g<t;g++)for(var y=h*g,x=Math.floor(y),b=y-x,w=Math.min(a-1,Math.ceil(y)),C=m*e.strides[0]+x*e.strides[1],S=m*e.strides[0]+w*e.strides[1],E=0;E<n;E++)for(var k=v*E,_=Math.floor(k),R=k-_,I=Math.min(s-1,Math.ceil(k)),A=C+_*e.strides[2],T=S+_*e.strides[2],D=C+I*e.strides[2],N=S+I*e.strides[2],O=0;O<u;O++){var F=c[A+O],P=c[T+O],M=F+(c[D+O]-F)*R,L=M+(P+(c[N+O]-P)*R-M)*b;l[p++]=L}return Lf(l,[i,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){wb([e,t],"resizeBilinearBackprop");for(var r=t.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],f=new Float32Array(o*i*a*s),d=[n&&c>1?i-1:i,n&&l>1?a-1:a],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],h=d[0]/p[0],v=d[1]/p[1],m=this.readSync(e.dataId),g=0,y=0;y<o;y++)for(var x=y*t.strides[0],b=0;b<c;b++)for(var w=b*h,C=Math.floor(w),S=Math.min(Math.ceil(w),i-1),E=x+C*t.strides[1],k=x+S*t.strides[1],_=w-C,R=1-_,I=0;I<l;I++)for(var A=I*v,T=Math.floor(A),D=Math.min(Math.ceil(A),a-1),N=A-T,O=1-N,F=E+T*t.strides[2],P=E+D*t.strides[2],M=k+T*t.strides[2],L=k+D*t.strides[2],B=R*O,z=R*N,j=_*O,W=_*N,U=0;U<s;U++){var V=m[g++];f[F+U]+=V*B,f[P+U]+=V*z,f[M+U]+=V*j,f[L+U]+=V*W}return Vf(f,[o,a,i,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){wb(e,"resizeNearestNeighbor");for(var o=e.shape,i=o[0],a=o[1],s=o[2],u=o[3],c=this.readSync(e.dataId),l=new Float32Array(i*t*n*u),f=[r&&t>1?a-1:a,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=f[0]/d[0],h=f[1]/d[1],v=0,m=0;m<i;m++)for(var g=m*e.strides[0],y=0;y<t;y++)for(var x=p*y,b=g+Math.min(a-1,r?Math.round(x):Math.floor(x))*e.strides[1],w=0;w<n;w++)for(var C=h*w,S=b+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],E=0;E<u;E++){var k=c[S+E];l[v++]=k}return Lf(l,[i,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){wb([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],f=new Float32Array(o*i*a*s),d=this.readSync(e.dataId),p=[n&&c>1?i-1:i,n&&l>1?a-1:a],h=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=p[0]/h[0],m=p[1]/h[1],g=1/v,y=1/m,x=2*Math.ceil(g)+2,b=2*Math.ceil(y)+2,w=0;w<o;w++)for(var C=w*t.strides[0],S=0;S<i;S++)for(var E=C+S*t.strides[1],k=Math.floor(S*g),_=Math.floor(k-x/2),R=0;R<a;R++)for(var I=E+R*t.strides[2],A=Math.floor(R*y),T=Math.floor(A-b/2),D=0;D<s;D++){for(var N=0,O=0;O<x;O++){var F=O+_;if(!(F<0||F>=c)){var P=C+F*e.strides[1],M=F*v;if(S===Math.min(i-1,n?Math.round(M):Math.floor(M)))for(var L=0;L<b;L++){var B=L+T;if(!(B<0||B>=l)){var z=P+B*e.strides[2],j=B*m;R===Math.min(a-1,n?Math.round(j):Math.floor(j))&&(N+=d[z+D])}}}}f[I+D]=N}return Vf(f,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,i){wb([e,t,n,o,i],"batchNorm");for(var a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),l=i?this.readSync(i.dataId):new Float32Array([0]),f=new Float32Array(a.length),d=l.length,p=c.length,h=u.length,v=s.length,m=0,g=0,y=0,x=0,b=0;b<a.length;++b)f[b]=l[m++]+(a[b]-s[g++])*c[y++]/Math.sqrt(u[x++]+r),m>=d&&(m=0),g>=v&&(g=0),y>=p&&(y=0),x>=h&&(x=0);return Vf(f,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){wb(e,"localResponseNormalization4D");var i=e.shape[3],a=i-1,s=this.readSync(e.dataId),u=e.size,c=new Float32Array(u);function l(e){for(var n=e%i,r=e-n+Math.max(0,n-t),o=e-n+Math.min(n+t,a),u=0;r<=o;r++){var c=s[r];u+=c*c}return u}for(var f=0;f<u;f++){var d=l(f),p=s[f]*Math.pow(n+r*d,-o);c[f]=p}return Vf(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,o,i,a){wb(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),f=new Float32Array(e.size),d=e.size,p=0;p<d;p++){for(var h=p%s,v=p-h+Math.max(0,h-r),m=p-h+Math.min(s,h+r+1),g=0,y=v;y<m;y++)g+=Math.pow(c[y],2);for(g=i*g+o,y=v;y<m;y++){var x=-2*i*a*c[y]*l[p]/g;p===y&&(x+=Math.pow(g,-a)),x*=u[p],f[y]+=x}}return Vf(f,e.shape)},t.prototype.multinomial=function(e,t,n,r){wb(e,"multinomial");for(var o=t?e:ap(e),i=o.shape[0],a=o.shape[1],s=Gf([i,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(o.dataId),l=0;l<i;++l){var f=l*a,d=new Float32Array(a-1);d[0]=c[f];for(var p=1;p<d.length;++p)d[p]=d[p-1]+c[f+p];for(var h=ld(r.toString()),v=l*n,m=0;m<n;++m){var g=h();u[v+m]=d.length;for(var y=0;y<d.length;y++)if(g<d[y]){u[v+m]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){wb(e,"oneHot");var o=new Float32Array(e.size*t);o.fill(r);for(var i=this.readSync(e.dataId),a=0;a<e.size;++a)i[a]>=0&&i[a]<t&&(o[a*t+i[a]]=n);return Wf(o,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return wb(e,"nonMaxSuppression"),Pp(this.readSync(e.dataId),this.readSync(t.dataId),n,r,o)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],o=hd(e.shape,"float32"),i=hd(e.shape,"float32"),a=Pf(e).as2D(n,r),s=Mf(e).as2D(n,r),u=0;u<n;u++)for(var c=a.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),f=Ff(c,l),d=this.readSync(this.fftImpl(f,t).dataId),p=0;p<r;p++){var h=Tp(d,p);o.values[u*r+p]=h.real,i.values[u*r+p]=h.imag}return Ff(o.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(o=Ff(Pf(o).div(zf(r)),Mf(o).div(zf(r)))),o}var i=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(i,r,t));return Ff(a.real,a.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),o=t/2,i=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),a=Ff(i.real,i.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),u=Ff(s.real,s.imag).as1D();a=this.fftRadix2(a,o,n),u=this.fftRadix2(u,o,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),o=0;o<Math.ceil(e/2);o++){var i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}(t,n),l=Ff(c.real,c.imag).mul(u),f=a.add(l),d=a.sub(l),p=Pf(f).concat(Pf(d)),h=Mf(f).concat(Mf(d));return Ff(p,h).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),o=0;o<t;o++){for(var i=0,a=0,s=0;s<t;s++){var u=Np(o*s,t,n),c=Tp(e,s);i+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(i/=t,a/=t),Dp(r,i,a,o)}return r},t.prototype.depthToSpace=function(e,t,n){Qu("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Qu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],o=e.shape[1],i=e.shape[2],a=e.shape[3],s=o*t,u=i*t,c=a/(t*t),l=this.readSync(e.dataId),f=new Float32Array(r*s*u*c),d=0,p=0;p<r;++p)for(var h=0;h<s;++h)for(var v=Math.floor(h/t),m=h%t,g=0;g<u;++g)for(var y=Math.floor(g/t),x=(m*t+g%t)*c,b=0;b<c;++b){var w=b+x+a*(y+i*(v+o*p));f[d++]=l[w]}return Vf(f,[r,s,u,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=pp(e.shape,t.shape),i=hd(o,n),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=fp(e.shape,o),c=fp(t.shape,o),l=i.values;if(u.length+c.length===0)for(var f=0;f<l.length;++f)l[f]=r(a[f%a.length],s[f%s.length]);else{var d=this.bufferSync(e),p=this.bufferSync(t),h=function(n){var o=i.indexToLoc(n),f=o.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var h=d.locToIndex(f),v=o.slice(-t.rank);c.forEach((function(e){return v[e]=0}));var m=p.locToIndex(v);l[n]=r(a[h],s[m])};for(f=0;f<l.length;++f)h(f)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=pp(e.shape,t.shape),o=hd(r,"float32"),i=hd(r,"float32"),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=fp(e.shape,r),c=fp(t.shape,r),l=o.values,f=i.values;if(u.length+c.length===0)for(var d=0;d<l.length;d++){var p=d%a.length,h=d%s.length,v=n(a[2*p],a[2*p+1],s[2*h],s[2*h+1]);l[d]=v.real,f[d]=v.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var i=o.indexToLoc(r),d=i.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var p=m.locToIndex(d),h=i.slice(-t.rank);c.forEach((function(e){return h[e]=0}));var v=g.locToIndex(h),y=n(a[2*p],a[2*p+1],s[2*v],s[2*v+1]);l[r]=y.real,f[r]=y.imag};for(d=0;d<l.length;d++)y(d)}return this.complex(o.toTensor(),i.toTensor())},t.prototype.split=function(e,t,n){return Wp(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,o,i){for(var a=e.shape,s=a[0],u=a[1],c=a[2],l=a[3],f=t.shape[0],d=r[0],p=r[1],h=hd([f,d,p,l],"float32"),v=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,x=h.strides,b=0;b<f;b++){var w=4*b,C=v[w],S=v[w+1],E=v[w+2],k=v[w+3],_=m[b];if(!(_>=s))for(var R=d>1?(E-C)*(u-1)/(d-1):0,I=p>1?(k-S)*(c-1)/(p-1):0,A=0;A<d;A++){var T=d>1?C*(u-1)+A*R:.5*(C+E)*(u-1);if(T<0||T>u-1)for(var D=0;D<p;D++)for(var N=0;N<l;N++){var O=N+D*x[2]+A*x[1]+b*x[0];h.values[O]=i}else if("bilinear"===o){var F=Math.floor(T),P=Math.ceil(T),M=T-F;for(D=0;D<p;D++)if((G=p>1?S*(c-1)+D*I:.5*(S+k)*(c-1))<0||G>c-1)for(N=0;N<l;N++)O=N+D*x[2]+A*x[1]+b*x[0],h.values[O]=i;else{var L=Math.floor(G),B=Math.ceil(G),z=G-L;for(N=0;N<l;N++){var j=g[O=N+L*y[2]+F*y[1]+_*y[0]],W=g[O=N+B*y[2]+F*y[1]+_*y[0]],U=g[O=N+L*y[2]+P*y[1]+_*y[0]],V=j+(W-j)*z,H=U+(g[O=N+B*y[2]+P*y[1]+_*y[0]]-U)*z;O=N+D*x[2]+A*x[1]+b*x[0],h.values[O]=V+(H-V)*M}}}else for(D=0;D<p;++D){var G;if((G=p>1?S*(c-1)+D*I:.5*(S+k)*(c-1))<0||G>c-1)for(N=0;N<l;N++)O=N+D*x[2]+A*x[1]+b*x[0],h.values[O]=i;else{var q=Math.round(G),K=Math.round(T);for(N=0;N<l;N++){var $=N+q*y[2]+K*y[1]+_*y[0],X=N+D*x[2]+A*x[1]+b*x[0];h.values[X]=g[$]}}}}}return h.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var o=Qd(0,e,n),i=o.sliceRank,a=o.numUpdates,s=o.sliceSize,u=o.strides,c=o.outputSize;return this.scatter(e,t,n,c,s,a,i,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=qd(e,t),i=o[0],a=o[1],s=o[2],u=o[3];if(0===a)return Lf([],i,e.dtype);for(var c=new Uc([a,s],e.dtype),l=this.readSync(t.dataId),f=this.readSync(e.dataId),d=0;d<a;d++){for(var p=[],h=0,v=0;v<r;v++){var m=l[d*r+v];h+=m*u[v],p.push(m)}if(h<0||h>=e.size/s)throw new Error("Invalid indices: "+p+" does not index into "+e.shape);for(var g=0;g<s;g++)c.values[d*s+g]=f[h*s+g]}return c.toTensor().reshape(i)},t.prototype.scatterND=function(e,t,n){var r=Qd(0,e,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=zf(0);return this.scatter(e,t,n,u,a,i,o,s,c,!0)},t.prototype.fill=function(e,t,n){var r=dc(n=n||Cc(t),tc(e));return r.fill(t),cl.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=dc(e.dtype,tc(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return Ip(e,t,n)},t.prototype.scatter=function(e,t,n,r,o,i,a,s,u,c){var l=[r/o,o],f=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return Lf([],n,t.dtype);var p=new Uc(l,t.dtype);p.values.fill(this.readSync(u.dataId)[0]);for(var h=0;h<i;h++){for(var v=[],m=0,g=0;g<a;g++){var y=f[h*a+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var x=0;x<o;x++)c?p.values[m*o+x]+=d[h*o+x]:p.values[m*o+x]=0===t.rank?d[0]:d[h*o+x]}return p.toTensor().reshape(n)},t}(cp);cl.registerBackend("cpu",(function(){return new Sb}),1);for(var Eb=0,kb=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,f=s.softNmsSigma,d=n;wb(i,"NonMaxSuppressionWithScore");var p=Mp(d.data.get(i.dataId).values,d.data.get(a.dataId).values,u,c,l,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;wb(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];a[s]=u*u}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Mm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n;wb([o,i],Mm);var s=a.data.get(o.dataId).values,u=a.data.get(i.dataId).values,c=function(e,t,n,r,o,i){var a=pp(e,t),s=a.length,u=kc(a),c=fc(o,tc(a)),l=e.length,f=t.length,d=kc(e),p=kc(t),h=fp(e,a),v=fp(t,a);if(h.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=i(n[m%n.length],r[m%r.length]);else{var g=function(e){var t=Pc(e,s,u),o=t.slice(-l);h.forEach((function(e){return o[e]=0}));var a=Fc(o,l,d),m=t.slice(-f);v.forEach((function(e){return m[e]=0}));var g=Fc(m,f,p);c[e]=i(n[a],r[g])};for(m=0;m<c.length;++m)g(m)}return[c,a]}(o.shape,i.shape,s,u,o.dtype,(function(e,t){var n=e-t;return n*n})),l=c[0],f=c[1];return{dataId:a.write(l,f,o.dtype),shape:f,dtype:o.dtype}}}];Eb<kb.length;Eb++)Hu(kb[Eb]);for(var _b,Rb=function(e){this.variableNames=["A"];var t=Yp(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Ib=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Yp(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Ab=0,Tb=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,a="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,u=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=u[0],l=u[1],f=[l,c],d=[l,c,i];(s||a)&&(null==_b&&(_b=document.createElement("canvas").getContext("2d")),_b.canvas.width=c,_b.canvas.height=l,_b.drawImage(o,0,0,c,l),o=_b.canvas);var p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=pl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),o);var h=Bu().getBool("WEBGL_PACK")?new Ib(d):new Rb(d),v=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;yf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,f=s.softNmsSigma,d=n,p=Mp(d.readSync(i.dataId),d.readSync(a.dataId),u,c,l,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,i=new am(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:Mm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n,s=Bu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eh("return (a - b) * (a - b);",o.shape,i.shape):new Ch("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(s,[o,i])}}];Ab<Tb.length;Ab++)Hu(Tb[Ab]);for(var Db=0,Nb=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Mm,gradFunc:function(e,t){var n=t[0],r=t[1],o=zf(2);return{a:function(){return Jg(e,Jg(o,ry(n,r)))},b:function(){return Jg(e,Jg(o,ry(r,n)))}}}}];Db<Nb.length;Db++)Gu(Nb[Db]);var Ob=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();Bu().get("IS_BROWSER")&&Bu().setPlatform("browser",new Ob);var Fb,Pb=function(){function e(){this.util=n(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Bu().global.fetch?Bu().global.fetch(e,t):(null==Fb&&(Fb=n(522)),Fb(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();Bu().get("IS_NODE")&&Bu().setPlatform("node",new Pb);var Mb={float32:4,int32:4,uint16:2,uint8:1,bool:1},Lb=4;function Bb(e,t){for(var n={},r=0,o=function(t){var o=t.name,i=t.dtype,a=t.shape,s=tc(a),u=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=Mb[c.dtype],f=e.slice(r,r+s*l),d="uint8"===c.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===i)u=Float32Array.from(d,(function(e){return e*c.scale+c.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);u=Int32Array.from(d,(function(e){return Math.round(e*c.scale+c.min)}))}r+=s*l}else if("string"===i){var p=tc(t.shape);u=[];for(var h=0;h<p;h++){var v=new Uint32Array(e.slice(r,r+Lb))[0];r+=Lb;var m=new Uint8Array(e.slice(r,r+v));u.push(m),r+=v}}else{var g=Mb[i];if(f=e.slice(r,r+s*g),"float32"===i)u=new Float32Array(f);else if("int32"===i)u=new Int32Array(f);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);u=new Uint8Array(f)}r+=s*g}n[o]=Lf(u,a,i)},i=0,a=t;i<a.length;i++)o(a[i]);return n}function zb(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),o=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}var jb="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Wb(e){return jb?Buffer.byteLength(e):new Blob([e]).size}function Ub(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Vb(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Hb(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Wb(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Wb(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Gb=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&o.push(n)})),o},e}(),qb="://",Kb=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Qu(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(qb)&&(t=t.slice(0,t.indexOf(qb))),Qu(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Qu(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function $b(e){if(-1===e.indexOf(qb))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Kb.getSchemes().join(","));return{scheme:e.split(qb)[0],path:e.split(qb)[1]}}function Xb(e,t,n){return void 0===n&&(n=!1),Pu(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,f;return Mu(this,(function(d){switch(d.label){case 0:return Qu(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Qu((r=Gb.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Qu(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),o=r[0],Qu((i=Gb.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Qu(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),a=i[0],s=$b(e).scheme,u=$b(e).path,c=s===$b(e).scheme,[4,o.load()];case 1:return l=d.sent(),n&&c?[4,Kb.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,a.save(l)];case 4:return f=d.sent(),!n||c?[3,6]:[4,Kb.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}}))}))}var Yb="models_store",Qb="model_info_store";function Jb(){if(!Bu().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Zb(e){var t=e.result;t.createObjectStore(Yb,{keyPath:"modelPath"}),t.createObjectStore(Qb,{keyPath:"modelPath"})}var ew=function(){function e(e){if(this.indexedDB=Jb(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Zb(o)},o.onsuccess=function(){var i=o.result;if(null==t){var a=i.transaction(Yb,"readonly"),s=a.objectStore(Yb).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},a.oncomplete=function(){return i.close()}}else{var u,c=Hb(t),l=i.transaction(Qb,"readwrite"),f=l.objectStore(Qb),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var o=(u=i.transaction(Yb,"readwrite")).objectStore(Yb).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});o.onsuccess=function(){return e({modelArtifactsInfo:c})},o.onerror=function(e){var t=(f=l.objectStore(Qb)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(o.error)},t.onerror=function(e){return i.close(),r(o.error)}}},d.onerror=function(e){return i.close(),r(d.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},o.onerror=function(e){return r(o.error)}}))},e.URL_SCHEME="indexeddb://",e}(),tw=function(e){return Bu().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ew.URL_SCHEME)?(t=e.slice(ew.URL_SCHEME.length),new ew(t)):null;var t};Gb.registerSaveRouter(tw),Gb.registerLoadRouter(tw);var nw=function(){function e(){this.indexedDB=Jb()}return e.prototype.listModels=function(){return Pu(this,void 0,void 0,(function(){var e=this;return Mu(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Zb(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(Qb,"readonly"),i=o.objectStore(Qb).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Pu(this,void 0,void 0,(function(){var t=this;return Mu(this,(function(n){var r;return e=(r=e).startsWith(ew.URL_SCHEME)?r.slice(ew.URL_SCHEME.length):r,[2,new Promise((function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Zb(o)},o.onsuccess=function(){var t,i=o.result,a=i.transaction(Qb,"readwrite"),s=a.objectStore(Qb),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=s.delete(e),a=function(){var o=(t=i.transaction(Yb,"readwrite")).objectStore(Yb).delete(e);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(e){return r(u.error)}};o.onsuccess=a,o.onerror=function(e){return a(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},a.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},o.onerror=function(e){return r(o.error)}}))]}))}))},e}();if(Bu().getBool("IS_BROWSER"))try{Kb.registerManager(ew.URL_SCHEME,new nw)}catch(Jc){}var rw="/",ow="tensorflowjs_models",iw="info",aw="model_topology",sw="weight_specs",uw="weight_data",cw="model_metadata";function lw(e){return{info:[ow,e,iw].join(rw),topology:[ow,e,aw].join(rw),weightSpecs:[ow,e,sw].join(rw),weightData:[ow,e,uw].join(rw),modelMetadata:[ow,e,cw].join(rw)}}function fw(e){var t=e.split(rw);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(rw)}var dw=function(){function e(e){if(!Bu().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=lw(this.modelPath)}return e.prototype.save=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r;return Mu(this,(function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Hb(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(jb)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Pu(this,void 0,void 0,(function(){var e,t,n,r,o,i,a;return Mu(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),t.format=i.format,t.generatedBy=i.generatedBy,t.convertedBy=i.convertedBy,t.userDefinedMetadata=i.userDefinedMetadata),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(jb){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(a),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),pw=function(e){return Bu().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dw.URL_SCHEME)?(t=e.slice(dw.URL_SCHEME.length),new dw(t)):null;var t};Gb.registerSaveRouter(pw),Gb.registerLoadRouter(pw);var hw=function(){function e(){Qu(Bu().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Qu("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Pu(this,void 0,void 0,(function(){var e,t,n,r,o,i;return Mu(this,(function(a){for(e={},t=ow+rw,n=rw+iw,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(i=fw(o),e[i]=JSON.parse(this.LS.getItem(o)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Pu(this,void 0,void 0,(function(){var t,n;return Mu(this,(function(r){var o;if(e=(o=e).startsWith(dw.URL_SCHEME)?o.slice(dw.URL_SCHEME.length):o,t=lw(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Bu().getBool("IS_BROWSER"))try{Kb.registerManager(dw.URL_SCHEME,new hw)}catch(Jc){}function vw(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var mw=function(){function e(t){if(!Bu().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r,o,i,a;return Mu(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=o,[4,vw((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,vw((function(){return a.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:Hb(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),gw=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Pu(this,void 0,void 0,(function(){var e,t,n=this;return Mu(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),s=a.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=a.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,t)}catch(e){return void o(e)}var l=[],f=[],d=[];u.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),l.push.apply(l,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=f.indexOf(e);d[o]=n,-1===d.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:Ub(d),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy,userDefinedMetadata:a.userDefinedMetadata})},t.onerror=function(t){return o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])}))}))}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Vb(e.name)})),o={},i=0,a=e;i<a.length;i++)a[i].paths.forEach((function(e){var i=Vb(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[e]=t[r.indexOf(i)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function yw(e,t,n,r){!function(e){Qu(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Qu(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Qu(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Qu(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(e.map((function(i){return i.then((function(i){var a=n+ ++o/e.length*(r-n);return t(a),i})),i})))}function xw(e,t){return Pu(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l;return Mu(this,(function(f){switch(f.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Bu().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),o=0,i=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return a=f.sent(),[3,4];case 2:return[4,yw(r,t.onProgress,o,i)];case 3:a=f.sent(),f.label=4;case 4:return s=a.map((function(e){return e.arrayBuffer()})),u=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return l=f.sent(),[3,8];case 6:return[4,yw(s,t.onProgress,u,c)];case 7:l=f.sent(),f.label=8;case 8:return[2,l]}}))}))}function bw(e){var t=this;return function(n,r,o){return void 0===r&&(r=""),Pu(t,void 0,void 0,(function(){var t,i,a,s,u,c,l,f,d,p;return Mu(this,(function(h){switch(h.label){case 0:if(t=n.map((function(){return!1})),i={},a=null!=o?o.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,c=Mb[u]*tc(e.shape),l=function(){t[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=o?o.forEach((function(t,n){t===e.name&&(l(),a[n]=!0)})):l(),s.push(e.name),r+=c}))})),!a.every((function(e){return e})))throw u=o.filter((function(e,t){return!a[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return c=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),l=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;l.push(t)}))})),[4,e(l)];case 1:return f=h.sent(),d={},p=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,o=0;o<t;o++)r+=f[p+o].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,c=0;c<t;c++){var l=new Uint8Array(f[p+c]);s.set(l,u),u+=l.byteLength}i[e].forEach((function(e){var t=Bb(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),[2,d]}}))}))}}Gb.registerSaveRouter((function(e){return Bu().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(mw.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new mw(e)}(e.slice(mw.URL_SCHEME.length)):null}));var ww=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Qu("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Bu().platform.fetch,Qu(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Qu(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r,o;return Mu(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=i.sent()).ok)return[2,{modelArtifactsInfo:Hb(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},e.prototype.load=function(){return Pu(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s,u,c,l,f;return Mu(this,(function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,o=t.weightsManifest,i=t.generatedBy,a=t.convertedBy,s=t.format,u=t.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:f=d.sent(),c=f[0],l=f[1],d.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:l,userDefinedMetadata:u,generatedBy:i,convertedBy:a,format:s}]}}))}))},e.prototype.loadWeights=function(e){return Pu(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,u,c,l,f;return Mu(this,(function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],o=n[1],i=this.weightPathPrefix||r,a=[],s=0,u=e;s<u.length;s++)c=u[s],a.push.apply(a,c.weights);return l=[],e.forEach((function(e){e.paths.forEach((function(e){l.push(i+e+o)}))})),[4,xw(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=d.sent(),[2,[a,Ub(f)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Cw(e){return null!=e.match(ww.URL_SCHEME_REGEX)}var Sw=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return Cw(e)})):Cw(e))?Ew(e,{onProgress:t}):null};function Ew(e,t){return new ww(e,t)}Gb.registerSaveRouter(Sw),Gb.registerLoadRouter(Sw);var kw,_w=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),Rw=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),Iw=Object.freeze({browserFiles:function(e){return new gw(e)},browserHTTPRequest:function(e,t){return Ew(e,t)},concatenateArrayBuffers:Ub,decodeWeights:Bb,encodeWeights:function(e,t){return Pu(this,void 0,void 0,(function(){var n,r,o,i,a,s=this;return Mu(this,(function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),i=function(i){var a=o[i],u=Array.isArray(e)?e[i].tensor:e[a];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+u.dtype);var c={name:a,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var l=new Promise((function(e){return Pu(s,void 0,void 0,(function(){var t,n,r,o,i,a,s;return Mu(this,(function(c){switch(c.label){case 0:return[4,u.bytes()];case 1:for(t=c.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+Lb*t.length,r=new Uint8Array(n),o=0,i=0;i<t.length;i++)a=t[i],s=new Uint8Array(new Uint32Array([a.length]).buffer),r.set(s,o),o+=Lb,r.set(a,o),o+=a.length;return e(r),[2]}}))}))}));r.push(l)}else r.push(u.data());null!=t&&(c.group=t),n.push(c)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:zb(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new _w(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _w({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _w({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Gb.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Hb,getSaveHandlers:function(e){return Gb.getSaveHandlers(e)},http:Ew,isHTTPScheme:Cw,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Pu(this,void 0,void 0,(function(){return Mu(this,(function(o){return[2,bw((function(e){return xw(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return Gb.registerLoadRouter(e)},registerSaveRouter:function(e){return Gb.registerSaveRouter(e)},weightsLoaderFactory:bw,withSaveHandler:function(e){return new Rw(e)},copyModel:function(e,t){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(n){return[2,Xb(e,t,!1)]}))}))},listModels:function(){return Pu(this,void 0,void 0,(function(){var e,t,n,r,o,i,a;return Mu(this,(function(s){switch(s.label){case 0:e=Kb.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,Kb.getManager(o).listModels()]):[3,4];case 2:for(a in i=s.sent())t[o+qb+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(n){return[2,Xb(e,t,!0)]}))}))},removeModel:function(e){return Pu(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){return t=$b(e),[2,Kb.getManager(t.scheme).removeModel(t.path)]}))}))}}),Aw=Of({confusionMatrix_:function(e,t,n){var r=wf(e,"labels","confusionMatrix"),o=wf(t,"predictions","confusionMatrix");Qu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Qu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Qu(1===o.rank,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),Qu(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),Qu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=Ed(r.asType("int32"),n),a=Ed(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}}),Tw=(Object.freeze({confusionMatrix:Aw}),Of({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Uu("FromPixels",cl.backendName))return cl.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,c=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],f=c[1];if(a?s=e.getContext("2d").getImageData(0,0,l,f).data:r||n?s=e.data:(i||o)&&(null==kw&&(kw=document.createElement("canvas").getContext("2d")),kw.canvas.width=l,kw.canvas.height=f,kw.drawImage(e,0,0,l,f),s=kw.getImageData(0,0,l,f).data),4===t)u=new Int32Array(s);else{var d=l*f;u=new Int32Array(d*t);for(var p=0;p<d;p++)for(var h=0;h<t;++h)u[p*t+h]=s[4*p+h]}return Uf(u,[f,l,t],"int32")}})),Dw=Object.freeze({toPixels:function(e,t){return Pu(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,d,p,h,v,m,g,y,x,b,w,C,S,E;return Mu(this,(function(k){switch(k.label){case 0:if(n=wf(e,"img","toPixels"),e instanceof qc||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=k.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=k.sent(),f=l[0],d=l[1],p=f[0],h=d[0],u.dispose(),c.dispose(),"float32"===n.dtype){if(p<0||h>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+h+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||h>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+h+"].")}for(v="float32"===n.dtype?255:1,m=new Uint8ClampedArray(i*o*4),g=0;g<o*i;++g)y=void 0,x=void 0,b=void 0,w=void 0,1===a?(y=s[g]*v,x=s[g]*v,b=s[g]*v,w=255):3===a?(y=s[3*g]*v,x=s[3*g+1]*v,b=s[3*g+2]*v,w=255):4===a&&(y=s[4*g]*v,x=s[4*g+1]*v,b=s[4*g+2]*v,w=s[4*g+3]*v),m[0+(C=4*g)]=Math.round(y),m[C+1]=Math.round(x),m[C+2]=Math.round(b),m[C+3]=Math.round(w);return null!=t&&(t.width=i,t.height=o,S=t.getContext("2d"),E=new ImageData(m,i,o),S.putImageData(E,0,0)),n!==e&&n.dispose(),[2,m]}}))}))},fromPixels:Tw}),Nw=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Ow=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Fw(e){Qu(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Qu("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Qu(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Ow.register(e)}Object.freeze({Serializable:Nw,SerializationMap:Ow,registerClass:Fw});function Pw(){return 32===cl.backend.floatPrecision()?.001:.1}function Mw(e,t,n){var r=!0;if((mc(e)||mc(t))&&(r=!1),mc(e)&&mc(t)&&(r=!0),r){var o=e.constructor.name,i=t.constructor.name;if(o!==i)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var a=xf(e),s=xf(t);if(!nc(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=mc(e)?e:ec(e),c=mc(t)?t:ec(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var f=u[l],d=c[l];if(!n(f,d))throw new Error("Arrays differ: actual["+l+"] = "+f+", expected["+l+"] = "+d+".\nActual:   "+u+".\nExpected: "+c+".")}}function Lw(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=Pw()),Mw(e,t,(function(e,t){return Lw(e,t,n)}))},testEpsilon:Pw,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return xc(e)||xc(e[0])||xc(t)||xc(t[0])?Mw(e,n,(function(e,t){return e==t})):Mw(e,t,(function(e,t){return Lw(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=Pw()),!Lw(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:xv,webgl_util:pf,forceHalfFloat:function(){Bu().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Fm,setWebGLContext:gl,GPGPUContext:bv});var Bw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fu(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,i=r.grads;if(null!=n){var a=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(a)}else this.applyGradients(i);return gf(i),t?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Qu(Sc(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Qu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Zc})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],cl.registeredVariables)t.push(cl.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,i=t.length;Qu((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var a=cl.gradients(e,t,null,!0),s=a.value,u=a.grads;Qu(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Qu(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=o&&o.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&gf(this.iterations_)},t.prototype.saveIterations=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:zf(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Pu(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(Nw);Object.defineProperty(Bw,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var zw=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=cl.backend.epsilon()),o}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=cl.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:mf((function(){return Xf(o).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:mf((function(){return Xf(o).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;mf((function(){var e=a.mul(t.rho).add(i.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(i),r=s.mul(t.rho).add(n.square().mul(1-t.rho));a.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(o);o.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(gf(this.accumulatedGrads.map((function(e){return e.variable}))),gf(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(Bw);Fw(zw);var jw=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=cl.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:mf((function(){return qf(o.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedGrads[r].variable;mf((function(){var e=a.add(i.square());a.assign(e);var n=i.div(e.add(cl.backend.epsilon()).sqrt()).mul(-t.learningRate).add(o);o.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&gf(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Bw);Fw(jw);var Ww=function(e){function t(t,n,r,o){void 0===o&&(o=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],mf((function(){i.accBeta1=zf(n).variable(),i.accBeta2=zf(r).variable()})),null==o&&(i.epsilon=cl.backend.epsilon()),i}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);mf((function(){var r=ry(1,t.accBeta1),o=ry(1,t.accBeta2);n.forEach((function(n,i){var a=cl.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:mf((function(){return Xf(a).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:mf((function(){return Xf(a).variable(!1)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),f=c.mul(t.beta2).add(s.square().mul(1-t.beta2)),d=l.div(r),p=f.div(o);u.assign(l),c.assign(f);var h=d.div(p.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a);a.assign(h)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&gf(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&gf(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){var t,n=this;return Mu(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),mf((function(){n.accBeta1.assign(ey(n.beta1,n.iterations_+1)),n.accBeta2.assign(ey(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Bw);Fw(Ww);var Uw=function(e){function t(t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],mf((function(){a.iteration=zf(0).variable(),a.accBeta1=zf(n).variable()})),null==o&&(a.epsilon=cl.backend.epsilon()),a}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);mf((function(){var r=ry(1,t.accBeta1),o=Ug(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,i){var a=cl.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:Xf(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:Xf(a).variable(!1)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),f=c.mul(t.beta2),d=s.abs(),p=f.maximum(d);u.assign(l),c.assign(p);var h=o.div(r).mul(l.div(p.add(t.epsilon))).add(a);a.assign(h)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&gf(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&gf(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Bw);Fw(Uw);var Vw=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=cl.registeredVariables[n];mf((function(){var e=t.c.mul(o).add(i);i.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return cl.keep(e)}(zf(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Bw);Fw(Vw);var Hw=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=zf(o.momentum),o}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=cl.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:mf((function(){return Xf(o).variable(!1)}))});var i=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n];null!=a&&mf((function(){var e,n=t.m.mul(i).add(a);e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(o):t.c.mul(n).add(o),i.assign(n),o.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&gf(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){return Mu(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Vw);Fw(Hw);var Gw=function(e){function t(t,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=e.call(this)||this;if(a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=i,null==o&&(a.epsilon=cl.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return Fu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=cl.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:mf((function(){return Xf(o).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:mf((function(){return Xf(o).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:mf((function(){return Xf(o).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;mf((function(){var e=a.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(i.mul(1-t.decay)),c=s.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));a.assign(e),n.assign(u),s.assign(c);var l=o.sub(c);o.assign(l)}else{var f=a.mul(t.decay).add(i.square().mul(1-t.decay));c=s.mul(t.momentum).add(i.mul(t.learningRate).div(f.add(t.epsilon).sqrt())),a.assign(f),s.assign(c),l=o.sub(c),o.assign(l)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&gf(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&gf(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&gf(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Pu(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Pu(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Bw);Fw(Gw);var qw=function(){function e(){}return e.sgd=function(e){return new Vw(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Hw(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new Gw(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Ww(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new zw(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new Uw(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new jw(e,t)},e}();qw.sgd,qw.momentum,qw.adadelta,qw.adagrad,qw.rmsprop,qw.adamax,qw.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;qc.prototype.squaredDifference=function(e){return Lm(this,e)},Hc=bb;var Kw=function(e,t){return Kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Kw(e,t)};function $w(e,t){function n(){this.constructor=e}Kw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Xw=function(){return Xw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xw.apply(this,arguments)};function Yw(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(Fu){i(Fu)}}function s(e){try{u(r.throw(e))}catch(Fu){i(Fu)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Qw(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(Fu){i=[6,Fu],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Jw(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var Zw=function(){function e(e,t){if(!sC(e)||!sC(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function eC(e,t){return e instanceof qc&&e.shape.length===t}function tC(e){return eC(e,3)}function nC(e){return eC(e,4)}function rC(e){return e%2===0}function oC(e){return e&&e.width&&e.height}function iC(e){return e.reduce((function(e,t){return e.add(t)}),new cC(0,0)).div(new cC(e.length,e.length))}function aC(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function sC(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function uC(e){return sC(e)&&0<=e&&e<=1}var cC=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),lC=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(sC),i=[r.x,r.y,r.width,r.height].every(sC);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],c=a[2],l=a[3];e.assertIsValidBox({x:s,y:u,width:c,height:l},"Box.constructor",n),this._x=s,this._y=u,this._width=c,this._height=l}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(sC)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new cC(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new cC(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new cC(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new cC(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,i=t.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new e({x:n,y:r,width:o,height:i})},e.prototype.rescale=function(t){var n=oC(t)?t.width:t,r=oC(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,i=r.y,a=r.right,s=r.bottom,u=Math.max(o,0),c=Math.max(i,0),l=a-u,f=s-c;return new e({x:u,y:c,width:Math.min(l,t-u),height:Math.min(f,n-c)}).floor()},e.prototype.shift=function(t,n){var r=this.width,o=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:o})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,o=n,i=r,a=this.left,s=this.top,u=this.right,c=this.bottom;return u>t&&(o=-u+t+n,u=t),c>e&&(i=-c+e+r,c=e),a<1&&(i=2-a,a=1),s<1&&(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:o,y:s,ey:c,x:a,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),fC=function(e){function t(t,n,r,o,i){return void 0===i&&(i=!1),e.call(this,{left:t,top:n,right:r,bottom:o},i)||this}return $w(t,e),t}(lC),dC=function(){function e(e,t,n,r,o){this._imageDims=new Zw(o.width,o.height),this._score=e,this._classScore=t,this._className=n,this._box=new lC(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new lC(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),pC=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return $w(t,e),t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r);return new t(o.score,o.relativeBox,o.imageDims)},t}(dC);function hC(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function vC(e,t,n,r){void 0===r&&(r=!0);for(var o=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),i=[],a=function(){var t=o.pop();i.push(t);for(var a=o,s=[],u=0;u<a.length;u++){var c=a[u],l=e[t],f=e[c];s.push(hC(l,f,r))}o=o.filter((function(e,t){return s[t]<=n}))};o.length>0;)a();return i}function mC(e,t){return mf((function(){var n=t[0],r=t[1],o=t[2],i=qf(Jw(e.shape.slice(0,3),[1]),n),a=qf(Jw(e.shape.slice(0,3),[1]),r),s=qf(Jw(e.shape.slice(0,3),[1]),o),u=Yf([i,a,s],3);return ry(e,u)}))}function gC(e){return 1/(1+Math.exp(-e))}var yC,xC=function(e){function t(t,n,r,o,i){return void 0===i&&(i=!1),e.call(this,{x:t,y:n,width:r,height:o},i)||this}return $w(t,e),t}(lC),bC=function(){function e(e,t,n){void 0===n&&(n=new cC(0,0));var r=t.width,o=t.height;this._imgDims=new Zw(r,o),this._shift=n,this._positions=e.map((function(e){return e.mul(new cC(r,o)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new cC(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new cC(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new cC(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof pC?e.box.floor():new lC(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=r.useDlibAlignment,i=r.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],o=function(e){return r.sub(e).magnitude()},i=(o(t)+o(n))/2,a=Math.floor(i/.45),s=iC(e),u=Math.floor(Math.max(0,s.x-.5*a)),c=Math.floor(Math.max(0,s.y-.43*a));return new xC(u,c,Math.min(a,this.imageWidth+u),Math.min(a,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),o=n.reduce((function(e,t){return t<e?t:e}),1/0),i=t.reduce((function(e,t){return e<t?t:e}),0),a=n.reduce((function(e,t){return e<t?t:e}),0);return new fC(r,o,i,a)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),wC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],iC([e[3],e[4]])]},t}(bC),CC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(iC)},t}(bC),SC=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),EC=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return $w(t,e),t.assertIsValidLabeledBox=function(e,t){if(lC.assertIsValidBox(e,t),!sC(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(lC),kC=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();!function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i._score=r,i._classScore=o,i}$w(t,e),t.assertIsValidPredictedBox=function(e,t){if(EC.assertIsValidLabeledBox(e,t),!uC(e.score)||!uC(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(EC);function _C(e){return e.detection instanceof pC}function RC(e,t){var n={detection:t};return Object.assign({},e,n)}function IC(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function AC(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(r){t=r.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function TC(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=AC();return Xw({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},o)}function DC(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function NC(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function OC(e){yC=e}function FC(){DC()&&OC(IC()),NC()&&OC(TC())}var PC,MC={getEnv:function(){if(!yC)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return yC},setEnv:OC,initialize:FC,createBrowserEnv:IC,createFileSystem:AC,createNodejsEnv:TC,monkeyPatch:function(e){if(yC||FC(),!yC)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?yC.Canvas:t,r=e.Image,o=void 0===r?yC.Image:r;yC.Canvas=n,yC.Image=o,yC.createCanvasElement=e.createCanvasElement||function(){return new n},yC.createImageElement=e.createImageElement||function(){return new o},yC.ImageData=e.ImageData||yC.ImageData,yC.Video=e.Video||yC.Video,yC.fetch=e.fetch||yC.fetch,yC.readFile=e.readFile||yC.readFile},isBrowser:DC,isNodejs:NC};function LC(e){return MC.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function BC(e){var t=MC.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=LC(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=r.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}FC(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(PC||(PC={}));var zC=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,o=e.fontSize,i=e.fontStyle,a=e.padding;this.anchorPosition=t||PC.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=i||"Georgia",this.padding=a||4},jC=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new zC(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===PC.BOTTOM_RIGHT||n===PC.TOP_RIGHT,o=n===PC.BOTTOM_LEFT||n===PC.BOTTOM_RIGHT,i=this.measureWidth(e),a=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,u=o?this.anchor.y-a:this.anchor.y;if(t){var c=t.width,l=t.height;return{x:Math.max(Math.min(s,c-i),0),y:Math.max(Math.min(u,l-a),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=LC(e),n=BC(t),r=this.options,o=r.backgroundColor,i=r.fontColor,a=r.fontSize,s=r.fontStyle,u=r.padding;n.font=a+"px "+s;var c=this.measureWidth(n),l=this.measureHeight();n.fillStyle=o;var f=this.getUpperLeft(n,t);n.fillRect(f.x,f.y,c,l),n.fillStyle=i,this.text.forEach((function(e,t){var r=u+f.x,o=u+f.y+(t+1)*a;n.fillText(e,r,o)}))},e}(),WC=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,o=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var i={anchorPosition:PC.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new zC(Object.assign({},i,o))},UC=function(){function e(e,t){void 0===t&&(t={}),this.box=new lC(e),this.options=new WC(t)}return e.prototype.draw=function(e){var t=BC(e),n=this.options,r=n.boxColor,o=n.lineWidth,i=this.box,a=i.x,s=i.y,u=i.width,c=i.height;t.strokeStyle=r,t.lineWidth=o,t.strokeRect(a,s,u,c);var l=this.options.label;l&&new jC([l],{x:a-o/2,y:s},this.options.drawLabelOptions).draw(e)},e}();function VC(e){var t=MC.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function HC(e){var t=MC.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Zw(e.naturalWidth,e.naturalHeight):e instanceof r?new Zw(e.videoWidth,e.videoHeight):new Zw(e.width,e.height)}function GC(e){var t=e.width,n=e.height,r=(0,MC.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function qC(e,t){var n=MC.getEnv().ImageData;if(!(e instanceof n)&&!VC(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||HC(e),o=r.width,i=r.height,a=GC({width:o,height:i});return e instanceof n?BC(a).putImageData(e,0,0):BC(a).drawImage(e,0,0,o,i),a}function KC(e,t){return Yw(this,void 0,void 0,(function(){var n,r,o,i,a,s;return Qw(this,(function(u){switch(u.label){case 0:return n=t||MC.getEnv().createCanvasElement(),r=e.shape.slice(nC(e)?1:0),o=r[0],i=r[1],a=r[2],s=mf((function(){return e.as3D(o,i,a).toInt()})),[4,Dw.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function $C(e){var t=MC.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}var XC=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(tC(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(nC(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var o=e instanceof MC.getEnv().Canvas?e:qC(e);n._canvases[t]=o,n._inputDimensions[t]=[o.height,o.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return aC(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new Zw(Math.round(n*o),Math.round(r*o))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,mf((function(){var r=aC(n.batchSize,0,1).map((function(r){var o=n.getInput(r);if(o instanceof qc){var i=nC(o)?o:o.expandDims();return i=function(e,t){return void 0===t&&(t=!1),mf((function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var i=Math.abs(r-o),a=Math.round(i*(t?.5:1)),s=r>o?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,qf(n,0)},c=u(a),l=i-c.shape[s],f=[t&&l?u(l):null,e,c].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Yf(f,s)}))}(i,t),i.shape[1]===e&&i.shape[2]===e||(i=fb.resizeBilinear(i,[e,e])),i.as3D(e,e,3)}if(o instanceof MC.getEnv().Canvas)return Dw.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=MC.getEnv(),o=r.Image,i=r.Canvas;if(!(e instanceof o||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=HC(e),s=t/Math.max(a.height,a.width),u=s*a.width,c=s*a.height,l=GC({width:t,height:t}),f=e instanceof i?e:qC(e),d=Math.abs(u-c)/2,p=n&&u<c?d:0,h=n&&c<u?d:0;return BC(l).drawImage(f,p,h,u,c),l}(o,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)})),o=Ld(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return o}))},e}();function YC(e){return Yw(this,void 0,void 0,(function(){var t,n,r;return Qw(this,(function(o){switch(o.label){case 0:if(e instanceof XC)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(LC)).forEach((function(e,r){if(!$C(e)&&!tC(e)&&!nC(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(nC(e)){var o=e.shape[0];if(1!==o)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return $C(e)&&(t=e,new Promise((function(e,n){if(t instanceof MC.getEnv().Canvas||VC(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",o),e(t))}function o(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),n(e))}t.addEventListener("load",r),t.addEventListener("error",o)})));var t})))];case 1:return o.sent(),[2,new XC(r,Array.isArray(e))]}}))}))}function QC(e,t){return Yw(this,void 0,void 0,(function(){var n,r,o,i,a,s;return Qw(this,(function(u){switch(u.label){case 0:return n=MC.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,YC(e)];case 1:if((o=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(i=o.getInput(0))instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,KC(i)];case 3:a=u.sent(),u.label=4;case 4:r=a,u.label=5;case 5:return s=BC(r),[2,t.map((function(e){return e instanceof pC?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=GC({width:r,height:o});return BC(i).putImageData(s.getImageData(t,n,r,o),0,0),i}))]}}))}))}function JC(e,t){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(n){if(!tC(e)&&!nC(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(nC(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,mf((function(){var n=e.shape.slice(nC(e)?1:0),r=n[0],o=n[1],i=n[2],a=t.map((function(e){return e instanceof pC?e.forSize(o,r).box:e})).map((function(e){return e.clipAtImageBorders(o,r)})).map((function(t){var n=t.x,a=t.y,s=t.width,u=t.height;return Zy(e.as3D(r,o,i),[a,n,0],[u,s,i])}));return a}))]}))}))}function ZC(e,t){return Yw(this,void 0,void 0,(function(){var n;return Qw(this,(function(r){switch(r.label){case 0:return[4,(0,MC.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function eS(e){return Yw(this,void 0,void 0,(function(){var t,n;return Qw(this,(function(r){switch(r.label){case 0:return[4,ZC(e)];case 1:return[4,(t=r.sent()).blob()];case 2:if(!(n=r.sent()).type.startsWith("image/"))throw new Error("fetchImage - expected blob type to be of type image/*, instead have: "+n.type+", for url: "+t.url);return[2,(o=n,new Promise((function(e,t){if(!(o instanceof Blob))return t("bufferToImage - expected buf to be of type: Blob");var n=new FileReader;n.onload=function(){if("string"!==typeof n.result)return t("bufferToImage - expected reader.result to be a string, in onload");var r=MC.getEnv().createImageElement();r.onload=function(){return e(r)},r.onerror=t,r.src=n.result},n.onerror=t,n.readAsDataURL(o)})))]}var o}))}))}function tS(e){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(t){switch(t.label){case 0:return[4,ZC(e)];case 1:return[2,t.sent().json()]}}))}))}function nS(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",o=(e=e.replace(r,"")).split("/").filter((function(e){return e})),i=e.endsWith(".json")?o[o.length-1]:n,a=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return{modelBaseUri:a=e.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+i:a+"/"+i}}function rS(e,t){return Yw(this,void 0,void 0,(function(){var n,r,o,i;return Qw(this,(function(a){switch(a.label){case 0:return n=nS(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,tS(r)];case 1:return i=a.sent(),[2,Iw.loadWeights(i,o)]}}))}))}function oS(e,t,n){void 0===n&&(n=!1);var r=n?HC(t):t,o=r.width,i=r.height;return e.width=o,e.height=i,{width:o,height:i}}var iS=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Zc}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Zc)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,o=Lf(r.dataSync());r.dispose(),e.reassignParamFromPath(n,o)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,rS(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Yw(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,u,c,l;return Qw(this,(function(f){switch(f.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=MC.getEnv().readFile,n=nS(e,this.getDefaultModelName()),r=n.manifestUri,o=n.modelBaseUri,i=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},a=Iw.weightsLoaderFactory(i),c=(u=JSON).parse,[4,t(r)];case 1:return s=c.apply(u,[f.sent().toString()]),[4,a(s,o)];case 2:return l=f.sent(),this.loadFromWeightMap(l),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof qc))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function aS(e,t,n){return mf((function(){var r=Ny(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Bg(r,t.bias)}))}function sS(e,t,n){return void 0===n&&(n=!1),mf((function(){var r=mx(n?Bg(ky(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):aS(e,t.conv0,[2,2])),o=aS(r,t.conv1,[1,1]),i=aS(mx(Bg(r,o)),t.conv2,[1,1]);return mx(Bg(r,Bg(o,i)))}))}function uS(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),mf((function(){var o=mx(n?Bg(ky(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):aS(e,t.conv0,r?[2,2]:[1,1])),i=aS(o,t.conv1,[1,1]),a=aS(mx(Bg(o,i)),t.conv2,[1,1]),s=aS(mx(Bg(o,Bg(i,a))),t.conv3,[1,1]);return mx(Bg(o,Bg(i,Bg(a,s))))}))}function cS(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),mf((function(){var o=Bg(ky(e,t.filters,[1,1],n),t.bias);return r?mx(o):o}))}function lS(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function fS(e,t){return function(n,r,o,i){var a=Vf(e(n*r*o*o),[o,o,n,r]),s=jf(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}}function dS(e,t){return function(n,r,o){var i=Wf(e(n*r),[n,r]),a=jf(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}var pS=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function hS(e,t){return function(n,r,o){var i=Vf(e(9*n),[3,3,n,1]),a=Vf(e(n*r),[1,1,n,r]),s=jf(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new pS(i,a,s)}}function vS(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new pS(n,r,o)}}function mS(e,t){return function(n,r,o){var i=e[n];if(!eC(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:o||n}),i}}function gS(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function yS(e,t){var n=fS(e,t),r=hS(e,t);function o(e,t,o,i){return void 0===i&&(i=!1),{conv0:i?n(e,t,3,o+"/conv0"):r(e,t,o+"/conv0"),conv1:r(t,t,o+"/conv1"),conv2:r(t,t,o+"/conv2")}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:function(e,t,n,i){void 0===i&&(i=!1);var a=o(e,t,n,i);return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:r(t,t,n+"/conv3")}}}}function xS(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function bS(e,t){var n=mS(e,t),r=xS(n),o=vS(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2"),conv3:o(e+"/conv3")}}}}var wS=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return $w(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return mf((function(){var n=uS(mC(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(zf(255)),t.dense0,!0);return n=uS(n,t.dense1),n=uS(n,t.dense2),n=uS(n,t.dense3),n=qy(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=bS(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return lS(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=gS(e),r=n.extractWeights,o=n.getRemainingWeights,i=yS(r,t).extractDenseBlock4Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),c=i(128,256,"dense3");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u,dense3:c}}}(e)},t}(iS);function CS(e,t){return mf((function(){return Bg(Py(e,t.weights),t.bias)}))}function SS(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var ES=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return $w(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return mf((function(){var r=e instanceof XC?t.faceFeatureExtractor.forwardInput(e):e;return CS(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],o=gS(e),i=o.extractWeights,a=o.getRemainingWeights,s=dS(i,r)(t,n,"fc");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=SS(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=mS(e,n),o={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return lS(e,n),{params:o,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,o=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(iS),kS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],_S=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);kS.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return kS.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),RS=function(e){function t(t){return void 0===t&&(t=new wS),e.call(this,"FaceExpressionNet",t)||this}return $w(t,e),t.prototype.forwardInput=function(e){var t=this;return mf((function(){return ap(t.runNet(e))}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Yw(this,void 0,void 0,(function(){var t,n,r,o,i=this;return Qw(this,(function(a){switch(a.label){case 0:return[4,YC(e)];case 1:return t=a.sent(),[4,this.forwardInput(t)];case 2:return n=a.sent(),[4,Promise.all(jd(n).map((function(e){return Yw(i,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=a.sent(),n.dispose(),o=r.map((function(e){return new _S(e)})),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(ES);function IS(e,t){var n={expressions:t};return Object.assign({},e,n)}function AS(e){return _C(e)&&e.landmarks instanceof bC&&e.unshiftedLandmarks instanceof bC&&e.alignedRect instanceof pC}function TS(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),i=e.detection.imageDims,a={landmarks:r,unshiftedLandmarks:t,alignedRect:new pC(e.detection.score,o.rescale(i.reverse()),i)};return Object.assign({},e,a)}function DS(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var o=n.x,i=n.y,a=t[r];e.moveTo(a.x,a.y),e.lineTo(o,i)})),n){var r=t[t.length-1],o=t[0];if(!r||!o)return;e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)}e.stroke()}var NS=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,o=void 0===r||r,i=e.lineWidth,a=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=o,this.lineWidth=i||1,this.pointSize=s||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new NS(t)}e.prototype.draw=function(e){var t=BC(e),n=this.options,r=n.drawLines,o=n.drawPoints,i=n.lineWidth,a=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof CC&&(t.strokeStyle=a,t.lineWidth=i,DS(t,this.faceLandmarks.getJawOutline()),DS(t,this.faceLandmarks.getLeftEyeBrow()),DS(t,this.faceLandmarks.getRightEyeBrow()),DS(t,this.faceLandmarks.getNose()),DS(t,this.faceLandmarks.getLeftEye(),!0),DS(t,this.faceLandmarks.getRightEye(),!0),DS(t,this.faceLandmarks.getMouth(),!0)),o){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}}}();function OS(e,t){var n=[],r=gS(e),o=r.extractWeights,i=r.getRemainingWeights,a=function(e,t){var n=fS(e,t),r=hS(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,o){return{separable_conv0:r(e,t,o+"/separable_conv0"),separable_conv1:r(t,t,o+"/separable_conv1"),expansion_conv:n(e,t,1,o+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(o,n),s=a.extractConvParams,u=a.extractSeparableConvParams,c=a.extractReductionBlockParams,l=a.extractMainBlockParams,f={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},d={};aC(t,0,1).forEach((function(e){d["main_block_"+e]=l(128,"middle_flow/main_block_"+e)}));var p={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:f,middle_flow:d,exit_flow:p}}}function FS(e,t){var n=[],r=function(e,t){var n=mS(e,t),r=xS(n),o=vS(n);return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),separable_conv2:o(e+"/separable_conv2")}}}}(e,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:o("entry_flow/conv_in"),reduction_block_0:a("entry_flow/reduction_block_0"),reduction_block_1:a("entry_flow/reduction_block_1")},c={};aC(t,0,1).forEach((function(e){c["main_block_"+e]=s("middle_flow/main_block_"+e)}));var l={reduction_block:a("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return lS(e,n),{params:{entry_flow:u,middle_flow:c,exit_flow:l},paramMappings:n}}function PS(e,t,n){return Bg(ky(e,t.filters,n,"same"),t.bias)}function MS(e,t,n){void 0===n&&(n=!0);var r=n?mx(e):e;return r=aS(r,t.separable_conv0,[1,1]),r=aS(mx(r),t.separable_conv1,[1,1]),r=Gy(r,[3,3],[2,2],"same"),r=Bg(r,PS(e,t.expansion_conv,[2,2]))}var LS,BS=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return $w(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return mf((function(){var r=mC(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(zf(256)),o=mx(PS(r,n.entry_flow.conv_in,[2,2]));return o=MS(o,n.entry_flow.reduction_block_0,!1),o=MS(o,n.entry_flow.reduction_block_1),aC(t._numMainBlocks,0,1).forEach((function(e){o=function(e,t){var n=aS(mx(e),t.separable_conv0,[1,1]);return n=aS(mx(n),t.separable_conv1,[1,1]),n=aS(mx(n),t.separable_conv2,[1,1]),Bg(n,e)}(o,n.middle_flow["main_block_"+e])})),o=MS(o,n.exit_flow.reduction_block),o=mx(aS(o,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return FS(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return OS(e,this._numMainBlocks)},t}(iS);!function(e){e.FEMALE="female",e.MALE="male"}(LS||(LS={}));var zS=function(e){function t(t){void 0===t&&(t=new BS(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return $w(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return mf((function(){var r=e instanceof XC?t.faceFeatureExtractor.forwardInput(e):e,o=qy(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:CS(o,n.fc.age).as1D(),gender:CS(o,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return mf((function(){var n=t.runNet(e),r=n.age,o=n.gender;return{age:r,gender:ap(o)}}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Yw(this,void 0,void 0,(function(){var t,n,r,o,i,a,s=this;return Qw(this,(function(u){switch(u.label){case 0:return[4,YC(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=jd(n.age),o=jd(n.gender),i=r.map((function(e,t){return{ageTensor:e,genderTensor:o[t]}})),[4,Promise.all(i.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Yw(s,void 0,void 0,(function(){var e,r,o,i,a;return Qw(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],i=(o=r>.5)?LS.MALE:LS.FEMALE,a=o?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:i,genderProbability:a}]}}))}))})))];case 3:return a=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=gS(e),r=n.extractWeights,o=n.getRemainingWeights,i=dS(r,t),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:a,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=SS(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=mS(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return lS(e,t),{params:o,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(iS),jS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,o=t/Math.max(r,n);return{width:n*o,height:r*o}})),o=r.length;return mf((function(){var n=function(e,t){return Ld([qf([68],e),qf([68],t)],1).as2D(1,136).as1D()},i=function(e,t){var n=r[e],o=n.width,i=n.height;return t(o,i)?Math.abs(o-i)/2:0},a=e.mul(qf([o,136],t)).sub(Ld(Array.from(Array(o),(function(e,t){return n(function(e){return i(e,(function(e,t){return e<t}))}(t),function(e){return i(e,(function(e,t){return t<e}))}(t))})))).div(Ld(Array.from(Array(o),(function(e,t){return n(r[t].width,r[t].height)}))));return a}))},t.prototype.forwardInput=function(e){var t=this;return mf((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Yw(this,void 0,void 0,(function(){var t,n,r,o=this;return Qw(this,(function(i){switch(i.label){case 0:return[4,YC(e)];case 1:return t=i.sent(),n=mf((function(){return jd(o.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Yw(o,void 0,void 0,(function(){var r,o,i,a,s;return Qw(this,(function(u){switch(u.label){case 0:return i=(o=Array).from,[4,e.data()];case 1:return r=i.apply(o,[u.sent()]),a=r.filter((function(e,t){return rC(t)})),s=r.filter((function(e,t){return!rC(t)})),[2,new CC(Array(68).fill(0).map((function(e,t){return new cC(a[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(ES),WS=function(e){function t(t){return void 0===t&&(t=new wS),e.call(this,"FaceLandmark68Net",t)||this}return $w(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(jS);var US=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return $w(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return mf((function(){var n=sS(mC(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(zf(255)),t.dense0,!0);return n=sS(n,t.dense1),n=sS(n,t.dense2),n=qy(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=bS(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return lS(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=gS(e),r=n.extractWeights,o=n.getRemainingWeights,i=yS(r,t).extractDenseBlock3Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u}}}(e)},t}(iS),VS=function(e){function t(t){return void 0===t&&(t=new US),e.call(this,"FaceLandmark68TinyNet",t)||this}return $w(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(jS);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}$w(t,e)}(WS);function HS(e,t,n,r,o){void 0===o&&(o="same");var i=t.conv,a=i.filters,s=i.bias,u=ky(e,a,n,o);return u=function(e,t){return Bg(Jg(e,t.weights),t.biases)}(u=Bg(u,s),t.scale),r?mx(u):u}function GS(e,t){return HS(e,t,[1,1],!1)}function qS(e,t){return HS(e,t,[2,2],!0,"valid")}function KS(e,t){function n(n,r,o,i){var a=function(t,n,r){var o=e(t),i=o.length/(n*r*r);if(i%1!==0)throw new Error("depth has to be an integer: "+i+", weights.length: "+o.length+", numFilters: "+n+", filterSize: "+r);return mf((function(){return xx(Vf(o,[n,i,r,r]),[2,3,1,0])}))}(n,r,o),s=jf(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}function r(r,o,i,a){var s=n(r,o,i,a+"/conv"),u=function(n,r){var o=jf(e(n)),i=jf(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:o,biases:i}}(o,a+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,o,i){return void 0===i&&(i=!1),{conv1:r((i?.5:1)*e,t,n,o+"/conv1"),conv2:r(e,t,n,o+"/conv2")}}}}function $S(e,t){var n=mS(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),o=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:o}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function XS(e){var t=[],n=$S(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),c=o("conv64_down"),l=o("conv64_1"),f=o("conv64_2"),d=o("conv64_3"),p=o("conv128_down"),h=o("conv128_1"),v=o("conv128_2"),m=o("conv256_down"),g=o("conv256_1"),y=o("conv256_2"),x=o("conv256_down_out"),b=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!eC(b,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:f,conv64_3:d,conv128_down:p,conv128_1:h,conv128_2:v,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:x,fc:b};return lS(e,t),{params:w,paramMappings:t}}function YS(e,t){var n=function(e,t){return HS(e,t,[1,1],!0)}(e,t.conv1);return n=GS(n,t.conv2),n=Bg(n,e),n=mx(n)}function QS(e,t){var n=qS(e,t.conv1);n=GS(n,t.conv2);var r=qy(e,2,2,"valid"),o=Gf(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var a=Jw(n.shape);a[1]=1;var s=Gf(a),u=Jw((n=Yf([n,s],1)).shape);u[2]=1;var c=Gf(u);n=Yf([n,c],2)}return r=i?Yf([r,o],3):r,n=Bg(r,n),n=mx(n)}var JS=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return $w(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return mf((function(){var n=qS(mC(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(zf(256)),t.conv32_down);n=YS(n=Gy(n,3,2,"valid"),t.conv32_1),n=YS(n,t.conv32_2),n=YS(n,t.conv32_3),n=YS(n=QS(n,t.conv64_down),t.conv64_1),n=YS(n,t.conv64_2),n=YS(n,t.conv64_3),n=YS(n=QS(n,t.conv128_down),t.conv128_1),n=YS(n,t.conv128_2),n=YS(n=QS(n,t.conv256_down),t.conv256_1);var r=(n=QS(n=YS(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Py(r,t.fc)}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Yw(this,void 0,void 0,(function(){var t,n,r,o=this;return Qw(this,(function(i){switch(i.label){case 0:return[4,YC(e)];case 1:return t=i.sent(),n=mf((function(){return jd(o.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return XS(e)},t.prototype.extractParams=function(e){return function(e){var t=gS(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=KS(n,o),a=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),l=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),p=s(36864,64,3,"conv64_1"),h=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),m=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),x=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),S=mf((function(){return xx(Wf(n(32768),[128,256]),[1,0])}));if(o.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:f,conv64_down:d,conv64_1:p,conv64_2:h,conv64_3:v,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:x,conv256_1:b,conv256_2:w,conv256_down_out:C,fc:S},paramMappings:o}}(e)},t}(iS);function ZS(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var eE=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,o=t.maxNumScales,i=t.scoreThresholds,a=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function tE(e,t){function n(n,r,o,i,a){var s=Vf(e(n*r*o*o),[o,o,n,r]),u=jf(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/"+(a?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,o){var i=n(e,t,r,o,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function o(n,o,i){var a=function(n,r){var o=Vf(e(9*n),[3,3,n,1]),i=jf(e(n)),a=jf(e(n)),s=jf(e(n)),u=jf(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:o,batch_norm_scale:i,batch_norm_offset:a,batch_norm_mean:s,batch_norm_variance:u}}(n,i+"/depthwise_conv");return{depthwise_conv:a,pointwise_conv:r(n,o,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:o(32,64,"mobilenetv1/conv_1"),conv_2:o(64,128,"mobilenetv1/conv_2"),conv_3:o(128,128,"mobilenetv1/conv_3"),conv_4:o(128,256,"mobilenetv1/conv_4"),conv_5:o(256,256,"mobilenetv1/conv_5"),conv_6:o(256,512,"mobilenetv1/conv_6"),conv_7:o(512,512,"mobilenetv1/conv_7"),conv_8:o(512,512,"mobilenetv1/conv_8"),conv_9:o(512,512,"mobilenetv1/conv_9"),conv_10:o(512,512,"mobilenetv1/conv_10"),conv_11:o(512,512,"mobilenetv1/conv_11"),conv_12:o(512,1024,"mobilenetv1/conv_12"),conv_13:o(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function nE(e){var t=[],n=function(e,t){var n=mS(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function o(e){var t="mobilenetv1/conv_"+e,o="MobilenetV1/Conv2d_"+e+"_depthwise",i=t+"/depthwise_conv",a=t+"/pointwise_conv";return{depthwise_conv:{filters:n(o+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:n(o+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:n(o+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:n(o+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:n(o+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,a)}}function i(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function a(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!tC(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return lS(e,t),{params:a,paramMappings:t}}function rE(e,t,n){return mf((function(){var r=ky(e,t.filters,n,"same");return r=Bg(r,t.batch_norm_offset),qm(r,0,6)}))}var oE=.0010000000474974513;function iE(e,t){return mf((function(){var n=null,r=rE(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var o=t+1,i=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(o);r=function(e,t,n){return mf((function(){var r=Ay(e,t.filters,n,"same");return r=Ig(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,oE),qm(r,0,6)}))}(r,e.depthwise_conv,i),r=rE(r,e.pointwise_conv,[1,1]),11===o&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function aE(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(a-o)*(s-i),p=(l-u)*(f-c);if(d<=0||p<=0)return 0;var h=Math.max(o,u),v=Math.max(i,c),m=Math.min(a,l),g=Math.min(s,f),y=Math.max(m-h,0)*Math.max(g-v,0);return y/(d+p-y)}function sE(e,t){var n=function(e){var t=jd(xx(e,[1,0])),n=[ry(t[2],t[0]),ry(t[3],t[1])];return{sizes:n,centers:[Bg(t[0],Ug(n[0],zf(2))),Bg(t[1],Ug(n[1],zf(2)))]}}(e),r=n.sizes,o=n.centers,i=jd(xx(t,[1,0])),a=Ug(Jg(Ym(Ug(i[2],zf(5))),r[0]),zf(2)),s=Bg(Jg(Ug(i[0],zf(10)),r[0]),o[0]),u=Ug(Jg(Ym(Ug(i[3],zf(5))),r[1]),zf(2)),c=Bg(Jg(Ug(i[1],zf(10)),r[1]),o[1]);return xx(Ld([ry(s,a),ry(c,u),Bg(s,a),Bg(c,u)]),[1,0])}function uE(e,t){return mf((function(){var n=e.shape[0];return{boxPredictionEncoding:Fd(cS(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Fd(cS(e,t.class_predictor),[n,-1,3])}}))}var cE=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),lE=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return $w(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return mf((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=iE(ry(Jg(n,zf(.007843137718737125)),zf(1)),t.mobilenetv1),o=function(e,t,n){return mf((function(){var r=rE(e,n.conv_0,[1,1]),o=rE(r,n.conv_1,[2,2]),i=rE(o,n.conv_2,[1,1]),a=rE(i,n.conv_3,[2,2]),s=rE(a,n.conv_4,[1,1]),u=rE(s,n.conv_5,[2,2]),c=rE(u,n.conv_6,[1,1]),l=rE(c,n.conv_7,[2,2]),f=uE(t,n.box_predictor_0),d=uE(e,n.box_predictor_1),p=uE(o,n.box_predictor_2),h=uE(a,n.box_predictor_3),v=uE(u,n.box_predictor_4),m=uE(l,n.box_predictor_5);return{boxPredictions:Yf([f.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,h.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:Yf([f.classPrediction,d.classPrediction,p.classPrediction,h.classPrediction,v.classPrediction,m.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return mf((function(){var r=e.shape[0],o=sE(Fd(Bd(n.extra_dim,[r,1,1]),[-1,4]),Fd(e,[-1,4]));o=Fd(o,[r,o.shape[0]/r,4]);var i=ag(Yy(t,[0,0,1],[-1,-1,-1])),a=Yy(i,[0,0,0],[-1,-1,1]);return a=Fd(a,[r,a.shape[1]]),{boxes:jd(o),scores:jd(a)}}))}(o.boxPredictions,o.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,YC(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Yw(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,d,p,h,v,m,g,y,x,b,w;return Qw(this,(function(C){switch(C.label){case 0:return n=new cE(t),r=n.maxResults,o=n.minConfidence,[4,YC(e)];case 1:for(i=C.sent(),a=this.forwardInput(i),s=a.boxes,u=a.scores,c=s[0],l=u[0],f=1;f<s.length;f++)s[f].dispose(),u[f].dispose();return h=(p=Array).from,[4,l.data()];case 2:return d=h.apply(p,[C.sent()]),.5,v=function(e,t,n,r,o){var i=e.shape[0],a=Math.min(n,i),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>o})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},c=[];return s.forEach((function(t){if(!(c.length>=a)){for(var n=t.score,r=c.length-1;r>=0;--r){var i=aE(e,t.boxIndex,c[r]);if(0!==i&&(t.score*=u(i),t.score<=o))break}n===t.score&&c.push(t.boxIndex)}})),c}(c,d,r,.5,o),m=i.getReshapedInputDimensions(0),g=i.inputSize,y=g/m.width,x=g/m.height,b=c.arraySync(),w=v.map((function(e){var t=[Math.max(0,b[e][0]),Math.min(1,b[e][2])].map((function(e){return e*x})),n=t[0],r=t[1],o=[Math.max(0,b[e][1]),Math.min(1,b[e][3])].map((function(e){return e*y})),a=o[0],s=o[1];return new pC(d[e],new xC(a,n,s-a,r-n),{height:i.getInputHeight(0),width:i.getInputWidth(0)})})),c.dispose(),l.dispose(),[2,w]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return nE(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=gS(e),r=n.extractWeights,o=n.getRemainingWeights,i=tE(r,t),a=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=a(),c=s(),l={extra_dim:Uf(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:l},paramMappings:t}}(e)},t}(iS);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}$w(t,e)}(lE);var fE,dE=[new cC(.738768,.874946),new cC(2.42204,2.65704),new cC(4.30971,7.04493),new cC(10.246,4.59428),new cC(12.6868,11.8741)],pE=[new cC(1.603231,2.094468),new cC(6.041143,7.080126),new cC(2.882459,3.518061),new cC(4.266906,5.178857),new cC(9.041765,10.66308)],hE=[117.001,114.697,97.404],vE=function(e){return"number"===typeof e};function mE(e){return mf((function(){var t=Jg(e,zf(.10000000149011612));return Bg(mx(ry(e,t)),t)}))}function gE(e,t){return mf((function(){var n=kd(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ky(n,t.conv.filters,[1,1],"valid"),n=ry(n,t.bn.sub),n=Jg(n,t.bn.truediv),mE(n=Bg(n,t.conv.bias))}))}function yE(e,t){return mf((function(){var n=kd(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Ny(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),mE(n=Bg(n,t.bias))}))}function xE(e,t){var n=fS(e,t);var r=hS(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,o,i){var a=n(r,o,3,i+"/conv"),s=function(n,r){var o=jf(e(n)),i=jf(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:o,truediv:i}}(o,i+"/bn");return{conv:a,bn:s}},extractSeparableConvParams:r}}function bE(e,t){var n=mS(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),o=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:o}},extractSeparableConvParams:vS(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(fE||(fE={}));var wE=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),CE=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!vE(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return vE(e.x)&&vE(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(vE)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return $w(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=gE(e,t.conv0);return n=gE(n=Gy(n,[2,2],[2,2],"same"),t.conv1),n=gE(n=Gy(n,[2,2],[2,2],"same"),t.conv2),n=gE(n=Gy(n,[2,2],[2,2],"same"),t.conv3),n=gE(n=Gy(n,[2,2],[2,2],"same"),t.conv4),n=gE(n=Gy(n,[2,2],[2,2],"same"),t.conv5),n=gE(n=Gy(n,[2,2],[1,1],"same"),t.conv6),cS(n=gE(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?mE(cS(e,t.conv0,"valid",!1)):yE(e,t.conv0);return n=yE(n=Gy(n,[2,2],[2,2],"same"),t.conv1),n=yE(n=Gy(n,[2,2],[2,2],"same"),t.conv2),n=yE(n=Gy(n,[2,2],[2,2],"same"),t.conv3),n=yE(n=Gy(n,[2,2],[2,2],"same"),t.conv4),n=yE(n=Gy(n,[2,2],[2,2],"same"),t.conv5),n=Gy(n,[2,2],[1,1],"same"),n=t.conv6?yE(n,t.conv6):n,cS(n=t.conv7?yE(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return mf((function(){var o=e.toBatchTensor(t,!1).toFloat();return o=(o=n.config.meanRgb?mC(o,n.config.meanRgb):o).div(zf(256)),n.config.withSeparableConvs?n.runMobilenet(o,r):n.runTinyYolov2(o,r)}))},t.prototype.forward=function(e,t){return Yw(this,void 0,void 0,(function(){var n;return Qw(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,YC(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Yw(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,d,p,h,v=this;return Qw(this,(function(m){switch(m.label){case 0:return n=new wE(t),r=n.inputSize,o=n.scoreThreshold,[4,YC(e)];case 1:return i=m.sent(),[4,this.forwardInput(i,r)];case 2:return a=m.sent(),s=mf((function(){return jd(a)[0].expandDims()})),u={width:i.getInputWidth(0),height:i.getInputHeight(0)},[4,this.extractBoxes(s,i.getReshapedInputDimensions(0),o)];case 3:return c=m.sent(),a.dispose(),s.dispose(),l=c.map((function(e){return e.box})),f=c.map((function(e){return e.score})),d=c.map((function(e){return e.classScore})),p=c.map((function(e){return v.config.classes[e.label]})),h=vC(l.map((function(e){return e.rescale(r)})),f,this.config.iouThreshold,!0),[2,h.map((function(e){return new dC(f[e],d[e],p[e],l[e],u)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],o=bE(e,r),i=o.extractConvParams,a=o.extractConvWithBatchNormParams,s=o.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else n={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return lS(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var o,i=gS(e),a=i.extractWeights,s=i.getRemainingWeights,u=[],c=xE(a,u),l=c.extractConvParams,f=c.extractConvWithBatchNormParams,d=c.extractSeparableConvParams;if(t.withSeparableConvs){var p=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],x=r[6],b=r[7],w=r[8];o={conv0:t.isFirstLayerConv2d?l(p,h,3,"conv0"):d(p,h,"conv0"),conv1:d(h,v,"conv1"),conv2:d(v,m,"conv2"),conv3:d(m,g,"conv3"),conv4:d(g,y,"conv4"),conv5:d(y,x,"conv5"),conv6:b?d(x,b,"conv6"):void 0,conv7:w?d(b,w,"conv7"):void 0,conv8:l(w||b||x,5*n,1,"conv8")}}else p=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],x=r[6],b=r[7],w=r[8],o={conv0:f(p,h,"conv0"),conv1:f(h,v,"conv1"),conv2:f(v,m,"conv2"),conv3:f(m,g,"conv3"),conv4:f(g,y,"conv4"),conv5:f(y,x,"conv5"),conv6:f(x,b,"conv6"),conv7:f(b,w,"conv7"),conv8:l(w,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:o,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Yw(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,f,d,p,h,v,m,g,y,x,b,w,C,S,E,k,_,R,I,A,T,D,N=this;return Qw(this,(function(O){switch(O.label){case 0:return r=t.width,o=t.height,i=Math.max(r,o),a=i/r,s=i/o,u=e.shape[1],c=this.config.anchors.length,l=mf((function(){var t=e.reshape([u,u,c,N.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,c,4]),t.slice([0,0,0,4],[u,u,c,1]),N.withClassScores?ap(t.slice([0,0,0,5],[u,u,c,N.config.classes.length]),3):zf(0)]})),f=l[0],d=l[1],p=l[2],h=[],[4,d.array()];case 1:return v=O.sent(),[4,f.array()];case 2:m=O.sent(),g=0,O.label=3;case 3:if(!(g<u))return[3,12];y=0,O.label=4;case 4:if(!(y<u))return[3,11];x=0,O.label=5;case 5:return x<c?(b=gC(v[g][y][x][0]),!n||b>n?(w=(y+gC(m[g][y][x][0]))/u*a,C=(g+gC(m[g][y][x][1]))/u*s,S=Math.exp(m[g][y][x][2])*this.config.anchors[x].x/u*a,E=Math.exp(m[g][y][x][3])*this.config.anchors[x].y/u*s,k=w-S/2,_=C-E/2,R={row:g,col:y,anchor:x},this.withClassScores?[4,this.extractPredictedClass(p,R)]:[3,7]):[3,9]):[3,10];case 6:return D=O.sent(),[3,8];case 7:D={classScore:1,label:0},O.label=8;case 8:A=(I=D).classScore,T=I.label,h.push(Xw({box:new fC(k,_,k+S,_+E),score:b,classScore:b*A,label:T},R)),O.label=9;case 9:return x++,[3,5];case 10:return y++,[3,4];case 11:return g++,[3,3];case 12:return f.dispose(),d.dispose(),p.dispose(),[2,h]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Yw(this,void 0,void 0,(function(){var n,r,o,i;return Qw(this,(function(a){switch(a.label){case 0:return n=t.row,r=t.col,o=t.anchor,[4,e.array()];case 1:return i=a.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return i[n][r][o][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(iS),SE=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:pE,meanRgb:hE}:{anchors:dE,withClassScores:!0});return e.call(this,n)||this}return $w(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new pC(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(CE);var EE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return $w(t,e),t}(wE),kE=function(){function e(){}return e.prototype.then=function(e){return Yw(this,void 0,void 0,(function(){var t;return Qw(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function _E(e,t){var n={descriptor:t};return Object.assign({},e,n)}function RE(e,t,n,r,o){return void 0===o&&(o=function(e){return e.alignedRect}),Yw(this,void 0,void 0,(function(){var i,a,s,u,c;return Qw(this,(function(l){switch(l.label){case 0:return i=e.map((function(e){return AS(e)?o(e):e.detection})),(s=r)?[3,5]:t instanceof qc?[4,JC(t,i)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,QC(t,i)];case 3:u=l.sent(),l.label=4;case 4:s=u,l.label=5;case 5:return[4,n(a=s)];case 6:return c=l.sent(),a.forEach((function(e){return e instanceof qc&&e.dispose()})),[2,c]}}))}))}function IE(e,t,n,r,o){return Yw(this,void 0,void 0,(function(){var i=this;return Qw(this,(function(a){return[2,RE([e],t,(function(e){return Yw(i,void 0,void 0,(function(){return Qw(this,(function(t){return[2,n(e[0])]}))}))}),r,o)]}))}))}var AE=2,TE=12;function DE(e){var t=gS(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=function(e,t){var n=fS(e,t),r=dS(e,t);function o(n,r){var o=jf(e(n));return t.push({paramPath:r}),o}function i(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:o(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:o(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:o(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Xw(Xw({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=i([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=o(128,"rnet/prelu4_alpha"),a=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return Xw(Xw({},e),{fc1:t,prelu4_alpha:n,fc2_1:a,fc2_2:s})},extractONetParams:function(){var e=i([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),a=o(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=o(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),l=r(256,4,"onet/fc2_2"),f=r(256,10,"onet/fc2_3");return Xw(Xw({},e),{conv4:t,prelu4_alpha:a,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:f})}}}(n,o),a=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,c=a(),l=s(),f=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:l,onet:f},paramMappings:o}}function NE(e){var t=[],n=function(e,t){var n=mS(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function o(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function i(e){return n(e,1)}function a(e){return{conv1:r(e+"/conv1"),prelu1_alpha:i(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:i(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:i(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Xw(Xw({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=a("rnet"),t=o("rnet/fc1"),n=i("rnet/prelu4_alpha"),r=o("rnet/fc2_1"),s=o("rnet/fc2_2");return Xw(Xw({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=a("onet"),t=r("onet/conv4"),n=i("onet/prelu4_alpha"),s=o("onet/fc1"),u=i("onet/prelu5_alpha"),c=o("onet/fc2_1"),l=o("onet/fc2_2"),f=o("onet/fc2_3");return Xw(Xw({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:f})}}}(e,t),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),s=o(),u=i();return lS(e,t),{params:{pnet:a,rnet:s,onet:u},paramMappings:t}}function OE(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var FE=function(e){function t(t,n,r,o){return e.call(this,{left:t,top:n,right:r,bottom:o},!0)||this}return $w(t,e),t}(lC);function PE(e){return mf((function(){return Jg(ry(e,zf(127.5)),zf(.0078125))}))}function ME(e,t){return mf((function(){return Bg(mx(e),Jg(t,ng(mx(ng(e)))))}))}function LE(e,t,n){return void 0===n&&(n=!1),mf((function(){var r=cS(e,t.conv1,"valid");return r=ME(r,t.prelu1_alpha),r=ME(r=cS(r=Gy(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=ME(r=cS(r=n?r:Gy(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function BE(e,t,n,r,o){o.stage1=[];var i=t.map((function(t){return mf((function(){var n={scale:t},o=function(e,t){return mf((function(){var n=OE(t,e.shape.slice(1)),r=n.height,o=n.width,i=PE(fb.resizeBilinear(e,[r,o]));return xx(i,[0,2,1,3])}))}(e,t),i=Date.now(),a=function(e,t){return mf((function(){var n=LE(e,t,!0),r=cS(n,t.conv4_1,"valid"),o=wd(sx(r,3),3);return{prob:ap(ry(r,o),3),regions:cS(n,t.conv4_2,"valid")}}))}(o,r),s=a.prob,u=a.regions;return n.pnet=Date.now()-i,{scoresTensor:jd(jd(s,3)[1])[0],regionsTensor:jd(u)[0],scale:t,statsForScale:n}}))})),a=i.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,i=e.scale,a=e.statsForScale,s=function(e,t,n,r){for(var o=[],i=e.arraySync(),a=0;a<e.shape[0];a++)for(var s=0;s<e.shape[1];s++)i[a][s]>=r&&o.push(new cC(s,a));return o.map((function(e){var r=new fC(Math.round((e.y*AE+1)/n),Math.round((e.x*AE+1)/n),Math.round((e.y*AE+TE)/n),Math.round((e.x*AE+TE)/n)),o=i[e.y][e.x],a=t.arraySync();return{cell:r,score:o,region:new FE(a[e.y][e.x][0],a[e.y][e.x][1],a[e.y][e.x][2],a[e.y][e.x][3])}}))}(t,r,i,n);if(t.dispose(),r.dispose(),!s.length)return o.stage1.push(a),[];var u=Date.now(),c=vC(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return a.nms=Date.now()-u,a.numBoxes=c.length,o.stage1.push(a),c.map((function(e){return s[e]}))})),s=a.reduce((function(e,t){return e.concat(t)}),[]),u=[],c=[];if(s.length>0){var l=Date.now(),f=vC(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);o.stage1_nms=Date.now()-l,c=f.map((function(e){return s[e].score})),u=f.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new fC(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:c}}function zE(e,t,n){var r=n.width,o=n.height;return Yw(this,void 0,void 0,(function(){var n,i,a,s=this;return Qw(this,(function(u){switch(u.label){case 0:return n=BC(e),[4,Promise.all(t.map((function(t){return Yw(s,void 0,void 0,(function(){var r,o,i,a,s,u,c,l;return Qw(this,(function(f){return r=t.padAtBorders(e.height,e.width),o=r.y,i=r.ey,a=r.x,s=r.ex,u=a-1,c=o-1,l=n.getImageData(u,c,s-u,i-c),[2,MC.isNodejs()?qC(l):createImageBitmap(l)]}))}))})))];case 1:return i=u.sent(),a=[],i.forEach((function(e){var t=BC(GC({width:r,height:o}));t.drawImage(e,0,0,r,o);for(var n=t.getImageData(0,0,r,o).data,i=[],s=0;s<n.length;s+=4)i.push(n[s+2]),i.push(n[s+1]),i.push(n[s]);a.push(i)})),[2,a.map((function(e){return mf((function(){return PE(xx(Vf(e,[1,r,o,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function jE(e,t,n,r,o){return Yw(this,void 0,void 0,(function(){var i,a,s,u,c,l,f,d,p,h,v,m,g,y;return Qw(this,(function(x){switch(x.label){case 0:return i=Date.now(),[4,zE(e,t,{width:24,height:24})];case 1:return a=x.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map((function(e){var t=function(e,t){return mf((function(){var n=LE(e,t),r=ME(CS(Fd(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),o=CS(r,t.fc2_1),i=wd(sx(o,1),1),a=ap(ry(o,i),1),s=CS(r,t.fc2_2);return{scores:jd(a,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),o.stage2_rnet=Date.now()-i,u=s.length>1?Yf(s.map((function(e){return e.scores}))):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[x.sent()]),u.dispose(),d=c.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),p=d.map((function(e){return t[e]})),h=d.map((function(e){return c[e]})),v=[],m=[],p.length>0&&(i=Date.now(),g=vC(p,h,.7),o.stage2_nms=Date.now()-i,y=g.map((function(e){var t=s[d[e]].regions.arraySync();return new FE(t[0][0],t[0][1],t[0][2],t[0][3])})),m=g.map((function(e){return h[e]})),v=g.map((function(e,t){return p[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:v,scores:m}]}}))}))}function WE(e,t,n,r,o){return Yw(this,void 0,void 0,(function(){var i,a,s,u,c,l,f,d,p,h,v,m,g,y,x;return Qw(this,(function(b){switch(b.label){case 0:return i=Date.now(),[4,zE(e,t,{width:48,height:48})];case 1:return a=b.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map((function(e){var t=function(e,t){return mf((function(){var n=LE(e,t);n=ME(n=cS(n=Gy(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=ME(CS(Fd(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),o=CS(r,t.fc2_1),i=wd(sx(o,1),1),a=ap(ry(o,i),1),s=CS(r,t.fc2_2),u=CS(r,t.fc2_3);return{scores:jd(a,1)[1],regions:s,points:u}}))}(e,r);return e.dispose(),t})),o.stage3_onet=Date.now()-i,u=s.length>1?Yf(s.map((function(e){return e.scores}))):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[b.sent()]),u.dispose(),d=c.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),p=d.map((function(e){var t=s[e].regions.arraySync();return new FE(t[0][0],t[0][1],t[0][2],t[0][3])})),h=d.map((function(e,n){return t[e].calibrate(p[n])})),v=d.map((function(e){return c[e]})),m=[],g=[],y=[],h.length>0&&(i=Date.now(),x=vC(h,v,.7,!1),o.stage3_nms=Date.now()-i,m=x.map((function(e){return h[e]})),g=x.map((function(e){return v[e]})),y=x.map((function(e,t){return Array(5).fill(0).map((function(n,r){var o=s[e].points.arraySync();return new cC(o[0][r]*(m[t].width+1)+m[t].left,o[0][r+5]*(m[t].height+1)+m[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:m,scores:g,points:y}]}}))}))}var UE=function(e){function t(){return e.call(this,"Mtcnn")||this}return $w(t,e),t.prototype.load=function(t){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Yw(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,f,d,p,h,v,m,g,y,x,b,w,C;return Qw(this,(function(S){switch(S.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},i=Date.now(),a=mf((function(){return e=wd(Dw.fromPixels(r)).toFloat(),mf((function(){return Ld(jd(e,3).reverse(),3)}));var e})),s=function(e){return a.dispose(),o.total=Date.now()-i,e},u=a.shape.slice(1),c=u[0],l=u[1],f=new eE(t),d=f.minFaceSize,p=f.scaleFactor,h=f.maxNumScales,v=f.scoreThresholds,m=f.scaleSteps,g=(m||function(e,t,n){for(var r=n[0],o=n[1],i=TE/e,a=[],s=Math.min(r,o)*i,u=0;s>=12;)a.push(i*Math.pow(t,u)),s*=t,u+=1;return a}(d,p,[c,l])).filter((function(e){var t=OE(e,[c,l]);return Math.min(t.width,t.height)>TE})).slice(0,h),o.scales=g,o.pyramid=g.map((function(e){return OE(e,[c,l])})),y=Date.now(),[4,BE(a,g,v[0],n.pnet,o)];case 1:return x=S.sent(),o.total_stage1=Date.now()-y,x.boxes.length?(o.stage2_numInputBoxes=x.boxes.length,y=Date.now(),[4,jE(r,x.boxes,v[1],n.rnet,o)]):[2,s({results:[],stats:o})];case 2:return b=S.sent(),o.total_stage2=Date.now()-y,b.boxes.length?(o.stage3_numInputBoxes=b.boxes.length,y=Date.now(),[4,WE(r,b.boxes,v[2],n.onet,o)]):[2,s({results:[],stats:o})];case 3:return w=S.sent(),o.total_stage3=Date.now()-y,C=w.boxes.map((function(e,t){return TS(RC({},new pC(w.scores[t],new xC(e.left/l,e.top/c,e.width/l,e.height/c),{height:c,width:l})),new wC(w.points[t].map((function(t){return t.sub(new cC(e.left,e.top)).div(new cC(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:C,stats:o})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Yw(this,void 0,void 0,(function(){var n;return Qw(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,YC(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Yw(this,void 0,void 0,(function(){var n;return Qw(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,YC(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return NE(e)},t.prototype.extractParams=function(e){return DE(e)},t}(iS),VE=[new cC(1.603231,2.094468),new cC(6.041143,7.080126),new cC(2.882459,3.518061),new cC(4.266906,5.178857),new cC(9.041765,10.66308)],HE=[117.001,114.697,97.404],GE=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:VE,meanRgb:HE,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return $w(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Yw(this,void 0,void 0,(function(){return Qw(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new pC(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(CE),qE={ssdMobilenetv1:new lE,tinyFaceDetector:new GE,tinyYolov2:new SE,mtcnn:new UE,faceLandmark68Net:new WS,faceLandmark68TinyNet:new VS,faceRecognitionNet:new JS,faceExpressionNet:new RS,ageGenderNet:new zS};function KE(e,t){var n={age:t};return Object.assign({},e,n)}var $E=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return $w(t,e),t}(kE),XE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t,n=this;return Qw(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,RE(e=r.sent(),this.input,(function(e){return Yw(n,void 0,void 0,(function(){return Qw(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return qE.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return IS(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new ek(this,this.input)},t}($E),YE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t;return Qw(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,IE(e,this.input,(function(e){return qE.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,IS(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new tk(this,this.input)},t}($E),QE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.withAgeAndGender=function(){return new nk(this,this.input)},t.prototype.withFaceDescriptors=function(){return new ik(this,this.input)},t}(XE),JE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.withAgeAndGender=function(){return new rk(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ak(this,this.input)},t}(YE),ZE=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return $w(t,e),t}(kE),ek=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t,n=this;return Qw(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,RE(e=r.sent(),this.input,(function(e){return Yw(n,void 0,void 0,(function(){return Qw(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return qE.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],o=r.age;return KE(ZS(e,r.gender,r.genderProbability),o)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new XE(this,this.input)},t}(ZE),tk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t,n,r,o;return Qw(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,IE(e,this.input,(function(e){return qE.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=i.sent(),n=t.age,r=t.gender,o=t.genderProbability,[2,KE(ZS(e,r,o),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new YE(this,this.input)},t}(ZE),nk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.withFaceExpressions=function(){return new QE(this,this.input)},t.prototype.withFaceDescriptors=function(){return new ik(this,this.input)},t}(ek),rk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.withFaceExpressions=function(){return new JE(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ak(this,this.input)},t}(tk),ok=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return $w(t,e),t}(kE),ik=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e;return Qw(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,RE(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return qE.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return _E(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new QE(this,this.input)},t.prototype.withAgeAndGender=function(){return new nk(this,this.input)},t}(ok),ak=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t;return Qw(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,IE(e,this.input,(function(e){return qE.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,_E(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new JE(this,this.input)},t.prototype.withAgeAndGender=function(){return new rk(this,this.input)},t}(ok),sk=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.useTinyLandmarkNet=r,o}return $w(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?qE.faceLandmark68TinyNet:qE.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(kE),uk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t,n,r,o,i=this;return Qw(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),t=e.map((function(e){return e.detection})),this.input instanceof qc?[4,JC(this.input,t)]:[3,3];case 2:return r=a.sent(),[3,5];case 3:return[4,QC(this.input,t)];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return i.landmarkNet.detectLandmarks(e)})))];case 6:return o=a.sent(),n.forEach((function(e){return e instanceof qc&&e.dispose()})),[2,e.map((function(e,t){return TS(e,o[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new QE(this,this.input)},t.prototype.withAgeAndGender=function(){return new nk(this,this.input)},t.prototype.withFaceDescriptors=function(){return new ik(this,this.input)},t}(sk),ck=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t,n,r,o;return Qw(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?(t=e.detection,this.input instanceof qc?[4,JC(this.input,[t])]:[3,3]):[2];case 2:return r=i.sent(),[3,5];case 3:return[4,QC(this.input,[t])];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return o=i.sent(),n.forEach((function(e){return e instanceof qc&&e.dispose()})),[2,TS(e,o)]}}))}))},t.prototype.withFaceExpressions=function(){return new JE(this,this.input)},t.prototype.withAgeAndGender=function(){return new rk(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ak(this,this.input)},t}(sk),lk=function(e){function t(t,n){void 0===n&&(n=new cE);var r=e.call(this)||this;return r.input=t,r.options=n,r}return $w(t,e),t}(kE),fk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t,n,r;return Qw(this,(function(o){switch(o.label){case 0:return t=(e=this).input,(n=e.options)instanceof eE?[4,qE.mtcnn.forward(t,n)]:[3,2];case 1:return[2,o.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof EE?function(e){return qE.tinyFaceDetector.locateFaces(e,n)}:n instanceof cE?function(e){return qE.ssdMobilenetv1.locateFaces(e,n)}:n instanceof wE?function(e){return qE.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Yw(e,void 0,void 0,(function(){var e;return Qw(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return RC({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new uk(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new XE(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new ek(this.runAndExtendWithFaceDetections(),this.input)},t}(lk),dk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.run=function(){return Yw(this,void 0,void 0,(function(){var e,t;return Qw(this,(function(n){switch(n.label){case 0:return[4,new fk(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Yw(e,void 0,void 0,(function(){var e;return Qw(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?RC({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new ck(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new YE(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new tk(this.runAndExtendWithFaceDetection(),this.input)},t}(lk);var pk,hk,vk,mk,gk,yk,xk,bk,wk,Ck,Sk,Ek,kk,_k,Rk,Ik,Ak,Tk,Dk,Nk,Ok=function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,o=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof kC)return e;if(e instanceof Float32Array)return new kC(o(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new kC(o(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,o=n.label;return new SC(o,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new SC("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return kC.fromJSON(e)}));return new e(n,t.distanceThreshold)},e}();function Fk(e,t){var n=new Zw(t.width,t.height),r=n.width,o=n.height;if(r<=0||o<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:o}));if(Array.isArray(e))return e.map((function(e){return Fk(e,{width:r,height:o})}));if(AS(e)){var i=e.detection.forSize(r,o),a=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return TS(RC(e,i),a)}return _C(e)?RC(e,e.detection.forSize(r,o)):e instanceof bC||e instanceof pC?e.forSize(r,o):e}function Pk(){var t=qe(e.useState(!1),2),n=t[0],r=(t[1],qe(e.useState(!1),2)),o=r[0],i=r[1],a=e.useRef(),s=e.useRef(),u=document.getElementById("video");console.log(u);return Promise.all([qE.ssdMobilenetv1.loadFromUri("/models"),qE.faceRecognitionNet.loadFromUri("/models"),qE.faceLandmark68Net.loadFromUri("/models")]).then((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){u.srcObject=e})).catch((function(e){console.error(e)}))})),u&&u.addEventListener("play",go(vo().mark((function e(){var t,n,r,o;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(["Matheus","Messi"].map(function(){var e=go(vo().mark((function e(t){var n,r,o,i;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=1;case 2:if(!(r<=2)){e.next=13;break}return e.next=5,eS("./labels/".concat(t,"/").concat(r,".png"));case 5:return o=e.sent,e.next=8,(a=o,s=void 0,void 0===s&&(s=new cE),new dk(a,s)).withFaceLandmarks().withFaceDescriptor();case 8:i=e.sent,n.push(i.descriptor);case 10:r++,e.next=2;break;case 13:return e.abrupt("return",new kC(t,n));case 14:case"end":return e.stop()}var a,s}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,n=new Ok(t),r=qC(u),document.body.append(r),o={width:u.width,height:u.height},oS(r,o),setInterval(go(vo().mark((function e(){var t,i;return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(a=u,s=void 0,void 0===s&&(s=new cE),new fk(a,s)).withFaceLandmarks().withFaceDescriptors();case 2:t=e.sent,i=Fk(t,o),r.getContext("2d").clearRect(0,0,r.width,r.height),i.map((function(e){return n.findBestMatch(e.descriptor)})).forEach((function(e,t){var n=i[t].detection.box;new UC(n,{label:e}).draw(r)}));case 7:case"end":return e.stop()}var a,s}),e)}))),100);case 9:case"end":return e.stop()}}),e)})))),(0,je.jsxs)("div",{children:[(0,je.jsx)("div",{style:{textAlign:"center",padding:"10px"},children:o&&n?(0,je.jsx)("button",{onClick:function(){u.pause(),u.srcObject.getTracks()[0].stop(),i(!1)},style:{cursor:"pointer",backgroundColor:"green",color:"white",padding:"15px",fontSize:"25px",border:"none",borderRadius:"10px"},children:"Close Webcam"}):(0,je.jsx)("button",{onClick:function(){i(!0),navigator.mediaDevices.getUserMedia({video:{width:300}}).then((function(e){var t=t;t.srcObject=e,t.play()})).catch((function(e){console.error("error:",e)}))},style:{cursor:"pointer",backgroundColor:"green",color:"white",padding:"15px",fontSize:"25px",border:"none",borderRadius:"10px"},children:"Open Webcam"})}),o?(0,je.jsx)("div",{children:(0,je.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"10px"},children:[(0,je.jsx)("video",{id:"video",ref:a,height:480,width:640,style:{borderRadius:"10px"}}),(0,je.jsx)("canvas",{ref:s,style:{position:"absolute"}})]})}):(0,je.jsx)("div",{children:"loading..."})]})}var Mk,Lk,Bk,zk,jk,Wk,Uk,Vk,Hk,Gk,qk,Kk,$k,Xk,Yk,Qk,Jk,Zk,e_,t_,n_=Pe.div(pk||(pk=Yn(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  align-items: center;\n"]))),r_=(Pe.div(hk||(hk=Yn(["\n  font-size: 20px;\n  padding: 20px 0px 0px 60px;\n"]))),Pe.div(vk||(vk=Yn(["\n  gap: 10px;\n  width: auto;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  :hover{\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),Pe.form(mk||(mk=Yn(["\n  //width: 80%;\n  min-height: 100px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: column;\n  padding: 60px;\n  background-color: rgb(25, 29, 63);\n  gap: 40px;\n\n  @media (max-width: 700px) {\n    width: auto;\n    padding: 30px;\n    gap: 10px;\n  }\n  @media (max-width: 500px) {\n    padding: 20px 10px;\n  }\n"])))),o_=Pe.div(gk||(gk=Yn(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: row;\n  @media (max-width: 1150px) {\n    flex-direction: column;\n    gap: 10px;\n  }\n"]))),i_=Pe.div(yk||(yk=Yn(["\n  display: flex;\n  gap: 20px;\n"]))),a_=(Pe.p(xk||(xk=Yn(["\n  text-align: center;\n  color: ",";\n  margin-bottom: 10px;\n"])),(function(e){return e.theme.colors.textPrimary})),Pe.button(bk||(bk=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 178px;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    width: 120px;\n  }\n  &:hover {\n    transition: 0.5s;\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor}))),s_=Pe.p(wk||(wk=Yn(["\n  color: #ff0000;\n"]))),u_=(Pe.div(Ck||(Ck=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  //height: 100%;\n"]))),Pe.div(Sk||(Sk=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  svg{\n    font-size: 248px;\n    cursor: pointer;\n    &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n  }\n  img{\n    width: 229px;\n    height: 171px;\n    border-radius: 10%;\n    @media (max-width: 700px) {\n      width: 250px;\n      height: 110px;\n    }\n  }\n"])))),c_=(Pe.div(Ek||(Ek=Yn(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: 0.5s;\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n"]))),Pe.div(kk||(kk=Yn(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  width: 382px;\n  height: 100%;\n  background-color: rgb(25, 29, 63);\n  border-radius: 4%;\n  gap: 3px;\n  @media (max-width: 1150px) {\n    width: auto;\n  }\n"])))),l_=Pe.label(_k||(_k=Yn(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin-bottom: 8px;\n  width: 300px;\n  gap:5px;\n  border: none;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    width: 250px;\n  }\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n"]))),f_=Pe.input(Rk||(Rk=Yn(["\n  padding: 8px;\n  border: none;\n  background-color: ",";\n  border-radius: 4px;\n  font-size: 16px;\n"])),(function(e){return e.theme.colors.textPrimary})),d_=Pe.div(Ik||(Ik=Yn(["\n  font-size: 25px;\n  @media (max-width: 700px) {\n    font-size: 20px;\n  }\n\n"])));Pe.div(Ak||(Ak=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-content: flex-start;\n  width: 100%;\n  gap: 40px;\n"]))),Pe.div(Tk||(Tk=Yn(["\n  font-size: 20px;\n\n"]))),Pe.div(Dk||(Dk=Yn(["\n  font-size: 20px;\n\n"]))),Pe.div(Nk||(Nk=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 40px;\n"])));function p_(){var t=Zi(),n=t.register,r=t.handleSubmit,o=t.formState,i=qe((0,e.useState)([]),2),a=i[0],s=i[1],u=un();console.log(a);return(0,je.jsx)(je.Fragment,{children:(0,je.jsx)(n_,{children:(0,je.jsxs)(r_,{onSubmit:r((function(e){console.log(e);var t={name:e.name,phone:e.phone,serialNumber:123,residentId:1,image:a[0]};La(t).then((function(e){console.log(e);var t,n=ut(a);try{for(n.s();!(t=n.n()).done;){var r=t.value,o={userId:e.data.id,image:r,serialNumber:123};Ba(o)}}catch(i){n.e(i)}finally{n.f()}u("/home")})).catch((function(e){console.log(e)})),u("/home")})),children:[(0,je.jsx)(d_,{children:"CRIAR USU\xc1RIO"}),(0,je.jsx)("div",{children:(0,je.jsxs)(o_,{children:[(0,je.jsx)(u_,{children:(0,je.jsx)(ys,{onCapture:function(e){a.push(e),s(a)}})}),(0,je.jsx)(c_,{children:(0,je.jsxs)(l_,{children:["Nome:",(0,je.jsx)(f_,ho(ho({type:"text",defaultValue:""},n("name",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.name&&(0,je.jsx)(s_,{children:"Nome \xe9 obrigat\xf3rio"})]})})]})}),(0,je.jsx)("div",{children:(0,je.jsxs)(i_,{children:[(0,je.jsx)(a_,{onClick:function(){return u(-1)},children:"voltar"}),(0,je.jsx)(a_,{type:"submit",children:"salvar"})]})})]})})})}var h_,v_,m_,g_,y_,x_,b_,w_,C_,S_,E_,k_,__,R_,I_,A_,T_,D_,N_,O_,F_=Pe.div(Mk||(Mk=Yn(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  align-items: center;\n"]))),P_=(Pe.div(Lk||(Lk=Yn(["\n  font-size: 20px;\n  padding: 20px 0px 0px 60px;\n"]))),Pe.div(Bk||(Bk=Yn(["\n  gap: 10px;\n  width: auto;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  :hover{\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),Pe.form(zk||(zk=Yn(["\n  //width: 80%;\n  min-height: 100px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: column;\n  padding: 60px;\n  background-color: rgb(25, 29, 63);\n  gap: 40px;\n\n  @media (max-width: 700px) {\n    width: auto;\n    padding: 30px;\n  }\n  @media (max-width: 500px) {\n    padding: 30px 10px;\n  }\n"])))),M_=Pe.div(jk||(jk=Yn(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: row;\n  @media (max-width: 1150px) {\n    flex-direction: column;\n    gap: 10px;\n  }\n"]))),L_=Pe.div(Wk||(Wk=Yn(["\n  display: flex;\n  gap: 20px;\n"]))),B_=(Pe.p(Uk||(Uk=Yn(["\n  text-align: center;\n  color: ",";\n  margin-bottom: 10px;\n"])),(function(e){return e.theme.colors.textPrimary})),Pe.button(Vk||(Vk=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 178px;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    width: 120px;\n  }\n  &:hover {\n    transition: 0.5s;\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor}))),z_=Pe.p(Hk||(Hk=Yn(["\n  color: #ff0000;\n"]))),j_=(Pe.div(Gk||(Gk=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  //height: 100%;\n"]))),Pe.div(qk||(qk=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  svg{\n    font-size: 248px;\n    cursor: pointer;\n    &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n  }\n  img{\n    width: 229px;\n    height: 171px;\n    border-radius: 10%;\n    @media (max-width: 700px) {\n      width: 250px;\n      height: 110px;\n    }\n  }\n"])))),W_=(Pe.div(Kk||(Kk=Yn(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: 0.5s;\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n"]))),Pe.div($k||($k=Yn(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  width: 382px;\n  height: 100%;\n  background-color: rgb(25, 29, 63);\n  border-radius: 4%;\n  gap: 3px;\n  @media (max-width: 1150px) {\n    width: auto;\n  }\n"])))),U_=Pe.label(Xk||(Xk=Yn(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin-bottom: 8px;\n  width: 300px;\n  gap:5px;\n  border: none;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    width: 250px;\n  }\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n"]))),V_=Pe.input(Yk||(Yk=Yn(["\n  padding: 8px;\n  border: none;\n  background-color: ",";\n  border-radius: 4px;\n  font-size: 16px;\n"])),(function(e){return e.theme.colors.textPrimary})),H_=Pe.div(Qk||(Qk=Yn(["\n  font-size: 25px;\n\n"])));Pe.div(Jk||(Jk=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-content: flex-start;\n  width: 100%;\n  gap: 40px;\n"]))),Pe.div(Zk||(Zk=Yn(["\n  font-size: 20px;\n\n"]))),Pe.div(e_||(e_=Yn(["\n  font-size: 20px;\n\n"]))),Pe.div(t_||(t_=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 40px;\n"])));function G_(){var t=Zi(),n=t.register,r=t.handleSubmit,o=t.formState,i=qe((0,e.useState)([]),2),a=i[0],s=i[1],u=un(),c=JSON.parse(String(localStorage.getItem("visitant")));console.log(c);return(0,je.jsx)(je.Fragment,{children:(0,je.jsx)(F_,{children:(0,je.jsxs)(P_,{onSubmit:r((function(e){var t={name:e.name,phone:e.phone,image:a};console.log(t),ja(t,1).then((function(e){console.log(e),u(-1)})).catch((function(e){console.log(e)})),u(-1)})),children:[(0,je.jsx)(H_,{children:"EDITAR USU\xc1RIO"}),(0,je.jsx)("div",{children:(0,je.jsxs)(M_,{children:[(0,je.jsx)(j_,{children:(0,je.jsx)(ys,{onCapture:function(e){a.push(e),s(a)}})}),(0,je.jsxs)(W_,{children:[(0,je.jsxs)(U_,{children:["Nome:",(0,je.jsx)(V_,ho(ho({type:"text",defaultValue:c.name},n("name",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.name&&(0,je.jsx)(z_,{children:"Nome \xe9 obrigat\xf3rio"})]}),(0,je.jsxs)(U_,{children:["Telefone:",(0,je.jsx)(V_,ho(ho({type:"phone",defaultValue:c.phone},n("phone",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.phone&&(0,je.jsx)(z_,{children:"Telefone \xe9 obrigat\xf3rio"})]})]})]})}),(0,je.jsx)("div",{children:(0,je.jsxs)(L_,{children:[(0,je.jsx)(B_,{onClick:function(){return u(-1)},children:"voltar"}),(0,je.jsx)(B_,{type:"submit",children:"salvar"})]})})]})})})}var q_=Pe.div(h_||(h_=Yn(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  align-items: center;\n"]))),K_=(Pe.div(v_||(v_=Yn(["\n  font-size: 20px;\n  padding: 20px 0px 0px 60px;\n"]))),Pe.div(m_||(m_=Yn(["\n  gap: 10px;\n  width: auto;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  :hover{\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.hoverColor})),Pe.form(g_||(g_=Yn(["\n  //width: 80%;\n  min-height: 100px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: column;\n  padding: 60px;\n  background-color: rgb(25, 29, 63);\n  gap: 40px;\n\n  @media (max-width: 700px) {\n    width: auto;\n    padding: 30px;\n  }\n  @media (max-width: 500px) {\n    padding: 30px 10px;\n  }\n"])))),$_=Pe.div(y_||(y_=Yn(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  align-items: center;\n  flex-direction: row;\n  @media (max-width: 1150px) {\n    flex-direction: column;\n    gap: 10px;\n  }\n"]))),X_=Pe.div(x_||(x_=Yn(["\n  display: flex;\n  gap: 20px;\n"]))),Y_=(Pe.p(b_||(b_=Yn(["\n  text-align: center;\n  color: ",";\n  margin-bottom: 10px;\n"])),(function(e){return e.theme.colors.textPrimary})),Pe.button(w_||(w_=Yn(["\n  padding: 8px 16px;\n  background-color: ",";\n  color: #000000;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 16px;\n  width: 178px;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    width: 120px;\n  }\n  &:hover {\n    transition: 0.5s;\n    background-color: ","\n  }\n\n  &:disabled {\n    background-color: #bdbdbd;\n    cursor: not-allowed;\n  }\n"])),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.hoverColor}))),Q_=Pe.p(C_||(C_=Yn(["\n  color: #ff0000;\n"]))),J_=(Pe.div(S_||(S_=Yn(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n  //height: 100%;\n"]))),Pe.div(E_||(E_=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  svg{\n    font-size: 248px;\n    cursor: pointer;\n    &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n  }\n  img{\n    width: 229px;\n    height: 171px;\n    border-radius: 10%;\n    @media (max-width: 700px) {\n      width: 250px;\n      height: 110px;\n    }\n  }\n"])))),Z_=(Pe.div(k_||(k_=Yn(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: 0.5s;\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n"]))),Pe.div(__||(__=Yn(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  width: 382px;\n  height: 100%;\n  background-color: rgb(25, 29, 63);\n  border-radius: 4%;\n  gap: 3px;\n  @media (max-width: 1150px) {\n    width: auto;\n  }\n"])))),eR=Pe.label(R_||(R_=Yn(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin-bottom: 8px;\n  width: 300px;\n  gap:5px;\n  border: none;\n  transition: 0.5s;\n  @media (max-width: 700px) {\n    width: 250px;\n  }\n  &:hover {\n    transition: 0.5s;\n    color: #F231A5;\n  }\n"]))),tR=Pe.input(I_||(I_=Yn(["\n  padding: 8px;\n  border: none;\n  background-color: ",";\n  border-radius: 4px;\n  font-size: 16px;\n"])),(function(e){return e.theme.colors.textPrimary})),nR=Pe.div(A_||(A_=Yn(["\n  font-size: 25px;\n\n"])));Pe.div(T_||(T_=Yn(["\n  display: flex;\n  flex-direction: column;\n  align-content: flex-start;\n  width: 100%;\n  gap: 40px;\n"]))),Pe.div(D_||(D_=Yn(["\n  font-size: 20px;\n\n"]))),Pe.div(N_||(N_=Yn(["\n  font-size: 20px;\n\n"]))),Pe.div(O_||(O_=Yn(["\n  display: flex;\n  flex-direction: row;\n  gap: 40px;\n"])));function rR(){var t=Zi(),n=t.register,r=t.handleSubmit,o=t.formState,i=qe((0,e.useState)([]),2),a=i[0],s=i[1],u=un(),c="joao ryan",l="test@gmail.com",f="(35) 9 99372979",d="Rua em algum lugar";return(0,je.jsx)(je.Fragment,{children:(0,je.jsx)(q_,{children:(0,je.jsxs)(K_,{onSubmit:r((function(e){var t={name:e.name,phone:e.phone,email:e.email,address:e.address,image:a};console.log(t),za(t,1).then((function(e){console.log(e),u(-1)})).catch((function(e){console.log(e)})),u(-1)})),children:[(0,je.jsx)(nR,{children:"EDITAR USU\xc1RIO"}),(0,je.jsx)("div",{children:(0,je.jsxs)($_,{children:[(0,je.jsx)(J_,{children:(0,je.jsx)(ys,{onCapture:function(e){a.push(e),s(a)}})}),(0,je.jsxs)(Z_,{children:[(0,je.jsxs)(eR,{children:["Nome:",(0,je.jsx)(tR,ho(ho({type:"text",defaultValue:c},n("name",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.name&&(0,je.jsx)(Q_,{children:"Nome \xe9 obrigat\xf3rio"})]}),(0,je.jsxs)(eR,{children:["Email:",(0,je.jsx)(tR,ho(ho({type:"text",defaultValue:l},n("email",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.email&&(0,je.jsx)(Q_,{children:"email \xe9 obrigat\xf3rio"})]}),(0,je.jsxs)(eR,{children:["Endere\xe7o:",(0,je.jsx)(tR,ho(ho({type:"text",defaultValue:d},n("address",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.address&&(0,je.jsx)(Q_,{children:"Endere\xe7o \xe9 obrigat\xf3rio"})]}),(0,je.jsxs)(eR,{children:["Telefone:",(0,je.jsx)(tR,ho(ho({type:"phone",defaultValue:f},n("phone",{required:!0})),{},{disabled:o.isSubmitting})),o.errors.phone&&(0,je.jsx)(Q_,{children:"Telefone \xe9 obrigat\xf3rio"})]})]})]})}),(0,je.jsx)("div",{children:(0,je.jsxs)(X_,{children:[(0,je.jsx)(Y_,{onClick:function(){return u(-1)},children:"voltar"}),(0,je.jsx)(Y_,{type:"submit",children:"salvar"})]})})]})})})}var oR=function(){return(0,je.jsx)(kn,{children:(0,je.jsx)(Cn,{children:(0,je.jsxs)(bn,{path:"/",element:(0,je.jsx)(lo,{}),children:[(0,je.jsx)(bn,{path:"",element:(0,je.jsx)(Ua,{})}),(0,je.jsx)(bn,{path:"createAccount",element:(0,je.jsx)(xs,{})}),(0,je.jsx)(bn,{path:"RecoverPasswordPage",element:(0,je.jsx)(Us,{})}),(0,je.jsx)(bn,{path:"home",element:(0,je.jsx)(ao,{})}),(0,je.jsx)(bn,{path:"visitant",element:(0,je.jsx)(Pk,{})}),(0,je.jsx)(bn,{path:"profile",element:(0,je.jsx)(Nu,{})}),(0,je.jsx)(bn,{path:"profile/update",element:(0,je.jsx)(rR,{})}),(0,je.jsx)(bn,{path:"user/:id/visitant/creat",element:(0,je.jsx)(p_,{})}),(0,je.jsx)(bn,{path:"visitant/update",element:(0,je.jsx)(G_,{})})]})})})};var iR=function(){return(0,je.jsx)(We,{children:(0,je.jsx)(oR,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var aR=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};r.createRoot(document.getElementById("root")).render((0,je.jsx)(e.StrictMode,{children:(0,je.jsx)(iR,{})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),aR()}()}();
//# sourceMappingURL=main.ad85123b.js.map